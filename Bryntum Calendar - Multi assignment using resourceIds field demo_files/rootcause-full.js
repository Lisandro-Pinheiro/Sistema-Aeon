/**
 * Root Cause 2022-08-19 07:41
 *
 * Copyright (c) 2022 Bryntum AB
 *
 * ANY USE OUTSIDE OF therootcause.io IS EXPLICITLY FORBIDDEN
 *
 * For further information please visit https://therootcause.io
 */
!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(n){return e[n]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=114)}([function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){return(o=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function i(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,n){return!n||"object"!==r(n)&&"function"!=typeof n?a(e):n}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,n,t){return n&&u(e.prototype,n),t&&u(e,t),e}function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){return'"'+e.replace(/"/,'\\"')+'"'}function f(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(e=e.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(A))throw Error("Invalid request option. invalid attribute name: "+e);return e}function m(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var n={},t={},r=e.split(/\s+/),o=0;o<r.length;o++)if(i=r[o]){var i,s=(i=f(i)).toLowerCase();if(n[s])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");t[i]=!0,n[s]=!0}return Object.keys(t)}var g;t.d(n,"a",function(){return O}),"undefined"!=typeof WebKitMutationObserver?g=WebKitMutationObserver:"undefined"!=typeof MutationObserver&&(g=MutationObserver);var v,y=function(){function e(){c(this,e),h(this,"nodes",void 0),h(this,"values",void 0),this.nodes=[],this.values=[]}return d(e,[{key:"isIndex",value:function(e){return+e==e>>>0}},{key:"nodeId",value:function(n){var t=n[e.ID_PROP];return t||(t=n[e.ID_PROP]=e.nextId_++),t}},{key:"set",value:function(e,n){var t=this.nodeId(e);this.nodes[t]=e,this.values[t]=n}},{key:"get",value:function(e){var n=this.nodeId(e);return this.values[n]}},{key:"has",value:function(e){return this.nodeId(e)in this.nodes}},{key:"delete",value:function(e){var n=this.nodeId(e);delete this.nodes[n],this.values[n]=void 0}},{key:"keys",value:function(){var e=[];for(var n in this.nodes)this.isIndex(n)&&e.push(this.nodes[n]);return e}}]),e}();h(y,"ID_PROP","__mutation_summary_node_map_id__"),h(y,"nextId_",1),function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(v||(v={}));var b,w=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;c(this,e),this.node=n,this.childList=t,this.attributes=r,this.characterData=o,this.oldParentNode=i,this.added=s,this.attributeOldValues=a,this.characterDataOldValue=l,h(this,"isCaseInsensitive",void 0),this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return d(e,[{key:"getAttributeOldValue",value:function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]}},{key:"getAttributeNamesMutated",value:function(){var e=[];if(!this.attributeOldValues)return e;for(var n in this.attributeOldValues)e.push(n);return e}},{key:"attributeMutated",value:function(e,n){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},this.isCaseInsensitive&&(e=e.toLowerCase()),e in this.attributeOldValues||(this.attributeOldValues[e]=n)}},{key:"characterDataMutated",value:function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)}},{key:"removedFromParent",value:function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e}},{key:"insertedIntoParent",value:function(){this.childList=!0,this.added=!0}},{key:"getOldParent",value:function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode}}]),e}(),x=function e(){c(this,e),h(this,"added",void 0),h(this,"removed",void 0),h(this,"maybeMoved",void 0),h(this,"oldPrevious",void 0),h(this,"moved",void 0),this.added=new y,this.removed=new y,this.maybeMoved=new y,this.oldPrevious=new y,this.moved=void 0},E=function(e){function n(e,r){var o;c(this,n),h(a(o=t.call(this)),"anyParentsChanged",void 0),h(a(o),"anyAttributesChanged",void 0),h(a(o),"anyCharacterDataChanged",void 0),h(a(o),"reachableCache",void 0),h(a(o),"wasReachableCache",void 0),h(a(o),"rootNode",void 0),o.rootNode=e,o.reachableCache=void 0,o.wasReachableCache=void 0,o.anyParentsChanged=!1,o.anyAttributesChanged=!1,o.anyCharacterDataChanged=!1;for(var i=0;i<r.length;i++){var s=r[i];switch(s.type){case"childList":o.anyParentsChanged=!0;for(var l=0;l<s.removedNodes.length;l++){var u=s.removedNodes[l];o.getChange(u).removedFromParent(s.target)}for(l=0;l<s.addedNodes.length;l++)u=s.addedNodes[l],o.getChange(u).insertedIntoParent();break;case"attributes":o.anyAttributesChanged=!0,o.getChange(s.target).attributeMutated(s.attributeName,s.oldValue);break;case"characterData":o.anyCharacterDataChanged=!0,o.getChange(s.target).characterDataMutated(s.oldValue)}}return o}!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&o(e,n)}(n,y);var t=i(n);return d(n,[{key:"getChange",value:function(e){var n=this.get(e);return n||(n=new w(e),this.set(e,n)),n}},{key:"getOldParent",value:function(e){var n=this.get(e);return n?n.getOldParent():e.parentNode}},{key:"getIsReachable",value:function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new y;var n=this.reachableCache.get(e);return void 0===n&&(n=this.getIsReachable(e.parentNode),this.reachableCache.set(e,n)),n}},{key:"getWasReachable",value:function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new y;var n=this.wasReachableCache.get(e);return void 0===n&&(n=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,n)),n}},{key:"reachabilityChange",value:function(e){return this.getIsReachable(e)?this.getWasReachable(e)?v.STAYED_IN:v.ENTERED:this.getWasReachable(e)?v.EXITED:v.STAYED_OUT}}]),n}(),C=function(){function e(n,t,r,o,i){c(this,e),this.rootNode=n,this.mutations=t,this.selectors=r,this.calcReordered=o,this.calcOldPreviousSibling=i,h(this,"treeChanges",void 0),h(this,"entered",void 0),h(this,"exited",void 0),h(this,"stayedIn",void 0),h(this,"visited",void 0),h(this,"childListChangeMap",void 0),h(this,"characterDataOnly",void 0),h(this,"matchCache",void 0),this.treeChanges=new E(n,t),this.entered=[],this.exited=[],this.stayedIn=new y,this.visited=new y,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return d(e,[{key:"processMutations",value:function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),n=0;n<e.length;n++)this.visitNode(e[n],void 0)}},{key:"visitNode",value:function(e,n){if(!this.visited.has(e)){this.visited.set(e,!0);var t=this.treeChanges.get(e),r=n;if((t&&t.childList||null==r)&&(r=this.treeChanges.reachabilityChange(e)),r!==v.STAYED_OUT){if(this.matchabilityChange(e),r===v.ENTERED)this.entered.push(e);else if(r===v.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(r===v.STAYED_IN){var o=v.STAYED_IN;t&&t.childList&&(t.oldParentNode!==e.parentNode?(o=v.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(o=v.REORDERED)),this.stayedIn.set(e,o)}if(r!==v.STAYED_IN)for(var i=e.firstChild;i;i=i.nextSibling)this.visitNode(i,r)}}}},{key:"ensureHasOldPreviousSiblingIfNeeded",value:function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var n=e.parentNode,t=this.treeChanges.get(e);t&&t.oldParentNode&&(n=t.oldParentNode);var r=this.childListChangeMap.get(n);r||(r=new x,this.childListChangeMap.set(n,r)),r.oldPrevious.has(e)||r.oldPrevious.set(e,e.previousSibling)}}},{key:"getChanged",value:function(e,n,t){this.selectors=n,this.characterDataOnly=t;for(var r=0;r<this.entered.length;r++){var o=this.entered[r];(a=this.matchabilityChange(o))!==v.ENTERED&&a!==v.STAYED_IN||e.added.push(o)}var i=this.stayedIn.keys();for(r=0;r<i.length;r++)if(o=i[r],(a=this.matchabilityChange(o))===v.ENTERED)e.added.push(o);else if(a===v.EXITED)e.removed.push(o);else if(a===v.STAYED_IN&&(e.reparented||e.reordered)){var s=this.stayedIn.get(o);e.reparented&&s===v.REPARENTED?e.reparented.push(o):e.reordered&&s===v.REORDERED&&e.reordered.push(o)}for(r=0;r<this.exited.length;r++){var a;o=this.exited[r],(a=this.matchabilityChange(o))!==v.EXITED&&a!==v.STAYED_IN||e.removed.push(o)}}},{key:"getOldParentNode",value:function(e){var n=this.treeChanges.get(e);if(n&&n.childList)return n.oldParentNode?n.oldParentNode:null;var t=this.treeChanges.reachabilityChange(e);if(t===v.STAYED_OUT||t===v.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode}},{key:"getOldPreviousSibling",value:function(e){var n=e.parentNode,t=this.treeChanges.get(e);t&&t.oldParentNode&&(n=t.oldParentNode);var r=this.childListChangeMap.get(n);if(!r)throw Error("getOldPreviousSibling requested on invalid node.");return r.oldPrevious.get(e)}},{key:"getOldAttribute",value:function(e,n){var t=this.treeChanges.get(e);if(!t||!t.attributes)throw Error("getOldAttribute requested on invalid node.");var r=t.getAttributeOldValue(n);if(void 0===r)throw Error("getOldAttribute requested for unchanged attribute name.");return r}},{key:"attributeChangedNodes",value:function(e){if(!this.treeChanges.anyAttributesChanged)return{};var n,t;if(e){n={},t={};for(var r=0;r<e.length;r++)n[d=e[r]]=!0,t[d.toLowerCase()]=d}var o={},i=this.treeChanges.keys();for(r=0;r<i.length;r++){var s=i[r],a=this.treeChanges.get(s);if(a.attributes&&v.STAYED_IN===this.treeChanges.reachabilityChange(s)&&v.STAYED_IN===this.matchabilityChange(s))for(var l=s,c=a.getAttributeNamesMutated(),u=0;u<c.length;u++){var d=c[u];(!n||n[d]||a.isCaseInsensitive&&t[d])&&a.getAttributeOldValue(d)!==l.getAttribute(d)&&(t&&a.isCaseInsensitive&&(d=t[d]),o[d]=o[d]||[],o[d].push(l))}}return o}},{key:"getOldCharacterData",value:function(e){var n=this.treeChanges.get(e);if(!n||!n.characterData)throw Error("getOldCharacterData requested on invalid node.");return n.characterDataOldValue}},{key:"getCharacterDataChanged",value:function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),n=[],t=0;t<e.length;t++){var r=e[t];if(v.STAYED_IN===this.treeChanges.reachabilityChange(r)){var o=this.treeChanges.get(r);o.characterData&&r.textContent!=o.characterDataOldValue&&n.push(r)}}return n}},{key:"computeMatchabilityChange",value:function(e,n){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new y);var t=this.matchCache[e.uid],r=t.get(n);return void 0===r&&(r=e.matchabilityChange(n,this.treeChanges.get(n)),t.set(n,r)),r}},{key:"matchabilityChange",value:function(e){var n=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return v.STAYED_IN;default:return v.STAYED_OUT}if(!this.selectors)return v.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return v.STAYED_OUT;for(var t=e,r=this.selectors.map(function(e){return n.computeMatchabilityChange(e,t)}),o=v.STAYED_OUT,i=0;o!==v.STAYED_IN&&i<r.length;){switch(r[i]){case v.STAYED_IN:o=v.STAYED_IN;break;case v.ENTERED:o=o===v.EXITED?v.STAYED_IN:v.ENTERED;break;case v.EXITED:o=o===v.ENTERED?v.STAYED_IN:v.EXITED}i++}return o}},{key:"getChildlistChange",value:function(e){var n=this.childListChangeMap.get(e);return n||(n=new x,this.childListChangeMap.set(e,n)),n}},{key:"processChildlistChanges",value:function(){if(!this.childListChangeMap){this.childListChangeMap=new y;for(var e=0;e<this.mutations.length;e++){var n=this.mutations[e];if("childList"==n.type&&(this.treeChanges.reachabilityChange(n.target)===v.STAYED_IN||this.calcOldPreviousSibling)){for(var t=this.getChildlistChange(n.target),r=n.previousSibling,o=function(e,n){!e||t.oldPrevious.has(e)||t.added.has(e)||t.maybeMoved.has(e)||n&&(t.added.has(n)||t.maybeMoved.has(n))||t.oldPrevious.set(e,n)},i=0;i<n.removedNodes.length;i++)o(s=n.removedNodes[i],r),t.added.has(s)?t.added.delete(s):(t.removed.set(s,!0),t.maybeMoved.delete(s)),r=s;for(o(n.nextSibling,r),i=0;i<n.addedNodes.length;i++){var s=n.addedNodes[i];t.removed.has(s)?(t.removed.delete(s),t.maybeMoved.set(s,!0)):t.added.set(s,!0)}}}}}},{key:"wasReordered",value:function(e){function n(e){if(!e)return!1;if(!o.maybeMoved.has(e))return!1;var t=o.moved.get(e);return void 0!==t||(i.has(e)?t=!0:(i.set(e,!0),t=function(e){if(a.has(e))return a.get(e);for(var t=e.previousSibling;t&&(o.added.has(t)||n(t));)t=t.previousSibling;return a.set(e,t),t}(e)!==function e(t){var r=s.get(t);if(void 0!==r)return r;for(r=o.oldPrevious.get(t);r&&(o.removed.has(r)||n(r));)r=e(r);return void 0===r&&(r=t.previousSibling),s.set(t,r),r}(e)),i.has(e)?(i.delete(e),o.moved.set(e,t)):t=o.moved.get(e)),t}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var o=this.childListChangeMap.get(t);if(!o)return!1;if(o.moved)return o.moved.get(e);o.moved=new y;var i=new y,s=new y,a=new y;return o.maybeMoved.keys().forEach(n),o.moved.get(e)}}]),e}(),S=function(){function e(n,t){var r=this;if(c(this,e),this.projection=n,h(this,"added",void 0),h(this,"removed",void 0),h(this,"reparented",void 0),h(this,"reordered",void 0),h(this,"valueChanged",void 0),h(this,"attributeChanged",void 0),h(this,"characterDataChanged",void 0),this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,n.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var o=t.attribute?[t.attribute]:t.attributeList,i=n.attributeChangedNodes(o);t.attribute?this.valueChanged=i[t.attribute]||[]:(this.attributeChanged=i,t.attributeList&&t.attributeList.forEach(function(e){r.attributeChanged.hasOwnProperty(e)||(r.attributeChanged[e]=[])}))}if(t.all||t.characterData){var s=n.getCharacterDataChanged();t.characterData?this.valueChanged=s:this.characterDataChanged=s}this.reordered&&(this.getOldPreviousSibling=n.getOldPreviousSibling.bind(n))}return d(e,[{key:"getOldParentNode",value:function(e){return this.projection.getOldParentNode(e)}},{key:"getOldAttribute",value:function(e,n){return this.projection.getOldAttribute(e,n)}},{key:"getOldCharacterData",value:function(e){return this.projection.getOldCharacterData(e)}},{key:"getOldPreviousSibling",value:function(e){return this.projection.getOldPreviousSibling(e)}}]),e}(),k=/[a-zA-Z_]+/,M=/[a-zA-Z0-9_\-]+/,T=function(){function e(){c(this,e),h(this,"attrName",void 0),h(this,"attrValue",void 0),h(this,"contains",void 0)}return d(e,[{key:"matches",value:function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var n=e.split(" "),t=0;t<n.length;t++)if(this.attrValue===n[t])return!0;return!1}},{key:"toString",value:function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+p(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+p(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue}}]),e}(),P=function(){function e(){c(this,e),h(this,"tagName",void 0),h(this,"qualifiers",void 0),h(this,"uid",void 0),this.uid=e.nextUid++,this.qualifiers=[]}return d(e,[{key:"caseInsensitiveTagName",get:function(){return this.tagName.toUpperCase()}},{key:"selectorString",get:function(){return this.tagName+this.qualifiers.join("")}}]),d(e,[{key:"isMatching",value:function(n){return n[e.matchesSelector](this.selectorString)}},{key:"wasMatching",value:function(e,n,t){if(!n||!n.attributes)return t;var r=n.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==r&&r!==e.tagName)return!1;for(var o=[],i=!1,s=0;s<this.qualifiers.length;s++){var a=this.qualifiers[s],l=n.getAttributeOldValue(a.attrName);o.push(l),i=i||void 0!==l}if(!i)return t;for(s=0;s<this.qualifiers.length;s++)if(a=this.qualifiers[s],void 0===(l=o[s])&&(l=e.getAttribute(a.attrName)),!a.matches(l))return!1;return!0}},{key:"matchabilityChange",value:function(e,n){var t=this.isMatching(e);return t?this.wasMatching(e,n,t)?v.STAYED_IN:v.ENTERED:this.wasMatching(e,n,t)?v.EXITED:v.STAYED_OUT}}],[{key:"parseSelectors",value:function(n){function t(){o&&(i&&(o.qualifiers.push(i),i=void 0),a.push(o)),o=new e}function r(){i&&o.qualifiers.push(i),i=new T}for(var o,i,s,a=[],l=/\s/,c="Invalid or unsupported selector syntax.",u=1,d=0;d<n.length;){var h=n[d++];switch(u){case 1:if(h.match(k)){t(),o.tagName=h,u=2;break}if("*"==h){t(),o.tagName="*",u=3;break}if("."==h){t(),r(),o.tagName="*",i.attrName="class",i.contains=!0,u=4;break}if("#"==h){t(),r(),o.tagName="*",i.attrName="id",u=4;break}if("["==h){t(),r(),o.tagName="*",i.attrName="",u=6;break}if(h.match(l))break;throw Error(c);case 2:if(h.match(M)){o.tagName+=h;break}if("."==h){r(),i.attrName="class",i.contains=!0,u=4;break}if("#"==h){r(),i.attrName="id",u=4;break}if("["==h){r(),i.attrName="",u=6;break}if(h.match(l)){u=14;break}if(","==h){u=1;break}throw Error(c);case 3:if("."==h){r(),i.attrName="class",i.contains=!0,u=4;break}if("#"==h){r(),i.attrName="id",u=4;break}if("["==h){r(),i.attrName="",u=6;break}if(h.match(l)){u=14;break}if(","==h){u=1;break}throw Error(c);case 4:if(h.match(k)){i.attrValue=h,u=5;break}throw Error(c);case 5:if(h.match(M)){i.attrValue+=h;break}if("."==h){r(),i.attrName="class",i.contains=!0,u=4;break}if("#"==h){r(),i.attrName="id",u=4;break}if("["==h){r(),u=6;break}if(h.match(l)){u=14;break}if(","==h){u=1;break}throw Error(c);case 6:if(h.match(k)){i.attrName=h,u=7;break}if(h.match(l))break;throw Error(c);case 7:if(h.match(M)){i.attrName+=h;break}if(h.match(l)){u=8;break}if("~"==h){i.contains=!0,u=9;break}if("="==h){i.attrValue="",u=11;break}if("]"==h){u=3;break}throw Error(c);case 8:if("~"==h){i.contains=!0,u=9;break}if("="==h){i.attrValue="",u=11;break}if("]"==h){u=3;break}if(h.match(l))break;throw Error(c);case 9:if("="==h){i.attrValue="",u=11;break}throw Error(c);case 10:if("]"==h){u=3;break}if(h.match(l))break;throw Error(c);case 11:if(h.match(l))break;if('"'==h||"'"==h){s=h,u=13;break}i.attrValue+=h,u=12;break;case 12:if(h.match(l)){u=10;break}if("]"==h){u=3;break}if("'"==h||'"'==h)throw Error(c);i.attrValue+=h;break;case 13:if(h==s){u=10;break}i.attrValue+=h;break;case 14:if(h.match(l))break;if(","==h){u=1;break}throw Error(c)}}switch(u){case 1:case 2:case 3:case 5:case 14:t();break;default:throw Error(c)}if(!a.length)throw Error(c);return a}}]),e}();h(P,"nextUid",1),h(P,"matchesSelector","function"==typeof(b=document.createElement("div")).webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof b.mozMatchesSelector?"mozMatchesSelector":"function"==typeof b.msMatchesSelector?"msMatchesSelector":"matchesSelector");var A=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,O=function(){function e(n){var t=this;c(this,e),h(this,"connected",void 0),h(this,"options",void 0),h(this,"observer",void 0),h(this,"observerOptions",void 0),h(this,"root",void 0),h(this,"callback",void 0),h(this,"elementFilter",void 0),h(this,"calcReordered",void 0),h(this,"queryValidators",void 0),this.connected=!1,this.options=e.validateOptions(n),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(n){return e.createQueryValidator(t.root,n)})),this.observer=new g(function(e){t.observerCallback(e)}),this.reconnect()}return d(e,[{key:"createSummaries",value:function(e){if(!e||!e.length)return[];for(var n=new C(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),t=[],r=0;r<this.options.queries.length;r++)t.push(new S(n,this.options.queries[r]));return t}},{key:"checkpointQueryValidators",value:function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})}},{key:"runQueryValidators",value:function(e){this.queryValidators.forEach(function(n,t){n&&n.validate(e[t])})}},{key:"changesToReport",value:function(e){return e.some(function(e){return!!["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some(function(n){return e[n]&&e[n].length})||!(!e.attributeChanged||!Object.keys(e.attributeChanged).some(function(n){return!!e.attributeChanged[n].length}))})}}],[{key:"createObserverOptions",value:function(e){function n(e){r.attributes&&!t||(r.attributes=!0,r.attributeOldValue=!0,e?(t=t||{},e.forEach(function(e){t[e]=!0,t[e.toLowerCase()]=!0})):t=void 0)}var t,r={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return r.characterData=!0,void(r.characterDataOldValue=!0);if(e.all)return n(),r.characterData=!0,void(r.characterDataOldValue=!0);if(e.attribute)n([e.attribute.trim()]);else{var t=function(e){var n={};return e.forEach(function(e){e.qualifiers.forEach(function(e){n[e.attrName]=!0})}),Object.keys(n)}(e.elementFilter).concat(e.attributeList||[]);t.length&&n(t)}}),t&&(r.attributeFilter=Object.keys(t)),r}},{key:"validateOptions",value:function(n){for(var t in n)if(!(t in e.optionKeys))throw Error("Invalid option: "+t);if("function"!=typeof n.callback)throw Error("Invalid options: callback is required and must be a function");if(!n.queries||!n.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var r={callback:n.callback,rootNode:n.rootNode||document,observeOwnChanges:!!n.observeOwnChanges,oldPreviousSibling:!!n.oldPreviousSibling,queries:[]},o=0;o<n.queries.length;o++){var i=n.queries[o];if(i.all){if(Object.keys(i).length>1)throw Error("Invalid request option. all has no options.");r.queries.push({all:!0})}else if("attribute"in i){if((a={attribute:f(i.attribute)}).elementFilter=P.parseSelectors("*["+a.attribute+"]"),Object.keys(i).length>1)throw Error("Invalid request option. attribute has no options.");r.queries.push(a)}else if("element"in i){var s=Object.keys(i).length,a={element:i.element,elementFilter:P.parseSelectors(i.element)};if(i.hasOwnProperty("elementAttributes")&&(a.attributeList=m(i.elementAttributes),s--),s>1)throw Error("Invalid request option. element only allows elementAttributes option.");r.queries.push(a)}else{if(!i.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(i).length>1)throw Error("Invalid request option. characterData has no options.");r.queries.push({characterData:!0})}}return r}}]),d(e,[{key:"observerCallback",value:function(e){this.options.observeOwnChanges||this.observer.disconnect();var n=this.createSummaries(e);this.runQueryValidators(n),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(n)&&this.callback(n),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))}},{key:"reconnect",value:function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()}},{key:"takeSummaries",value:function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0}},{key:"disconnect",value:function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e}}]),e}();h(O,"NodeMap",y),h(O,"parseElementFilter",P.parseSelectors),h(O,"createQueryValidator",void 0),h(O,"optionKeys",{callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0})},function(module,__webpack_exports__,__webpack_require__){"use strict";var FunctionUtil={argArray:"qwertyuioasdfghjklzxcvbnm".split(""),fnIgnoreRe:/self|constructor|onBeforeCreated|onClassCreated/,objectIgnoreRe:/superclass|hasListeners/,tryCatchify:function tryCatchify(targets){var me=this;if(targets)if("string"==typeof targets)me.wrapWithTryCatch(eval(targets));else for(var o in targets)this.tryCatchifySingle(o,targets[o])},tryCatchifySingle:function tryCatchifySingle(targetObj,methodName){var me=this;try{targetObj="string"==typeof targetObj?eval(targetObj):targetObj}catch(e){console.log("RootCause: Failed to wrap function for arguments capturing",e),targetObj=null}targetObj&&("function"==typeof targetObj&&"function"!=typeof targetObj[methodName]?me.wrapWithTryCatch(targetObj.prototype,methodName):"*"===methodName?me.wrapObject(targetObj):me.wrapWithTryCatch(targetObj,methodName))},wrapObject:function(e){for(var n in e){var t=e[n],r=window.Ext&&(n in Ext.Base.prototype||n in Ext.util.Observable.prototype);!e.hasOwnProperty(n)||"function"!=typeof t||n.match(this.fnIgnoreRe)||r||t._wrapped||!t.$className&&t.length&&this.wrapWithTryCatch(e,n)}},intercept:function(e,n,t,r){var o=e[n];if(!o||"function"!=typeof o)throw new Error('No "'+n+'" function found in '+e.toString());e[n]=function(){return t.apply(r||this,arguments),o.apply(this,arguments)},e[n]._origFn=o,e[n]._wrapped=!0},interceptConstructor:function(e,n,t,r){var o=e[n];if(!o)throw new Error('No "'+n+'" function found in '+e.toString());"function"==typeof o.bind&&(e[n]=function(){var e;switch(arguments.length){case 0:e=new o;break;case 1:e=new o(arguments[0]);break;case 2:e=new o(arguments[0],arguments[1]);break;case 3:e=new o(arguments[0],arguments[1],arguments[2]);break;case 4:e=new o(arguments[0],arguments[1],arguments[2],arguments[3]);break;case 5:e=new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);break;case 6:e=new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);break;default:e=new(o.bind.apply(o,arguments))}return t.apply(e,arguments),e},e[n]._origFn=o,e[n]._wrapped=!0)},removeInterceptor:function(e,n){e[n]&&e[n]._wrapped&&(e[n]=e[n]._origFn)},wrapWithTryCatch:function(e,n){var t=e[n];if(this.argArray,t&&"function"==typeof t){t.length;var r=this;e[n]=function(){try{return t.apply(this,arguments)}catch(i){var e=new Error(i);if(e.functionSource=t.toString(),e.functionName=r.getFunctionName(t),e.functionName){var n=e.functionSource,o=n.substr(0,n.indexOf("("));e.functionSource=o+(o.indexOf(e.functionName)<0?e.functionName:"")+n.substr(o.length)}throw e.thisObj=this,e.args=[].slice.apply(arguments),e.trueStack=i.stack,e.wrapperFunctionName="wrapperFn",e}},e[n]._wrapped=!0}},getFunctionName:function(e){var n=e.$name||e.name;if(!n){var t=e.toString().match(/^function\s*([^\s(]+)/);n=t&&t[1]}return n||""}};__webpack_exports__.a=FunctionUtil},function(e,n,t){(function(n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof n&&n)||Function("return this")()}).call(this,t(14))},function(e,n,t){"use strict";(function(e,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={};(function(){function n(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function s(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:n(e)}function a(e,n){for(var t in e)w.call(e,t)&&n(e[t],t,e)}function l(e){return null==e?n(e):x.call(e).slice(8,-1)}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function u(e,n){var t=null;return function(e,n){var t=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=v)for(;++t<r;)n(e[t],t);else a(e,n)}(e,function(r,o){t=n(t,r,o,e)}),t}function d(e){return String(e).replace(/^ +| +$/g,"")}var h={function:!0,object:!0},p=h["undefined"==typeof window?"undefined":o(window)]&&window||this,f=h["undefined"==typeof exports?"undefined":o(exports)]&&exports,m=h[o(e)]&&e&&!e.nodeType&&e,g=f&&m&&"object"==(void 0===r?"undefined":o(r))&&r;!g||g.global!==g&&g.window!==g&&g.self!==g||(p=g);var v=Math.pow(2,53)-1,y=/\bOpera/,b=Object.prototype,w=b.hasOwnProperty,x=b.toString,E=function e(n){function t(e){return u(e,function(e,t){var r=t.pattern||c(t);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(n)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))&&((e=String(t.label&&!RegExp(r,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=s(e[0].replace(RegExp(r,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var r=p,i=n&&"object"==o(n)&&"String"!=l(n);i&&(r=n,n=null);var h=r.navigator||{},f=h.userAgent||"";n||(n=f);var m,g,v,b,w,E=i?!!h.likeChrome:/\bChrome\b/.test(n)&&!/internal|\n/i.test(x.toString()),C=i?"Object":"ScriptBridgingProxyObject",S=i?"Object":"Environment",k=i&&r.java?"JavaPackage":l(r.java),M=i?"Object":"RuntimeObject",T=/\bJava/.test(k)&&r.java,P=T&&l(r.environment)==S,A=T?"a":"α",O=T?"b":"β",R=r.document||{},_=r.operamini||r.opera,N=y.test(N=i&&_?_["[[Class]]"]:l(_))?N:_=null,I=n,D=[],F=null,L=n==f,z=L&&_&&"function"==typeof _.version&&_.version(),B=u([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||c(t))+"\\b","i").exec(n)&&(t.label||t)}),j=u(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||c(t))+"\\b","i").exec(n)&&(t.label||t)}),U=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=u({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,t,r){return e||(t[U]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+c(r)+"(?:\\b|\\w*\\d)","i").exec(n))&&r}),J=u(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var r=t.pattern||c(t);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))&&(e=function(e,n,t){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return n&&t&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),n&&t&&(e=e.replace(RegExp(n,"i"),t)),e=s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,t.label||t)),e});if(B&&(B=[B]),q&&!U&&(U=t([q])),(m=/\bGoogle TV\b/.exec(U))&&(U=m[0]),/\bSimulator\b/i.test(n)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(n)&&D.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(n)?(q=(m=e(n.replace(/like iPhone OS/,""))).manufacturer,U=m.product):/^iP/.test(U)?(j||(j="Safari"),J="iOS"+((m=/ OS ([\d_]+)/i.exec(n))?" "+m[1].replace(/_/g,"."):"")):"Konqueror"!=j||/buntu/i.test(J)?q&&"Google"!=q&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(n)||/\bVita\b/.test(U))||/\bAndroid\b/.test(J)&&/^Chrome/.test(j)&&/\bVersion\//i.test(n)?(j="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==j?(/\bMobi/i.test(n)||(J="Android",D.unshift("desktop mode")),/Accelerated *= *true/i.test(n)&&D.unshift("accelerated")):"PaleMoon"==j&&(m=/\bFirefox\/([\d.]+)\b/.exec(n))?D.push("identifying as Firefox "+m[1]):"Firefox"==j&&(m=/\b(Mobile|Tablet|TV)\b/i.exec(n))?(J||(J="Firefox OS"),U||(U=m[1])):!j||(m=!/\bMinefield\b/i.test(n)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!U&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(m+"/")+8))&&(j=null),(m=U||q||J)&&(U||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:m)+" Browser")):"Electron"==j&&(m=(/\bChrome\/([\d.]+)\b/.exec(n)||0)[1])&&D.push("Chromium "+m):J="Kubuntu",z||(z=u(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(j),"(?:Firefox|Minefield|NetFront)"],function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null})),(m=("iCab"==B&&parseFloat(z)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(n)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(n)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(B=[m]),"IE"==j&&(m=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])?(j+=" Mobile",J="Windows Phone "+(/\+$/.test(m)?m:m+".x"),D.unshift("desktop mode")):/\bWPDesktop\b/i.test(n)?(j="IE Mobile",J="Windows Phone 8.x",D.unshift("desktop mode"),z||(z=(/\brv:([\d.]+)/.exec(n)||0)[1])):"IE"!=j&&"Trident"==B&&(m=/\brv:([\d.]+)/.exec(n))&&(j&&D.push("identifying as "+j+(z?" "+z:"")),j="IE",z=m[1]),L){if(b="global",w=null!=(v=r)?o(v[b]):"number",/^(?:boolean|number|string|undefined)$/.test(w)||"object"==w&&!v[b])l(m=r.runtime)==C?(j="Adobe AIR",J=m.flash.system.Capabilities.os):l(m=r.phantom)==M?(j="PhantomJS",z=(m=m.version||null)&&m.major+"."+m.minor+"."+m.patch):"number"==typeof R.documentMode&&(m=/\bTrident\/(\d+)/i.exec(n))?(z=[z,R.documentMode],(m=+m[1]+4)!=z[1]&&(D.push("IE "+z[1]+" mode"),B&&(B[1]=""),z[1]=m),z="IE"==j?String(z[1].toFixed(1)):z[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(D.push("masking as "+j+" "+z),j="IE",z="11.0",B=["Trident"],J="Windows");else if(T&&(I=(m=T.lang.System).getProperty("os.arch"),J=J||m.getProperty("os.name")+" "+m.getProperty("os.version")),P){try{z=r.require("ringo/engine").version.join("."),j="RingoJS"}catch(e){(m=r.system)&&m.global.system==r.system&&(j="Narwhal",J||(J=m[0].os||null))}j||(j="Rhino")}else"object"==o(r.process)&&!r.process.browser&&(m=r.process)&&("object"==o(m.versions)&&("string"==typeof m.versions.electron?(D.push("Node "+m.versions.node),j="Electron",z=m.versions.electron):"string"==typeof m.versions.nw&&(D.push("Chromium "+z,"Node "+m.versions.node),j="NW.js",z=m.versions.nw)),j||(j="Node.js",I=m.arch,J=m.platform,z=(z=/[\d.]+/.exec(m.version))?z[0]:null));J=J&&s(J)}if(z&&(m=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(z)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(L&&h.appMinorVersion))||/\bMinefield\b/i.test(n)&&"a")&&(F=/b/i.test(m)?"beta":"alpha",z=z.replace(RegExp(m+"\\+?$"),"")+("beta"==F?O:A)+(/\d+\+?/.exec(m)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS)\b/.test(J))j="Firefox Mobile";else if("Maxthon"==j&&z)z=z.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(J=null),"Xbox 360"==U&&/\bIEMobile\b/.test(n)&&D.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||U||/Browser|Mobi/.test(j))||"Windows CE"!=J&&!/Mobi/i.test(n))if("IE"==j&&L)try{null===r.external&&D.unshift("platform preview")}catch(e){D.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(n))&&(m=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||z)?(J=((m=[m,/BB10/.test(n)])[1]?(U=null,q="BlackBerry"):"Device Software")+" "+m[0],z=null):this!=a&&"Wii"!=U&&(L&&_||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(n)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==j&&(J&&!/^Win/.test(J)&&z>5.5||/\bWindows XP\b/.test(J)&&z>8||8==z&&!/\bTrident\b/.test(n)))&&!y.test(m=e.call(a,n.replace(y,"")+";"))&&m.name&&(m="ing as "+m.name+((m=m.version)?" "+m:""),y.test(j)?(/\bIE\b/.test(m)&&"Mac OS"==J&&(J=null),m="identify"+m):(m="mask"+m,j=N?s(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(m)&&(J=null),L||(z=null)),B=["Presto"],D.push(m));else j+=" Mobile";(m=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1])&&(m=[parseFloat(m.replace(/\.(\d)$/,".0$1")),m],"Safari"==j&&"+"==m[1].slice(-1)?(j="WebKit Nightly",F="alpha",z=m[1].slice(0,-1)):z!=m[1]&&z!=(m[2]=(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1])||(z=null),m[1]=(/\bChrome\/([\d.]+)/i.exec(n)||0)[1],537.36==m[0]&&537.36==m[2]&&parseFloat(m[1])>=28&&"WebKit"==B&&(B=["Blink"]),L&&(E||m[1])?(B&&(B[1]="like Chrome"),m=m[1]||((m=m[0])<530?1:m<532?2:m<532.05?3:m<533?4:m<534.03?5:m<534.07?6:m<534.1?7:m<534.13?8:m<534.16?9:m<534.24?10:m<534.3?11:m<535.01?12:m<535.02?"13+":m<535.07?15:m<535.11?16:m<535.19?17:m<536.05?18:m<536.1?19:m<537.01?20:m<537.11?"21+":m<537.13?23:m<537.18?24:m<537.24?25:m<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),m=(m=m[0])<400?1:m<500?2:m<526?3:m<533?4:m<534?"4+":m<535?5:m<537?6:m<538?7:m<601?8:"8"),B&&(B[1]+=" "+(m+="number"==typeof m?".x":/[.+]/.test(m)?"":"+")),"Safari"==j&&(!z||parseInt(z)>45)&&(z=m)),"Opera"==j&&(m=/\bzbov|zvav$/.exec(J))?(j+=" ",D.unshift("desktop mode"),"zvav"==m?(j+="Mini",z=null):j+="Mobile",J=J.replace(RegExp(" *"+m+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(B&&B[1])&&(D.unshift("desktop mode"),j="Chrome Mobile",z=null,/\bOS X\b/.test(J)?(q="Apple",J="iOS 4.3+"):J=null),z&&0==z.indexOf(m=/[\d.]+$/.exec(J))&&n.indexOf("/"+m+"-")>-1&&(J=d(J.replace(m,""))),B&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(J)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(j)&&B[1])&&(m=B[B.length-1])&&D.push(m),D.length&&(D=["("+D.join("; ")+")"]),q&&U&&U.indexOf(q)<0&&D.push("on "+q),U&&D.push((/^on /.test(D[D.length-1])?"":"on ")+U),J&&(m=/ ([\d.+]+)$/.exec(J),g=m&&"/"==J.charAt(J.length-m[0].length-1),J={architecture:32,family:m&&!g?J.replace(m[0],""):J,version:m?m[1]:null,toString:function(){var e=this.version;return this.family+(e&&!g?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(m=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+m),"")),j&&(/\bWOW64\b/i.test(n)||L&&/\w(?:86|32)$/.test(h.cpuClass||h.platform)&&!/\bWin64; x64\b/i.test(n))&&D.unshift("32-bit")):J&&/^OS X/.test(J.family)&&"Chrome"==j&&parseFloat(z)>=39&&(J.architecture=64),n||(n=null);var W={};return W.description=n,W.layout=B&&B[0],W.manufacturer=q,W.name=j,W.prerelease=F,W.product=U,W.ua=n,W.version=j&&z,W.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=e,W.toString=function(){return this.description||""},W.version&&D.unshift(z),W.name&&D.unshift(j),J&&j&&(J!=String(J).split(" ")[0]||J!=j.split(" ")[0]&&!U)&&D.push(U?"("+J+")":"on "+J),D.length&&(W.description=D.join(" ")),W}();"function"==typeof define&&"object"==o(t(49))&&t(49)?(i.platform=E,define(function(){return E})):f&&m?a(E,function(e,n){f[n]=e}):i.platform=E}).call(void 0),n.a=i.platform}).call(this,t(81)(e),t(14))},function(e,n,t){"use strict";function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t(57);var a=t(19),l=t(20),c=t(3),u=t(11),d=t(12),h=t(1),p=t(7),f=t(22),m=t(5),g=t(23),v=t(24);window.RC=window.RC||{},-1!==navigator.userAgent.indexOf("Edg")&&(c.a.name="Edge");var y=location.search,b=location.hash,w=window.parent!==window&&window.parent.frames.length>=5,x=y.indexOf("__debug")>0,E=w&&b.indexOf("RECORDER_ERROR")>0;w&&(location.hash=location.hash.replace(/#RECORDER_ERROR/,""));var C=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"baseUrl","https://app.therootcause.io/"),s(this,"maxNbrOfReportedErrors",1),s(this,"recordUserActions",!1),s(this,"maxNbrOfRecordedUserActions",null),s(this,"captureArguments",null),s(this,"logConsoleOutput",!0),s(this,"logResourceLoadFailures",!0),s(this,"treatResourceLoadFailureAsError",!1),s(this,"user",void 0),s(this,"resetOnHistoryChange",!1),s(this,"version",void 0),s(this,"applicationId",void 0),s(this,"recorderConfig",{}),s(this,"data",void 0),s(this,"ignoreErrorMessageRe",null),s(this,"ignoreUrlRe",null),s(this,"ignoreFileRe",null),s(this,"onBeforeLog",null),s(this,"onErrorLogged",null),s(this,"onErrorLogFailed",null),s(this,"autoStart",!0),s(this,"frameworkVersion",void 0),s(this,"tags",null),s(this,"showErrorDialog",!1),s(this,"environment",void 0),s(this,"showNotificationOnError",!1),s(this,"notificationBackgroundColor","#0088d1"),s(this,"notificationTextColor","#fff"),s(this,"notificationShowDuration",5e3),s(this,"loggingErrorText","Logging error, please wait..."),s(this,"newErrorText",'An error was caught and successfully logged, id <a href="{link}">#{id}</a>'),s(this,"reproducedErrorText",'Error reported (<a href="{link}">#{id}</a>) is known and reproduced, we are working on a fix'),s(this,"fixedErrorText",'An error (<a href="{link}">#{id}</a>) was detected and it has already been marked as fixed, please try downloading our latest nightly build'),s(this,"saveCookies",!1),s(this,"enableArgumentsCapturing",!1),s(this,"plugins",null),s(this,"showFeedbackButton",!1),s(this,"showIconWhileRecording",!1),s(this,"styleNode",null),s(this,"iconNode",null),s(this,"iconCSS",".rc-recording-indicator { \n                    position      : fixed; \n                    right         : 5px; \n                    bottom        : 5px; \n                    width         : 18px; \n                    height        : 18px; \n                    border-radius : 50%; \n                    border        : solid 1px red; \n                    box-sizing    : border-box; \n                    z-index       : 10000; \n                    box-shadow    : 0 0 0 rgba(255, 169, 44, 0.5); \n                    animation     : rc-pulse 2s infinite; \n                } \n                .rc-recording-indicator:before { \n                    content          : ' '; \n                    position         : absolute; \n                    left             : 2px; \n                    top              : 2px; \n                    width            : 12px; \n                    height           : 12px; \n                    border-radius    : 50%; \n                    background-color : red; \n                } \n                @keyframes rc-pulse { \n                    0% { \n                        box-shadow : 0 0 0 0 rgba(255, 100, 44, 0.7); \n                    } \n                    70% { \n                        box-shadow : 0 0 0 10px rgba(255, 100, 44, 0); \n                    } \n                    100% { \n                        box-shadow : 0 0 0 0 rgba(255, 100, 44, 0); \n                    } \n                }\n        "),s(this,"minFailureResponseStatus",400),s(this,"treatUnhandledPromiseRejectionAsError",!0),s(this,"cookieData",null),s(this,"recorder",null),s(this,"player",null),s(this,"active",!1),s(this,"paused",!1),s(this,"loggedErrors",null),s(this,"logEntries",null),s(this,"window",window),s(this,"debug",x||E),s(this,"feedbackButton",null),s(this,"pageStartHref",location.href),s(this,"botRe",/bot|googlebot|crawler|spider|robot|crawling|daum|phantomjs/i),s(this,"loggerVersion","2022-08-19 07:41"),s(this,"oldOnErrorFn",null),s(this,"logRecorderErrors",x),s(this,"onStart",null),s(this,"onStop",null);var t=this,r=t.window.document;if(t.annotation=new a.a,"function"==typeof Function.prototype.bind){if(Object.assign(t,n),!t.baseUrl)throw new Error("baseUrl is a required config option");if(t.onError=t.onError.bind(t),t.onOnlineStatusChanged=t.onOnlineStatusChanged.bind(t),t.onUnhandledRejection=t.onUnhandledRejection.bind(t),t.onVisibilityStatusChanged=t.onVisibilityStatusChanged.bind(t),t.onPageHistoryChange=t.onPageHistoryChange.bind(t),t.log=t.log.bind(t),t.loggedErrors=[],t.tags=t.tags||{},t.plugins=t.plugins||[],t.windowWidth=t.window.innerWidth||r.documentElement.clientWidth||r.body.clientWidth,t.windowHeight=t.window.innerHeight||r.documentElement.clientHeight||r.body.clientHeight,t.logEntries=[{type:"navigate",description:t.window.location.href,timestamp:Date.now()}],t.isReplay()){var o=E?t.loggerVersion:t.version;t.player=new v.a({playbackScriptUrl:t.baseUrl+"rootcause-playback-engine.js",sinonScriptUrl:t.baseUrl+"deps/nise.js",replayAjaxInteraction:t.enableAjaxPlayback,applicationVersion:o,frameworkVersion:t.frameworkVersion})}else{if(!t.applicationId)throw new Error("applicationId is a required config option");t.captureArguments&&[].concat(t.captureArguments).forEach(function(e){h.a.tryCatchify(e)})}t.plugins.forEach(function(e,n){e.name&&(t.plugins[n]=new RC.plugin[e.name](e,t))}),t.cookieData=this.getDocument().cookie,t.captureScreenshot=t.captureScreenshot||t.enableScreenshot,t.captureScreenshot=t.captureScreenshot&&!!document.createElement("canvas").getContext,t.logUrl=t.baseUrl+"api/error/insert/",t.overrideUrl=t.baseUrl+"api/override/get/",t.autoStart&&t.start(),(t.showFeedbackButton||y.indexOf("__feedback")>0)&&this.createFeedbackButton(),this.init()}}var n,t;return n=e,(t=[{key:"init",value:function(){}},{key:"start",value:function(){var e=this,n=this.window.document;e.active||"function"!=typeof n.addEventListener||e.botRe.test(navigator.userAgent)||(e.active=!0,e.addErrorListeners(),e.isReplay()&&!E||(e.logConsoleOutput&&(!0===e.logConsoleOutput&&(e.logConsoleOutput=["debug","log","info","warn","error"]),e.wrapConsole()),e.enableArgumentsCapturing&&e.loadArgumentsCaptureTargets(),e.togglePageListeners(!0),e.pageStartHref=e.window.location.href,e.windowWidth=e.window.innerWidth||n.documentElement.clientWidth||n.body.clientWidth,e.windowHeight=e.window.innerHeight||n.documentElement.clientHeight||n.body.clientHeight,e.addTag("Logger Build",e.loggerVersion),e.recordUserActions&&RC.recorder&&RC.recorder.BaseRecorderRole&&e.initEventRecording(),e.resetOnHistoryChange&&e.window.addEventListener("popstate",e.onPageHistoryChange),e.onStart&&e.onStart(),e.showIconWhileRecording&&e.showRecordingIcon(),e.window.document.body&&e.window.document.body.onload&&e.window.document.body.onload.toString().match(/scope.provider/i)||e.logToConsole("RootCause: Error monitoring started")))}},{key:"stop",value:function(){var e=this;e.active&&(e.active=!1,e.annotation.stop(),e.annotation.clear(),e.removeErrorListeners(),e.unwrapConsole(),e.resetOnHistoryChange&&e.window.removeEventListener("popstate",e.onPageHistoryChange),e.togglePageListeners(!1),e.recorder&&e.recorder.stop(),e.onStop&&e.onStop(),e.hideRecordingIcon(),e.window.document.body&&e.window.document.body.onload&&e.window.document.body.onload.toString().match(/scope.provider/i)||e.logToConsole("RootCause: Error monitoring stopped"))}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"reset",value:function(){var e=this;e.recorder&&e.recorder.clear(),e.loggedErrors=[],e.logEntries=[],e.pageStartHref=e.window.location.href}},{key:"isReplay",value:function(){return w}},{key:"onError",value:function(e,n,t,r,o){if(!this.paused)if(this.debug)this.handleError.apply(this,arguments);else try{this.handleError.apply(this,arguments)}catch(e){this.logToConsole(e)}}},{key:"logException",value:function(e,n){this.onError(e.message,"",0,0,e,n)}},{key:"handleError",value:function(e,n,t,r,o,i){if(i=i||{},Object.prototype.toString.call(e).match("Event")){var s=e;if(e.target===this.window)o="string"==typeof s.error?s:s.error,e=s.message,n=s.filename,t=s.lineno,r=s.colno,i.isJsError=!0;else{if(!this.treatResourceLoadFailureAsError&&!this.logResourceLoadFailures)return;var a=s.target;if(a){if(this.addLogEntry({type:"resourceloadfail",url:a.href||a.src,tag:a.outerHTML}),!this.treatResourceLoadFailureAsError)return;o=s.error,e="Failed to load "+a.nodeName+", URL: "+(a.href||a.src),n=a.href||a.src,i.isResourceLoadError=!0}}}else n=n||"",t=t||0,r=r||0;(o=o||{}).message||(o.message=e);var l=u.a.processStack({errorObj:o,file:n,line:t,column:r});l.stackFrames&&l.stackFrames.length>0&&(l.stackFrames=l.stackFrames.filter(function(e){return e.url&&0!==e.url.indexOf("ng:///")}),n=n||l.stackFrames[0].url),this.isReplay()?window.parent.postMessage({type:"targetpageerror",message:l.msg,stackFrames:l.stackFrames},"*"):this.shouldLogError(l.msg,l.file)?(this.recorder&&this.recorder.flushRemainingActions(),this.loggedErrors.length+1==this.maxNbrOfReportedErrors&&this.stop(),Object.assign(l,i),this.collectCrashData(l,this.onDataCollected)):this.logToConsole(l.msg,o)}},{key:"shouldLogError",value:function(e,n){var t=this.loggedErrors.length<this.maxNbrOfReportedErrors,r=this.getLastError(),o=!r||r.msg!==e,i=this.ignoreUrlRe&&this.ignoreUrlRe.test(this.window.location.href),s=!e||this.ignoreErrorMessageRe&&this.ignoreErrorMessageRe.test(e),a=n&&this.ignoreFileRe&&this.ignoreFileRe.test(n);return(navigator.onLine||this.supportOffline)&&t&&o&&!i&&!a&&!s}},{key:"addErrorListeners",value:function(){var e=this;!e.window.addEventListener||"IE"===c.a.name&&"9.0"===c.a.version?(e.oldOnErrorFn=e.window.onerror,e.window.onerror=function(){return e.onError.apply(this,arguments),e.oldOnErrorFn&&e.oldOnErrorFn.apply(this,arguments)}):(e.window.addEventListener("error",e.onError,!0),e.window.addEventListener("unhandledrejection",e.onUnhandledRejection))}},{key:"removeErrorListeners",value:function(){var e=this;e.window.addEventListener?(e.window.removeEventListener("error",e.onError,!0),e.window.removeEventListener("unhandledrejection",e.onUnhandledRejection)):e.window.onerror=e.oldOnErrorFn}},{key:"onDataCollected",value:function(e){var n=this.showErrorDialog;if(n){var t=this,r={};"object"==o(n)&&Object.assign(r,n),Object.assign(r,{recordUserActions:this.recordUserActions,screenshotSrc:e.screenshot,email:this.user&&this.user.email,onSendClick:function(n,r){n.info&&(e.user=JSON.parse(JSON.stringify(e.user||{})),e.user.message=n.info),n.email&&(e.user=JSON.parse(JSON.stringify(e.user||{})),e.user.email=n.email),n.userActions||(e.userActions=void 0,e.mayHaveVideo=!1),n.screenshot||(e.screenshot=void 0),n.cookieData||(e.cookieData=void 0),t.log(e,r)}}),new f.a(r).show()}else this.log(e)}},{key:"log",value:function(e,n){var t=this;!navigator.onLine&&!t.supportOffline||t.isReplay()||t.onBeforeLog&&!1===t.onBeforeLog(e)?n&&n.call(t,!1):("siesta-recorder"!==e.applicationId&&(e.isFeedback||(t.loggedErrors.push(e),t.showNotificationOnError&&t.showProgressUI())),delete e.isFailedAjax,delete e.isResourceLoadError,delete e.isJsError,d.a.request(t.logUrl,e,"POST",function(r){var o=!0;try{var i=JSON.parse(r);i&&"success"in i&&(o=i.success)}catch(e){if(t.debug)throw e;o=!1}o?t.onLogCompleted(r,e):t.onLogFailed(r,e),n&&n.call(t,o,r)},function(r){t.onLogFailed(r,e),n&&n.call(t,!1,r)}),t.loggedErrors.length>=t.maxNbrOfReportedErrors&&t.stop())}},{key:"getLastError",value:function(){return this.loggedErrors[this.loggedErrors.length-1]}},{key:"logToConsole",value:function(){"console"in window&&console.log&&console.log.apply(console,arguments)}},{key:"getDocument",value:function(){return this.window.document}},{key:"showProgressUI",value:function(){m.a.show(this.loggingErrorText,{duration:1e8,backgroundColor:this.notificationBackgroundColor,textColor:this.notificationTextColor})}},{key:"onLogCompleted",value:function(e,n){if(this.showNotificationOnError&&!n.isFeedback){var t,r;try{r=JSON.parse(e)}catch(e){if(this.debug)throw e;this.logToConsole(e)}if(!r)return void m.a.hide();var o=r.hash,i=r.link;switch(r.status){case 0:case 2:t=this.newErrorText;break;case 1:t=this.fixedErrorText;break;case 3:t=this.reproducedErrorText}t&&m.a.show(t.replace(/{link}/g,i).replace(/{id}/g,o),{duration:this.notificationShowDuration,backgroundColor:this.notificationBackgroundColor,textColor:this.notificationTextColor})}try{this.onErrorLogged&&this.onErrorLogged(e,n)}catch(e){if(this.debug)throw e;this.logToConsole(e)}}},{key:"onLogFailed",value:function(e,n){n.isFeedback||m.a.hide();try{var t=JSON.parse(e);t.message&&window.console&&window.console.log&&console.log("RootCause: "+t.message)}catch(n){if(this.debug)throw n;window.console&&window.console.log&&console.log("RootCause log failed",n,e)}try{this.onErrorLogFailed&&this.onErrorLogFailed(e,n)}catch(e){if(this.debug)throw e;this.logToConsole(e)}}},{key:"initEventRecording",value:function(){var e=this,n=e.window.document,t=RC.recorder.ExtJSRecorder||RC.recorder.DomRecorder,o=e.recorderConfig||{};Object.assign(o,{window:e.window,dragPixelThreshold:1,skipIfNoModifierKeysPressed:!0,debugMode:e.debug,swallowExceptions:!e.debug,ignoreSynthetic:!e.debug,warnAboutIframeMissingId:!1}),(o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){s(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({recordMouseMovePath:!0,recordScroll:!0,recordOffsets:!0},o)).extractorConfig=o.extractorConfig||{},Object.assign(o.extractorConfig,{skipDomQuery:!0});var i=e.recorder=new t(o);"number"==typeof e.maxNbrOfRecordedUserActions&&i.on("actionadd",function(){this.actions.length>=e.maxNbrOfRecordedUserActions&&this.stop()}),n.body?i.start():n.addEventListener("DOMContentLoaded",function(e){i.start()}),e.logRecorderErrors&&i.on("exception",e.onRecorderError,e)}},{key:"onRecorderError",value:function(e,n){var t=this;if(t.logRecorderErrors){var r={customData:{event:{}}};n="string"==typeof n?{message:n}:n,t.recorder.un("exception",t.onRecorderError,t),t.logRecorderErrors=!1;var o=t.applicationId,i=t.recorder.processingEvent;for(var s in t.applicationId="siesta-recorder",window.Ext&&(r.customData.extVersions=Ext&&Ext.versions),i||{})"string"!=typeof i[s]&&"number"!=typeof i[s]||(r.customData.event[s]=i[s]);i.target.cloneNode&&(r.customData.event.targetOuterHTML=i.target&&i.target.cloneNode().outerHTML),t.logException(n,r),t.applicationId=o}}},{key:"collectCrashData",value:function(e,n){var t=this,r=t.window,o=(r.document,"siesta-recorder"===t.applicationId),i=(r.Ext,{windowHeight:t.windowHeight,windowWidth:t.windowWidth,cookieData:!o&&t.saveCookies&&t.cookieData||void 0,href:t.pageStartHref,applicationId:t.applicationId,browser:c.a.name,browserVersion:c.a.version,duration:Date.now()-t.logEntries[0].timestamp,host:r.location.host,language:navigator.language,logEntries:t.logEntries.length>0&&t.logEntries||void 0,os:c.a.os.family,osVersion:c.a.os.version,tags:t.tags,touch:l.a.supportsTouch,version:t.version,frameworkVersion:t.frameworkVersion,user:t.user,plugins:[].map.call(navigator.plugins||[],function(e){return{name:e.name,description:e.description||void 0,version:e.version||void 0}}),userAgent:navigator.userAgent,localDate:(new Date).toString(),errorHref:r.location.href,devicePixelRatio:r.devicePixelRatio,scrollbarWidth:p.a.measureScrollBarWidth(),environment:t.environment});t.data&&(i.customData=t.data),Object.assign(i,e);var s=t.recorder,a="siesta-recorder"===i.applicationId&&!location.href.match("bryntum.com");if(i.feedbackType&&(i.type="bug"===i.feedbackType?1:2),s&&!a){var u=s.getRecordedActionsAsSteps();if(u.length>0){var d=s.getInitialCursorPosition();i.initialCursorPosition=d?d.toString():null,i.nbrActions=u.length,i.userActions=u}else t.addTag("PageLoadError",!0)}if(/^script error/i.test(i.msg)){for(var h=document.querySelectorAll("script[src]:not([crossorigin]):not([crossOrigin])"),f=[],m=0;m<h.length;m++){var g=h[m].getAttribute("src");if(/^(\/\/|http)/.test(g)&&g.indexOf(location.protocol+"//"+location.host)<0&&(!t.ignoreFileRe||!t.ignoreFileRe.test(g))&&(f.push(g),f.length>5))break}i.customData=i.customData||{},f.length>0?i.customData["Script tags missing crossOrigin attr"]=f:i.customData["No script tags found without crossOrigin attribute"]="Probably error came from eval code, or browser plugin/extension."}n.call(t,i)}},{key:"sendFeedback",value:function(e){var n=this;if(n.isReplay())e.call(n);else{var t=this.feedbackButton.getName(),r=this.feedbackButton.getMessage(),o=this.feedbackButton.getType();this.collectCrashData({msg:r,isFeedback:!0,feedbackType:o},function(r){r.user=r.user||{name:t},n.log(r,e)})}}},{key:"isActive",value:function(){return this.active}},{key:"addTag",value:function(e,n){this.tags[e]=n}},{key:"removeTag",value:function(e){delete this.tags[e]}},{key:"clearTags",value:function(){this.tags={}}},{key:"addLogEntry",value:function(e){e&&!this.paused&&("string"==typeof e&&(e={type:"info",message:e}),e.timestamp=Date.now(),this.logEntries.push(e))}},{key:"wrapConsole",value:function(){var e=this;"console"in e.window&&e.logConsoleOutput instanceof e.window.Array&&e.logConsoleOutput.forEach(function(n){var t;"function"==typeof e.window.console[n]&&h.a.intercept(e.window.console,n,(t=n,function(){e.addLogEntry({type:"console",method:t,message:[].slice.apply(arguments).join(", ")})}),e)})}},{key:"unwrapConsole",value:function(){var e=this.window.console;e&&this.logConsoleOutput instanceof Array&&this.logConsoleOutput.forEach(function(n){h.a.removeInterceptor(e,n)})}},{key:"togglePageListeners",value:function(e){var n=this,t=n.window,r=n.getDocument(),o=e?"addEventListener":"removeEventListener";t[o]("online",n.onOnlineStatusChanged),t[o]("offline",n.onOnlineStatusChanged),r[o]("visibilitychange",n.onVisibilityStatusChanged)}},{key:"onUnhandledRejection",value:function(e){var n=e.reason&&e.reason.stack||void 0;this.addLogEntry({type:"unhandledrejection",message:"[PromiseRejectionEvent] "+e.reason,stack:n}),this.treatUnhandledPromiseRejectionAsError&&this.logException({message:"[PromiseRejectionEvent] "+e.reason,stack:n})}},{key:"onVisibilityStatusChanged",value:function(){this.addLogEntry({type:"visibility",hidden:this.getDocument().hidden})}},{key:"onOnlineStatusChanged",value:function(){this.addLogEntry({type:"connectivity",online:navigator.onLine})}},{key:"loadArgumentsCaptureTargets",value:function(){d.a.request(this.overrideUrl+"?applicationToken="+this.applicationId,null,"GET",this.onArgumentsCaptureTargetsLoaded)}},{key:"onArgumentsCaptureTargetsLoaded",value:function(e){try{e&&JSON.parse(e).forEach(function(e){h.a.tryCatchifySingle(e.target,e.methodName)})}catch(e){if(this.debug)throw e;this.logToConsole(e)}}},{key:"onPageHistoryChange",value:function(){this.reset()}},{key:"createFeedbackButton",value:function(){var e=this,n="object"===o(e.showFeedbackButton)?e.showFeedbackButton:{};n.userName=e.user&&e.user.name||"",n.send=e.sendFeedback.bind(e),e.feedbackButton=new g.a(n)}},{key:"destroyFeedbackButton",value:function(){this.feedbackButton&&this.feedbackButton.destroy(),this.feedbackButton=null}},{key:"showRecordingIcon",value:function(){if(document.body&&document.head)try{var e=this.iconNode=document.createElement("div");e.className="rc-recording-indicator",e.title=this.showIconWhileRecording.tooltip||"";var n=this.styleNode=document.createElement("style");n.innerHTML=this.iconCSS,e.addEventListener("click",this.stop.bind(this)),document.body.appendChild(e),document.head.appendChild(n)}catch(e){}else window.addEventListener("load",this.showRecordingIcon.bind(this))}},{key:"hideRecordingIcon",value:function(){this.iconNode&&(this.iconNode.parentNode.removeChild(this.iconNode),this.iconNode=null),this.styleNode&&(this.styleNode.parentNode.removeChild(this.styleNode),this.styleNode=null)}},{key:"startAnnotation",value:function(){this.annotation.start()}},{key:"stopAnnotation",value:function(){this.annotation.stop()}},{key:"clearAnnotation",value:function(){this.annotation.clear()}}])&&i(n.prototype,t),e}();n.a=C},function(e,n,t){"use strict";var r={duration:5e3,backgroundColor:"#0088d1",textColor:"#fff",maxWidth:250,show:function(e,n){var t=(n=n||{}).duration||this.duration;r.instance&&r.remove(),r.createStyle(n);var o=document.createElement("div");o.className="rc-toast",o.innerHTML=e,o.addEventListener("click",r.hide),document.body.appendChild(o),o.style.bottom="-"+o.offsetHeight+"px",r.instance=o,o.timeout=setTimeout(r.hide,t),o.className="rc-toast rc-toast-show"},hide:function(){var e=r.instance;e&&(e.className="rc-toast",clearTimeout(e.timeout),e.removeEventListener("click",r.hide),setTimeout(function(){r.remove()},300))},remove:function(){r.instance&&(r.instance.parentNode.removeChild(r.instance),r.style.parentNode.removeChild(r.style),r.instance=null)},createStyle:function(e){var n=document.createElement("style"),t=e.backgroundColor||this.backgroundColor,o=e.textColor||this.textColor;n.innerHTML="\n            .rc-toast {\n                max-width: ".concat(this.maxWidth,"px;\n                overflow:hidden;\n                box-shadow: 1px 1px 8px #aaa;\n                background-color: ").concat(t,";\n                color: ").concat(o,";\n                position: fixed;\n                transition: all 0.3s ease;\n                right: 10px;\n                padding: 20px;\n                font-family: sans-serif;\n                visibility: hidden;\n                bottom: -100%;\n                border-radius: 2px;\n            }\n            .rc-toast.rc-toast-show {\n                bottom: 10px !important;\n                visibility: visible;\n                z-index:1000000;\n            }\n            .rc-toast a { color: inherit; }\n         "),r.style=document.head.appendChild(n)}};n.a=r},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"c",function(){return a}),t.d(n,"a",function(){return u}),t.d(n,"b",function(){return d});var a,l=t(0);!function(e){e[e.setBaseUrl=0]="setBaseUrl",e[e.applyDomSnapshot=1]="applyDomSnapshot",e[e.applyPointerPosition=2]="applyPointerPosition",e[e.applyPointerState=3]="applyPointerState",e[e.applyElementValueChange=4]="applyElementValueChange",e[e.applyElementCheckedChange=5]="applyElementCheckedChange",e[e.applyWindowResize=6]="applyWindowResize",e[e.applyDomScroll=7]="applyDomScroll",e[e.applyDomMutation=8]="applyDomMutation"}(a||(a={}));var c={altGlyph:0,altGlyphDef:0,altGlyphItem:0,animate:0,animateColor:0,animateMotion:0,animateTransform:0,animation:0,circle:0,clipPath:0,"color-profile":0,cursor:0,defs:0,desc:0,discard:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feDropShadow:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,"font-face":0,"font-face-format":0,"font-face-name":0,"font-face-src":0,"font-face-uri":0,foreignObject:0,g:0,glyph:0,glyphRef:0,handler:0,hatch:0,hatchpath:0,hkern:0,image:0,line:0,linearGradient:0,listener:0,marker:0,mask:0,mesh:0,meshgradient:0,meshpatch:0,meshrow:0,metadata:0,"missing-glyph":0,mpath:0,path:0,pattern:0,polygon:0,polyline:0,prefetch:0,radialGradient:0,rect:0,set:0,solidColor:0,solidcolor:0,stop:0,svg:0,switch:0,symbol:0,tbreak:0,text:0,textPath:0,title:0,tref:0,tspan:0,unknown:0,use:0,view:0,vkern:0},u=function(){function e(n,t){r(this,e),this.root=n,this.delegate=t,s(this,"idMap",void 0),s(this,"actualPointerPosition",void 0),this.idMap={},this.actualPointerPosition=[0,0]}return i(e,[{key:"setBaseUrl",value:function(e){var n=this.delegate;n&&n.setBaseUrl&&n.setBaseUrl(e)}},{key:"applyPointerState",value:function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!1)}},{key:"unApplyPointerState",value:function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!0)}},{key:"applyPointerPosition",value:function(e){this.actualPointerPosition[0]+=e[0],this.actualPointerPosition[1]+=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)}},{key:"unApplyPointerPosition",value:function(e){this.actualPointerPosition[0]-=e[0],this.actualPointerPosition[1]-=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)}},{key:"applyWindowResize",value:function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.size)}},{key:"unApplyWindowResize",value:function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.oldSize)}},{key:"applyElementCheckedChange",value:function(e){this.deserializeNode(e).checked=e.checked}},{key:"unApplyElementCheckedChange",value:function(e){this.deserializeNode(e).checked=e.oldChecked}},{key:"applyElementValueChange",value:function(e){var n=this.deserializeNode(e);"file"===n.type&&""!==e.value||(n.value=e.value)}},{key:"unApplyElementValueChange",value:function(e){var n=this.deserializeNode(e);"file"===n.type&&""!==e.oldValue||(n.value=e.oldValue)}},{key:"applyDomSnapshot",value:function(e,n,t){this.idMap[e]=this.root;for(var r=0;r<n.length;r++)this.deserializeNode(n[r],this.root);this.applyWindowResize({size:t})}},{key:"getPageScrollingElement",value:function(){var e=this.getDocument();return e.scrollingElement||e.documentElement}},{key:"applyDomScroll",value:function(e){var n=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);n.scrollLeft=e.scrollPosition[0],n.scrollTop=e.scrollPosition[1]}},{key:"unApplyDomScroll",value:function(e){var n=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);n.scrollLeft=e.oldScrollPosition[0],n.scrollTop=e.oldScrollPosition[1]}},{key:"applyDomMutation",value:function(e,n,t,r){var o=this,i=this;e.forEach(function(e){e.previousSibling&&e.previousSibling.nodeType&&i.deserializeNode(e.previousSibling)}),n.forEach(function(e){var n=o.deserializeNode(e);o.deserializeNode(e.parentNode),o.deserializeNode(e.previousSibling),n.parentNode&&n.parentNode.removeChild(n)}),e.forEach(function(e){var n=o.deserializeNode(e);n.parentNode&&n.parentNode.removeChild(n)}),n.forEach(function(e){var n=o.deserializeNode(e),t=o.deserializeNode(e.parentNode),r=o.deserializeNode(e.previousSibling);t.insertBefore(n,r?r.nextSibling:t.firstChild)}),t.forEach(function(e){var n=o.deserializeNode(e);Object.keys(e.attributes).forEach(function(t){var r=e.attributes[t];null===r?n.removeAttribute(t):o.delegate&&o.delegate.setAttribute&&o.delegate.setAttribute(n,t,r)||n.setAttribute(t,r)})}),r.forEach(function(e){o.deserializeNode(e).textContent=e.textContent})}},{key:"unApplyDomMutation",value:function(e,n,t,r){var o=this;r.forEach(function(e){o.deserializeNode(e).textContent=e.oldTextContent}),t.forEach(function(e){var n=o.deserializeNode(e);Object.keys(e.oldValues).forEach(function(t){var r=e.oldValues[t];null===r?n.removeAttribute(t):o.delegate&&o.delegate.setAttribute&&o.delegate.setAttribute(n,t,r)||n.setAttribute(t,r)})}),n.forEach(function(e){var n=o.deserializeNode(e);e.oldParentNode&&o.deserializeNode(e.oldParentNode),e.oldPreviousSibling&&o.deserializeNode(e.oldPreviousSibling),n.parentNode&&n.parentNode.removeChild(n)}),n.forEach(function(e){var n=o.deserializeNode(e);if(e.oldParentNode){var t=o.deserializeNode(e.oldParentNode),r=o.deserializeNode(e.oldPreviousSibling);t.insertBefore(n,r?r.nextSibling:t.firstChild)}}),e.forEach(function(e){var n=o.deserializeNode(e),t=o.deserializeNode(e.oldParentNode),r=o.deserializeNode(e.oldPreviousSibling);t.insertBefore(n,r?r.nextSibling:t.firstChild)})}},{key:"getDocument",value:function(){var e=this.root.ownerDocument;return null===e&&(e=this.root),e}},{key:"deserializeNode",value:function(e,n){var t=this;if(null===e)return null;var r=this.idMap[e.id];if(r)return r;var o=this.getDocument();switch(e.nodeType){case Node.COMMENT_NODE:r=o.createComment(e.textContent);break;case Node.TEXT_NODE:r=o.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:r=o.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:var i=e.tagName.toLowerCase()in c;this.delegate&&this.delegate.createElement&&(r=this.delegate.createElement(e.tagName)),r||(r=i?o.createElementNS("http://www.w3.org/2000/svg",e.tagName):o.createElement(e.tagName)),Object.keys(e.attributes).forEach(function(n){if(!t.delegate||!t.delegate.setAttribute||!t.delegate.setAttribute(r,n,e.attributes[n]))try{r.setAttribute(n,e.attributes[n])}catch(e){console.error(e)}})}if(!r)throw new Error("deserializeNode failed");if(this.idMap[e.id]=r,e.childNodes)for(var s=0;s<e.childNodes.length;s++)this.deserializeNode(e.childNodes[s],r);var a=e.scrollPosition;if(a){var l=r;l.scrollLeft=a[0],l.scrollTop=a[1]}var u=e.value;null!=u&&(r.value=u);var d=e.checked;return null!=d&&(r.checked=d),n&&n.appendChild(r),r}},{key:"playSingleFrame",value:function(e){var n=a[e[0]],t=e.slice(2);return this[n].apply(this,t),!0}},{key:"unPlaySingleFrame",value:function(e){var n=a[e[0]],t=e.slice(2);if(n="applyDomMutation"==n?"unApplyDomMutation":"applyDomScroll"==n?"unApplyDomScroll":"applyWindowResize"==n?"unApplyWindowResize":"applyElementValueChange"==n?"unApplyElementValueChange":"applyElementCheckedChange"==n?"unApplyElementCheckedChange":"applyPointerPosition"==n?"unApplyPointerPosition":"applyPointerState"==n?"unApplyPointerState":null)return this[n].apply(this,t),!0}},{key:"playFrames",value:function(e){e.map(this.playSingleFrame.bind(this))}},{key:"clearDocument",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild);this.idMap={},this.actualPointerPosition=[0,0]}}]),e}(),d=function(){function e(n,t,o){var i=this;r(this,e),this.target=n,this.mirror=t,s(this,"nextId",void 0),s(this,"mutationSummary",void 0),s(this,"startedAt",void 0),s(this,"knownNodes",void 0),s(this,"actualScrollPositions",void 0),s(this,"actualValues",void 0),s(this,"actualChecked",void 0),s(this,"actualWindowSize",void 0),s(this,"actualPointerPosition",void 0),s(this,"domScrollListener",void 0),s(this,"domInputListener",void 0),s(this,"domChangeListener",void 0),s(this,"windowResizeListener",void 0),s(this,"propertyChangeCheckerHandler",void 0),s(this,"propertyChangeCheckerInterval",500),s(this,"supportsPointerEvents",void 0),s(this,"eventsMap",void 0),s(this,"pointerPositionEventsListener",void 0),s(this,"pointerStateEventsListener",void 0),this.nextId=1,this.knownNodes=new l.a.NodeMap,this.actualScrollPositions=new l.a.NodeMap,this.actualValues=new l.a.NodeMap,this.actualChecked=new l.a.NodeMap,this.actualPointerPosition=[0,0],this.target=n;var a=this.getWindow(),c=(this.getDocument(),Boolean(a.PointerEvent)),u=Boolean(a.MSPointerEvent);this.eventsMap=c?{down:"pointerdown",up:"pointerup",move:"pointermove",over:"pointerover",out:"pointerout"}:u?{down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove",over:"MSPointerOver",out:"MSPointerOut"}:{down:"mousedown",up:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout"},this.supportsPointerEvents=c||u,this.startedAt=Date.now(),this.mirror.onVideoFrameAvailable(this.annotateFrame("setBaseUrl",[(t.baseUrl||this.getWindow().location.href).match(/^(.*\/)[^\/]*$/)[1]])),this.connect(),this.overridePropertySetter(HTMLInputElement.prototype,"value"),this.overridePropertySetter(HTMLInputElement.prototype,"checked"),this.overridePropertySetter(HTMLSelectElement.prototype,"value"),this.overridePropertySetter(HTMLOptionElement.prototype,"value"),this.overridePropertySetter(HTMLTextAreaElement.prototype,"value");var d=[{all:!0}];o&&(d=d.concat(o)),this.mutationSummary=new l.a({oldPreviousSibling:!0,rootNode:n,callback:function(e){i.onDomMutation(e)},queries:d})}return i(e,[{key:"overridePropertySetter",value:function(e,n){var t=this,r=Object.getOwnPropertyDescriptor(e,n),o=r.set;r.set=function(e){o.apply(this,arguments),t.isConnected()&&t.onInputPropertyChange(this)},Object.defineProperty(e,n,r)}},{key:"connect",value:function(){if(!this.isConnected()){var e=this.getWindow(),n=this.getDocument();this.mutationSummary&&this.mutationSummary.reconnect(),this.doDomSnapshot(this.target),n.addEventListener("scroll",this.domScrollListener=this.onDomScroll.bind(this),!0),n.addEventListener("input",this.domInputListener=this.onDomInput.bind(this),!0),n.addEventListener("change",this.domChangeListener=this.onDomInput.bind(this),!0),e.addEventListener("resize",this.windowResizeListener=this.onWindowResize.bind(this),!0),this.startTrackingPointer()}}},{key:"disconnect",value:function(){if(this.isConnected()){this.flushPendingMutations(),this.mutationSummary.disconnect();var e=this.getWindow(),n=this.getDocument();n.removeEventListener("scroll",this.domScrollListener,!0),n.removeEventListener("input",this.domInputListener,!0),n.removeEventListener("change",this.domChangeListener,!0),e.removeEventListener("resize",this.windowResizeListener,!0),this.stopTrackingPointer()}}},{key:"isConnected",value:function(){return this.mutationSummary&&this.mutationSummary.connected}},{key:"getNormalizedEventName",value:function(e){var n=this.eventsMap;for(var t in n)if(n[t]==e)return t;return e}},{key:"forEachPointerPositionEvent",value:function(e){var n=this,t=this.getDocument(),r=this.eventsMap;["move","over","out"].forEach(function(o){e.call(n,r[o]||o,t)})}},{key:"forEachPointerStateEvent",value:function(e){var n=this,t=this.getDocument(),r=this.eventsMap;["down","up","click","contextmenu"].forEach(function(o){e.call(n,r[o]||o,t)})}},{key:"startTrackingPointer",value:function(){var e=this;this.pointerPositionEventsListener=this.createThrottled(this.onPointerMoveEvent,this,100),this.forEachPointerPositionEvent(function(n,t){t.addEventListener(n,e.pointerPositionEventsListener,!0)}),this.pointerStateEventsListener=this.onPointerStateEvent.bind(this),this.forEachPointerStateEvent(function(n,t){t.addEventListener(n,e.pointerStateEventsListener,!0)})}},{key:"stopTrackingPointer",value:function(){var e=this;this.forEachPointerPositionEvent(function(n,t){t.removeEventListener(n,e.pointerPositionEventsListener,!0)}),this.forEachPointerStateEvent(function(n,t){t.removeEventListener(n,e.pointerStateEventsListener,!0)})}},{key:"onInputPropertyChange",value:function(e){var n=!1,t=(e.getAttribute("type")||"").toLowerCase();if("checkbox"==t||"radio"==t){var r=this.actualChecked.get(e);null!=r&&r==e.checked||(n||(this.flushPendingMutations(),n=!0),this.handleElementCheckedChange(e))}else{var o=this.actualValues.get(e);null!=o&&o==e.value||(n||(this.flushPendingMutations(),n=!0),this.handleElementValueChange(e))}}},{key:"doDomSnapshot",value:function(e){for(var n=this.serializeNode(e).id,t=[],r=e.firstChild;r;r=r.nextSibling)t.push(this.serializeNode(r,!0));this.actualWindowSize=this.getWindowSize(),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomSnapshot",[n,t,this.actualWindowSize]))}},{key:"getWindowSize",value:function(){var e=this.getWindow(),n=e.document;return{width:e.innerWidth||n.documentElement.clientWidth||n.body.clientWidth,height:e.innerHeight||n.documentElement.clientHeight||n.body.clientHeight}}},{key:"getDocument",value:function(){var e=this.target.ownerDocument;return null===e&&(e=this.target),e}},{key:"getWindow",value:function(){return this.getDocument().defaultView}},{key:"annotateFrame",value:function(e,n){var t=[a[e],Date.now()-this.startedAt];return t.push.apply(t,n),t}},{key:"onPointerMoveEvent",value:function(e){var n=e.clientX-this.actualPointerPosition[0],t=e.clientY-this.actualPointerPosition[1];0==n&&0==t||(this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerPosition",[[n,t]])),this.actualPointerPosition[0]=e.clientX,this.actualPointerPosition[1]=e.clientY)}},{key:"onPointerStateEvent",value:function(e){this.onPointerMoveEvent(e),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerState",[this.getNormalizedEventName(e.type),this.getSimplifiedSelector(e.target)]))}},{key:"flushPendingMutations",value:function(){var e=this.mutationSummary.takeSummaries();e&&this.onDomMutation(e)}},{key:"onDomInput",value:function(e){this.flushPendingMutations(),this.handleElementValueChange(e.target)}},{key:"handleElementValueChange",value:function(e){var n=this.serializeNode(e),t=e.value,r=this.actualValues.get(e);n.value=t,n.oldValue=null!=r?r:"",this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementValueChange",[n,this.getSimplifiedSelector(e)])),this.actualValues.set(e,t)}},{key:"handleElementCheckedChange",value:function(e){var n=this.serializeNode(e),t=e.checked,r=this.actualChecked.get(e);n.checked=t,n.oldChecked=null!=r&&r,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementCheckedChange",[n])),this.actualChecked.set(e,t)}},{key:"onWindowResize",value:function(e){this.flushPendingMutations();var n=this.getWindowSize();this.mirror.onVideoFrameAvailable(this.annotateFrame("applyWindowResize",[{size:n,oldSize:this.actualWindowSize}])),this.actualWindowSize=n}},{key:"onDomScroll",value:function(e){this.flushPendingMutations();var n,t=this.getDocument(),r=e.target,o=!1;r==t?(o=!0,n=t.scrollingElement?t.scrollingElement:t.documentElement):n=r;var i=this.serializeNode(n),s=this.actualScrollPositions.get(n);i.scrollPosition=[n.scrollLeft,n.scrollTop],i.oldScrollPosition=s||[0,0],i.isPageScroll=o,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomScroll",[i])),this.actualScrollPositions.set(n,i.scrollPosition)}},{key:"rememberNode",value:function(e){var n=this.nextId++;return this.knownNodes.set(e,n),n}},{key:"forgetNode",value:function(e){this.knownNodes.delete(e),this.actualValues.delete(e),this.actualChecked.delete(e),this.actualScrollPositions.delete(e)}},{key:"serializeNode",value:function(e,n){if(null===e)return null;var t=this.knownNodes.get(e);if(void 0!==t)return{id:t};var r={id:this.rememberNode(e),nodeType:e.nodeType};switch(r.nodeType){case Node.DOCUMENT_TYPE_NODE:var o=e;r.name=o.name,r.publicId=o.publicId,r.systemId=o.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:r.textContent=e.textContent;break;case Node.ELEMENT_NODE:var i=e;r.tagName=i.tagName,r.attributes={},0==i.scrollLeft&&0==i.scrollTop||(r.scrollPosition=[i.scrollLeft,i.scrollTop],this.actualScrollPositions.set(e,r.scrollPosition));var s=i.value;null!=s&&(r.value=String(s),this.actualValues.set(e,r.value));var a=i.checked;null!=a&&(r.checked=a,this.actualChecked.set(e,a));for(var l=0;l<i.attributes.length;l++){var c=i.attributes[l];r.attributes[c.name]=c.value}if(n&&i.childNodes.length){r.childNodes=[];for(var u=i.firstChild;u;u=u.nextSibling)r.childNodes.push(this.serializeNode(u,!0))}}return r}},{key:"serializeNodeWithPositionData",value:function(e,n,t){var r=this.serializeNode(e);return r.previousSibling=this.serializeNode(e.previousSibling),t&&(r.oldPreviousSibling=this.serializeNode(n.getOldPreviousSibling(e))),r.parentNode=this.serializeNode(e.parentNode),t&&(r.oldParentNode=this.serializeNode(n.getOldParentNode(e))),r}},{key:"serializeAddedAndMoved",value:function(e){var n=this,t=e.added,r=e.reparented,o=e.reordered,i=new l.a.NodeMap;t.forEach(function(e){return i.set(e,!0)});var s=t.concat(r).concat(o),a=new l.a.NodeMap;s.forEach(function(e){var n=e.parentNode,t=a.get(n);t||(t=new l.a.NodeMap,a.set(n,t)),t.set(e,!0)});var c=[];return a.keys().forEach(function(t){for(var r=a.get(t),o=r.keys();o.length;){for(var s=o[0];s.previousSibling&&r.has(s.previousSibling);)s=s.previousSibling;for(;s&&r.has(s);){var l=n.serializeNodeWithPositionData(s,e,!i.has(s));c.push(l),r.delete(s),s=s.nextSibling}o=r.keys()}}),c}},{key:"serializeAttributeChanges",value:function(e){var n=this,t=e.attributeChanged,r=new l.a.NodeMap;return Object.keys(t).forEach(function(o){t[o].forEach(function(t){var i=r.get(t);i||((i=n.serializeNode(t)).attributes={},i.oldValues={},r.set(t,i)),i.attributes[o]=t.getAttribute(o),i.oldValues[o]=e.getOldAttribute(t,o)})}),r.keys().map(function(e){return r.get(e)})}},{key:"onDomMutation",value:function(e){var n=this,t=e[0],r=t.removed.map(function(e){return n.serializeNodeWithPositionData(e,t,!0)}),o=this.serializeAddedAndMoved(t),i=this.serializeAttributeChanges(t),s=t.characterDataChanged.map(function(e){var r=n.serializeNode(e);return r.textContent=e.textContent,r.oldTextContent=t.getOldCharacterData(e),r});this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomMutation",[r,o,i,s])),t.removed.forEach(function(e){n.forgetNode(e)})}},{key:"getSimplifiedSelector",value:function(e){for(var n=[],t=e;t&&t!=this.target;t=t.parentNode){if(e.getAttribute("id")){n.push("#"+e.getAttribute("id"));break}var r=String(t.className||"").split(" ");1!=r.length||r[0]||(r.length=0),r.length=Math.min(r.length,3);var o=String(t.tagName||"NOTAG").toUpperCase();n.unshift(o+(r.length?"."+r.join("."):""))}return n.join(" > ")}},{key:"createThrottled",value:function(e,n,t){var r,o,i=-1/0;return function(){r=arguments;var s=Date.now(),a=s-i;a>=t?(i=s,e.apply(n,r),o&&clearTimeout(o),o=null):o||(o=setTimeout(function(){o=null,i=Date.now(),e.apply(n,r)},t-a))}}}]),e}()},function(e,n,t){"use strict";var r={measureScrollBarWidth:function(){if(!document.body)return 0;var e=document.createElement("div");e.style.cssText="width: 100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),n}};n.a=r},function(e,n,t){var r=t(9);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n,t){"use strict";t(82);var r=window.TraceKit.noConflict();delete window.TraceKit;var o={TraceKit:r,stackDepth:4,errorMsgStripRe:/^((?:.*error:\s*)|uncaught\s+)/i,functionCapRe:/\.([^\./]*)$/i,extractMessage:function(e){var n=e&&e.match(this.errorMsgStripRe);return n&&e.substr(n[0].length)||e},extractFunctionName:function(e){var n=e&&e.match(this.functionCapRe),t=n?n[1].split(" ")[0]:e;return"Anonymous function"===t&&(t="?"),t},extractFile:function(e){return e&&e.split("?")[0]},processStack:function(e){var n,t=e.errorObj,o=e.file,i=e.line,s=e.column,a={stack:(t=t||{}).trueStack||t.stack,name:t.name,message:t.message},l=r.computeStackTrace(a),c=t.message,u=t.functionSource||void 0,d=t.sourceMethod||t.functionName||void 0,h=t.args||void 0,p=t.thisObj||void 0,f=[i],m=[d];if("failed"!==l.mode&&!l.incomplete&&(n=this.cleanStack(d,l.stack,t.wrapperFunctionName),c=l.message,n.length)){var g=n[0];o=t.functionName?g.url:o||g.url,i=t.functionName?g.line:i||g.line,s=t.functionName?g.column:s||g.column,u=g.context?g.context.join("\n"):u,d=this.extractFunctionName(g.func);var v=Math.min(this.stackDepth,n.length);f=[],m=[];for(var y=0;y<v;y++)f.push(n[y].line),m.push(this.extractFunctionName(n[y].func))}return{msg:this.extractMessage(c),file:this.extractFile(o),line:i,lines:f.join(","),functionNames:m.join(","),column:s,functionSource:u,functionName:d,stack:t.trueStack||t.stack||void 0,stackFrames:n,args:h,thisObj:p}},cleanStack:function(e,n,t){var r;if(n=n||[],e){for(r=0;r<n.length&&e!==this.extractFunctionName(n[r].func);r++);r<n.length&&(n=n.slice(r))}if(t){var o;for(r=0;r<n.length&&!o;r++){var i=this.extractFunctionName(n[r].func);i&&i.match(t)&&(o=!0)}o&&n.splice(r-1,1)}return n}};n.a=o},function(e,n,t){"use strict";var r=t(21),o={request:function(e,n,t,o,i){var s=new XMLHttpRequest,a=n?r.a.stringify(n):"";return o&&s.addEventListener("load",function(){this.status>=400?i&&i.call(null,this.responseText):o&&o.call(null,this.responseText)}),i&&s.addEventListener("error",function(){i.call(null,this.responseText)}),s.open(t,e,!0),"POST"===t&&s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.send(a),s}};n.a=o},function(e,n,t){"use strict";var r={uriKeys:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],queryKey:"query",uriParseRexp:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,queryParseRexp:/(?:^|&)([^&=]*)=?([^&]*)/g,parse:function(e){var n,t,o,i=r.uriParseRexp,s=r.queryParseRexp,a=r.uriKeys,l=r.queryKey;return n=i.exec(e),t=a.reduce(function(e,t,r){return e[t]=n[r]||"",e},{}),o={},t[l].replace(s,function(e,n,t){n&&(o[n]=t)}),t[l]=o,t}};n.a=r},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,n,t){"use strict";function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var o in t)r(t,o)&&(e[o]=t[o])}}return e},n.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var i={arraySet:function(e,n,t,r,o){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),o);else for(var i=0;i<r;i++)e[o+i]=n[t+i]},flattenChunks:function(e){var n,t,r,o,i,s;for(r=0,n=0,t=e.length;n<t;n++)r+=e[n].length;for(s=new Uint8Array(r),o=0,n=0,t=e.length;n<t;n++)i=e[n],s.set(i,o),o+=i.length;return s}},s={arraySet:function(e,n,t,r,o){for(var i=0;i<r;i++)e[o+i]=n[t+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(o)},function(e,n,t){"use strict";n.a={mixin:function(e,n){if(!e||!n)throw"to/from are required";for(var t in n)n.hasOwnProperty(t)&&function(n,t,r){if("function"==typeof t&&"function"==typeof r)e[n]=function(){var e=this.SUPER;this.SUPER=r;var n=t.apply(this,arguments);return this.SUPER=e,n};else{if(n in e)throw new("Mixin conflict: "+n+" property found in target object");e[n]=t}}(t,n[t],e[t]);return e}}},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){var r=t(8),o=t(39),i=t(34);e.exports=r?function(e,n,t){return o.f(e,n,i(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var i=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"highlightColor","rgba(255,0,0,0.5)"),o(this,"onMouseDown",function(e){t.ignoreEl&&(t.ignoreEl===e.target||t.ignoreEl.contains(e.target))||(t.subscribeMouseMoveAndMouseUp(),t.selectorEl&&t.selectorEl.parentElement.removeChild(t.selectorEl),e.stopPropagation(),e.preventDefault(),t.startX=e.pageX,t.startY=e.pageY,t.selectorEl=document.createElement("div"),t.selectorEl.className="rc-feedback-selection",document.body.appendChild(t.selectorEl),t.afterMouseDown&&t.afterMouseDown())}),o(this,"onTouchStart",function(e){e.preventDefault()}),o(this,"onTouchMove",function(e){if(e.touches&&1===e.touches.length){e.preventDefault(),e.stopPropagation();var n=e.touches[0],r=Math.min(n.pageX,t.startX),o=Math.min(n.pageY,t.startY),i=Math.abs(n.pageX-t.startX),s=Math.abs(n.pageY-t.startY);t.setSelectionBox({left:r,top:o,width:i,height:s})}}),o(this,"onMouseMove",function(e){var n=Math.min(e.pageX,t.startX),r=Math.min(e.pageY,t.startY),o=Math.abs(e.pageX-t.startX),i=Math.abs(e.pageY-t.startY);e.preventDefault(),t.setSelectionBox({left:n,top:r,width:o,height:i})}),o(this,"onMouseUp",function(e){e.stopPropagation(),e.preventDefault(),t.unsubscribeMouseMoveAndMouseUp(),t.afterMouseUp&&t.afterMouseUp()}),Object.assign(this,n)}var n,t;return n=e,(t=[{key:"subscribeMouseDown",value:function(){this.subscribedMouseDown||(this.subscribedMouseDown=!0,this.mouseEventType=window.MSPointerEvent?"mspointer":window.PointerEvent?"pointer":"mouse",document.addEventListener("mspointer"==this.mouseEventType?"MSPointerDown":this.mouseEventType+"down",this.onMouseDown),document.addEventListener("touchstart",this.onMouseDown))}},{key:"subscribeMouseMoveAndMouseUp",value:function(){this.subscribedMouseMoveAndMouseUp||(this.subscribedMouseMoveAndMouseUp=!0,document.addEventListener("mspointer"==this.mouseEventType?"MSPointerMove":this.mouseEventType+"move",this.onMouseMove,!0),document.addEventListener("touchmove",this.onTouchMove,!0),document.addEventListener("touchstart",this.onTouchStart,!0),document.addEventListener("mspointer"==this.mouseEventType?"MSPointerUp":this.mouseEventType+"up",this.onMouseUp,!0),document.addEventListener("touchend",this.onMouseUp,!0))}},{key:"unsubscribeMouseDown",value:function(){this.subscribedMouseDown=!1,document.removeEventListener("mspointer"==this.mouseEventType?"MSPointerDown":this.mouseEventType+"down",this.onMouseDown),document.removeEventListener("touchstart",this.onMouseDown)}},{key:"unsubscribeMouseMoveAndMouseUp",value:function(){this.subscribedMouseMoveAndMouseUp=!1,document.removeEventListener("mspointer"==this.mouseEventType?"MSPointerMove":this.mouseEventType+"move",this.onMouseMove,!0),document.removeEventListener("mspointer"==this.mouseEventType?"MSPointerUp":this.mouseEventType+"up",this.onMouseUp,!0),document.removeEventListener("touchend",this.onMouseUp,!0),document.removeEventListener("touchstart",this.onTouchStart,!0),document.removeEventListener("touchmove",this.onTouchMove,!0)}},{key:"start",value:function(){this.subscribeMouseDown()}},{key:"stop",value:function(){this.unsubscribeMouseDown(),this.unsubscribeMouseMoveAndMouseUp()}},{key:"clear",value:function(){this.selectorEl&&(this.selectorEl.parentElement.removeChild(this.selectorEl),this.selectorEl=null)}},{key:"setSelectionBox",value:function(e){var n=e.left,t=e.top,r=e.width,o=e.height;this.selectorEl.style.cssText="position:absolute;border:2px solid "+this.highlightColor+";border-radius: 3px;z-index:20000001;left:"+n+"px;top:"+t+"px;width:"+r+"px;height:"+o+"px"}},{key:"destroy",value:function(){this.stop(),this.clear()}}])&&r(n.prototype,t),e}();n.a=i},function(e,n,t){"use strict";n.a={supportsTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0}},function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={MAX_NBR_PROPERTIES:10,isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},stringify:function(e,n){return e.thisObj&&(e.thisObj=o.processObject(e.thisObj)),e.args&&(e.args=o.processObject(e.args)),JSON.stringify(e,function(e,n){return o.jsonEscape(n)})},processObject:function(e,n){var t;if(o.isArray(e)){if(n)return String(e);var i=[];for(t=0;t<e.length;t++)i[t]=o.processObject(e[t],!0);return i}if("function"==typeof e)return"function ()";if("object"!==r(e)||null==e)return e;t=0;var s={};for(var a in e)e.hasOwnProperty(a)&&t<o.MAX_NBR_PROPERTIES&&(s[a]=o.jsonReplacer(a,e[a]),t++);return s},jsonReplacer:function(e,n){return"function"==typeof n?"function ()":n instanceof HTMLElement?o.HTMLElement(n):"thisObj"===e?n:e&&n&&!o.isArray(n)&&"object"===r(n)?n.toString():n},jsonEscape:function(e){return e},HTMLElement:function(e){for(var n={},t=e.attributes,r=0;r<t.length;r++)n[t[r]]=e.getAttribute(t[r]);return n}};n.a=o},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var i=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"el",null),o(this,"styleEl",null),o(this,"screenshotSrc",null),o(this,"email",null),o(this,"recordUserActions",null),o(this,"showEmailField",!0),o(this,"textColor","#666"),o(this,"backgroundColor","#eee"),o(this,"foregroundColor","#fff"),o(this,"buttonColor","#0088d1"),o(this,"buttonHoverColor","#00689c"),o(this,"buttonTextColor","#fff"),o(this,"maskColor","rgba(0,0,0,0.4)"),o(this,"titleText","Submit Error Report"),o(this,"introText","An error has occurred in the application, please submit this report to help us diagnose and fix the issue"),o(this,"infoFieldPlaceholderText","Any additional information..."),o(this,"emailFieldPlaceholderText","Email (optional)"),o(this,"screenshotFieldLabel","Include screenshot"),o(this,"stepsFieldLabel","Steps To Reproduce"),o(this,"systemInfoFieldLabel","System information"),o(this,"cookiesFieldLabel","Cookies"),o(this,"footerText","By submitting this form you agree that the provider of this website may use this information to improve this website."),o(this,"cancelButtonText","Cancel"),o(this,"sendButtonText","Send"),o(this,"outerCss","\n        .rc-confirmation-iframe { \n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          z-index: 20000003 !important; \n          border: 0;\n        }"),o(this,"innerCss",'\n        html {\n            height: 100%;\n        }\n        \n        body {\n            color: ${textColor};\n            background-color: transparent;\n            height: calc(100% - 40px);\n            margin: 20px;\n            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n            font-weight: 300;\n            transition: background-color 0.5s ease;\n        }\n        \n        body.animate {\n            background-color: ${maskColor};\n        }\n        \n        body.out {\n            background-color: transparent;\n        }\n        \n        .rc-confirmation {\n            position: fixed;\n            top: 150%;\n            left: 50%;\n            transform: translateX(-50%) translateY(-50%);\n            width: 450px; \n            height: 500px;\n            max-height: 90%;\n            min-height: 410px;\n            max-width: 90%;\n            min-width: 390px;\n            box-sizing: border-box;\n            border-radius: 3px;\n            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;\n            background-color: ${backgroundColor};\n            transition: top 0.2s ease;\n        }\n        \n        .animate .rc-confirmation {\n            top: 50%;\n        }\n        \n        .out .rc-confirmation {\n            top: -50%;\n        }\n        \n        header {\n            padding: 25px 15px;\n            background-color: ${buttonColor};\n            border-top-left-radius: 3px;\n            border-top-right-radius: 3px;\n            color: ${buttonTextColor};\n            text-transform: uppercase;\n            font-size: 17px;\n            letter-spacing: 1px;\n            text-align: center;\n        }\n        \n        .section {\n            padding: 20px;\n            font-size: 15px;\n        }\n        \n        p:first-child {\n            margin: 0 0 10px 0;\n        }\n        \n        button {\n            width: calc(50% - 5px);\n            cursor: pointer;\n            display: inline-block;\n            border: none;\n            background: ${buttonColor};\n            color: ${buttonTextColor};\n            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n            padding: 9px 20px;\n            font-size: inherit;\n            border-radius: 3px;\n            transition: background-color .1s ease;\n        }\n        \n        button:disabled {\n            opacity: 0.5;\n        }\n        \n        .send {\n            margin-right: 5px;\n        }\n        \n        button:hover {\n            background: ${buttonHoverColor};\n        }\n        \n        button:disabled:hover {\n            background: ${buttonColor};\n        }\n        \n        textarea,\n        input[type=text] {\n            box-sizing: border-box;\n            width: 100%;\n            margin-top: 10px;\n            _outline: 0;\n            line-height: 19px;\n            padding: 7px 12px;\n            background: ${foregroundColor};\n            border: 0;\n            color: rgba(0,0,0,.85);\n            border-radius: 3px;\n            font-size: inherit;\n            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n            font-weight: 300;\n            resize: none;\n        }\n        \n        textarea:disabled,\n        input:disabled {\n            opacity: 0.5;\n        }\n        \n        textarea { \n            height: 30px;\n            min-height: 30px;\n        }\n        \n        label {\n            display: block;\n            cursor: pointer;\n        }\n        \n        label:first-of-type {\n            margin-top: 10px;\n        }\n        \n        input[type=checkbox] {\n            cursor: pointer;\n            position: relative;\n            top: -1px;\n        }\n        \n        img {\n            position: absolute;\n            right: 20px;\n            height: 60px;\n            transition: all 0.1s ease;\n            background-color: #fff;\n        }\n        \n        img:hover {\n            height: 137px;\n        }\n        @keyframes spinner-rotate { to { transform: rotate(360deg) } }\n        \n        .spinner {\n            width: 0;\n            transition: width 0.5s;\n            height: 12px;\n            border-radius: 10px;\n            border-bottom: 2px solid ${buttonTextColor};\n            display: inline-block;\n            margin: 0 5px 0 -7px;\n        }\n        \n        .spinner.visible {\n            animation: spinner-rotate 1s infinite linear;\n            width: 12px;\n        }\n        .poweredby {\n            position: absolute;\n            right: 10px;\n            bottom: 4px;\n            font-size: 8px;\n        }\n        .poweredby a{\n            text-decoration: none;\n        }'),o(this,"template",'\n        <div class="rc-confirmation">\n            <header>_titleText_</header>\n            <div class="section">\n            <p>_introText_</p>\n            <textarea id="info" data-id="info" placeholder="_infoFieldPlaceholderText_"></textarea>\n            <input id="email" type="text" data-id="email" placeholder="_emailFieldPlaceholderText_">\n            <label id="screenshot"><input type="checkbox" data-id="screenshot" checked="checked">_screenshotFieldLabel_<img src="IMAGE"></label>\n            <label id="userActions"><input type="checkbox" data-id="userActions" checked="checked">_stepsFieldLabel_</label>\n            <label id="systeminfo"><input type="checkbox" data-id="systeminfo" checked="checked">_systemInfoFieldLabel_</label>\n            <label id="cookieData"><input type="checkbox" data-id="cookieData" checked="checked">_cookiesFieldLabel_</label>\n            <p style="font-size: 10px;color:#777">\n            _footerText_\n            </p>\n            <button class="cancel">_cancelButtonText_</button>\n            <button type="submit" class="send"><div class="spinner"></div>_sendButtonText_</button>\n            <span class="poweredby">Powered by <a href="https://therootcause.io" target="_blank"><strong>RootCause</strong></a></span>\n           </div>\n        </div>\n    '),o(this,"onSendClick",null);var t=this;Object.assign(t,n),["titleText","introText","infoFieldPlaceholderText","emailFieldPlaceholderText","screenshotFieldLabel","stepsFieldLabel","systemInfoFieldLabel","cookiesFieldLabel","footerText","cancelButtonText","sendButtonText"].forEach(function(e){t.template=t.template.replace("_"+e+"_",t[e])})}var n,t;return n=e,(t=[{key:"show",value:function(){var e=this,n=e.el=document.createElement("iframe"),t=this.styleEl=document.createElement("style"),r="\n                <html>\n                <head><style>  ".concat(e.prepareInnerCss(),"  </style></head>\n                <body>  ").concat(e.template," </body>\n                </html > ");n.id="rc-confirmationdialog-frame",n.className="rc-confirmation-iframe",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(r),n.contentWindow.document.close(),t.innerHTML=this.outerCss,document.head.appendChild(t);var o=n.contentDocument,i=o.getElementById("email");if(e.screenshotSrc)o.querySelector("#screenshot img").src=this.screenshotSrc;else{var s=o.getElementById("screenshot");s.parentElement.removeChild(s)}if(!e.recordUserActions){var a=o.getElementById("userActions");a.parentElement.removeChild(a)}this.showEmailField?i.value=this.email||"":i.parentElement.removeChild(i);var l=o.querySelector("textarea"),c=o.querySelector(".section").offsetHeight+50;l.style.height="calc(100% - "+c+"px)",l.focus(),o.body.className="animate",o.addEventListener("keyup",e.onKeyUp.bind(e)),o.querySelector(".send").addEventListener("click",e.onInternalSendClick.bind(e)),o.querySelector(".cancel").addEventListener("click",e.onCancelClick.bind(e))}},{key:"prepareInnerCss",value:function(){var e=this,n=e.innerCss;return["textColor","backgroundColor","foregroundColor","buttonColor","buttonHoverColor","buttonTextColor","maskColor"].forEach(function(t){n=n.replace(new RegExp("\\${"+t+"}","g"),e[t])}),n}},{key:"destroy",value:function(){document.body.removeChild(this.el),this.styleEl.parentElement.removeChild(this.styleEl)}},{key:"onInternalSendClick",value:function(){var e=this,n={},t=e.el.contentDocument,r=t.querySelectorAll("[data-id]");[].forEach.call(r,function(e){n[e.dataset.id]="checkbox"===e.getAttribute("type")?e.checked:e.value,e.disabled=!0}),t.querySelector(".spinner").className+=" visible",t.querySelector(".send").disabled=!0,e.onSendClick&&e.onSendClick(n,function(){t.body.className="out",setTimeout(function(){e.destroy()},200)})}},{key:"onCancelClick",value:function(){var e=this;e.el.contentDocument.body.className="",setTimeout(function(){e.destroy()},200)}},{key:"onKeyUp",value:function(e){"Escape"===e.key&&this.destroy()}}])&&r(n.prototype,t),e}();n.a=i},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var i=t(19),s=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"text","FEEDBACK"),o(this,"bugText","Bug"),o(this,"featureRequestText","Feature request"),o(this,"nameFieldPlaceholder","Your name"),o(this,"messageFieldPlaceholder","Message"),o(this,"submitButtonText","Submit"),o(this,"cancelButtonText","Cancel"),o(this,"infoText","Click and drag to highlight issue"),o(this,"textColor","#666"),o(this,"backgroundColor","#eee"),o(this,"foregroundColor","#fff"),o(this,"buttonColor","#0088d1"),o(this,"buttonHoverColor","#00689c"),o(this,"buttonTextColor","#fff"),o(this,"highlightColor","rgba(255,0,0,0.5)"),o(this,"feedbackButtonColor","#aaa"),o(this,"feedbackButtonTextColor","#fff"),o(this,"side","right"),o(this,"hideDelayAfterSubmit",2e3),o(this,"el",null),o(this,"timer",null),o(this,"styleNode",null),o(this,"selectorEl",null),o(this,"formVisible",!1),o(this,"startX",null),o(this,"startY",null),o(this,"userName",""),o(this,"maskEl",null),o(this,"mouseEventType",window.MSPointerEvent?"mspointer":window.PointerEvent?"pointer":"mouse"),o(this,"send",null),o(this,"sendButton",null),o(this,"template",'\n        <div class="rc-feedbackbutton-button"></div>\n        <div class="rc-feedbackbutton-form">\n        <form>\n        <input type="radio" name="type" value="bug" checked="checked" id="__bug">\n        <label for="__bug">_bugText_</label>\n        <input type="radio" name="type" value="feature" id="__feature">\n        <label for="__feature">_featureRequestText_</label>\n        <input type="text" placeholder="_nameFieldPlaceholder_" name="name" required>\n        <textarea name="message" placeholder="_messageFieldPlaceholder_" required></textarea>\n        <input type="submit">\n        <p class="infoText">_infoText_</p>\n        </form>\n        <button class="send"><div></div>_submitButtonText_</button>\n        <button class="cancel">_cancelButtonText_</button>\n        <span class="poweredby">Powered by <a href="https://therootcause.io" target="_blank"><strong>RootCause</strong></a></span>'),o(this,"outerCss","\n        .rc-feedbackbutton-iframe { \n            border      : 0; \n            width       : 30px; \n            z-index     : 20000002 !important; \n            position    : fixed; \n            bottom      : 10%; \n            height      : 410px;\n            transition  : width .2s ease, height 0s ease .2s;\n        }\n        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-side-right {\n            right       : 0px;\n        }\n        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-side-left {\n            left        : 0px;\n        }\n        .rc-feedbackbutton-init {\n            transition  : width 0s; \n        }\n        \n        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-expanded:hover,\n        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-expanded,\n        .rc-feedbackbutton-iframe:hover {\n            width       : 325px;\n            height      : 410px !important;\n            max-height  : 90%;\n            min-height  : 272px;\n            transition  : width .2s ease, height 0s;\n        }\n        \n        .rc-feedbackbutton-iframe:hover {\n            width       : 35px;\n        }\n        \n        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-drawing {\n            width       : 25px;\n        }\n        \n        .rc-feedbackbutton-iframe.detached {\n            position    : absolute;\n            bottom      : auto;\n        }"),o(this,"innerCss",'\n        body {\n            margin      : 0;\n            font-family : "Helvetica Neue",Helvetica,Arial,sans-serif;\n            font-weight : 300;\n            overflow    : hidden;\n            width       : 100%;\n            height      : 100%;\n        }\n        .rc-feedbackbutton-button {\n            position    : absolute;\n            bottom      : 30px;\n            cursor      : pointer; \n            min-width   : 10px;\n            min-height  : 20px;\n            font-size   :17px;\n            color       :${feedbackButtonTextColor};\n            letter-spacing:1px;\n            background-color: ${feedbackButtonColor};\n            text-align  : center;\n            padding     : 5px 15px;\n            border-top-left-radius: 3px;\n            border-top-right-radius: 3px;\n            box-shadow  : rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;\n            transition  : background-color 0.2s ease, color 0.2s ease;\n            white-space : nowrap;\n        }\n        .rc-feedbackbutton-side-left .rc-feedbackbutton-button {\n            right        : 30px;\n            transform   : rotate(90deg);\n            transform-origin: right bottom;\n        }\n        .rc-feedbackbutton-side-right .rc-feedbackbutton-button {\n            left        : 30px;\n            transform   : rotate(-90deg);\n            transform-origin: left bottom;\n        }\n        .rc-feedbackbutton-expanded .rc-feedbackbutton-button,\n        .rc-feedbackbutton-button:hover {\n            background-color: ${buttonColor};\n            color       : ${buttonTextColor};\n        }\n        .rc-feedbackbutton-iframe-expanded .rc-feedbackbutton-button {\n            background-color: ${buttonColor};\n        }\n        .rc-feedbackbutton-form {\n            position: absolute;\n            bottom: 15px;\n            margin-top: 15px;\n            box-sizing: border-box;\n            width: 300px;\n            background-color: ${backgroundColor};\n            padding: 20px;\n            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;\n        }\n        .rc-feedbackbutton-side-right .rc-feedbackbutton-form {\n            left: 30px;\n            border-top-left-radius: 3px;\n            border-bottom-left-radius: 3px;\n        }\n        .rc-feedbackbutton-side-left .rc-feedbackbutton-form {\n            right: 30px;\n            border-top-right-radius: 3px;\n            border-bottom-right-radius: 3px;\n        }\n        .rc-feedbackbutton-expanded .rc-feedbackbutton-form,\n        .rc-feedbackbutton-button:hover .rc-feedbackbutton-form {\n            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;\n        }\n        textarea,\n        input[type=text] {\n            box-sizing: border-box;\n            width: 100%;\n            margin-top:10px;\n            _outline: 0;\n            text-align: left;\n            line-height: 19px;\n            padding: 7px 12px;\n            background: ${foregroundColor};\n            border: 1px solid transparent;\n            color: rgba(0,0,0,.85);\n            border-radius: 3px;\n            font-size:inherit;\n            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n            font-weight: 300;\n            resize: none;\n        }\n        \n        textarea:disabled,\n        input:disabled {\n            opacity: 0.5;\n        }\n        \n        textarea { \n                height: 180px;\n        }\n        \n        label {\n            color: ${textColor};\n            margin: 0 10px 0 0;\n            cursor: pointer;\n        }\n        \n        button {\n            width: 125px;\n            cursor: pointer;\n            display: inline-block;\n            _outline: 0;\n            border: 0;\n            background: ${buttonColor};\n            color: ${buttonTextColor};\n            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n            padding: 9px 20px;\n            font-size: inherit;\n            font-weight: 300;\n            border-radius: 3px;\n            transition: background-color .1s ease;\n        }\n        \n        .send {\n            margin-right: 5px;\n           transition: background 0.5s;\n        }\n        .send.failed {\n            background:red; \n        }\n        \n        button:hover {\n            background: ${buttonHoverColor};\n        }\n        \n        button:disabled {\n            opacity: 0.5;\n        }\n        \n        button:disabled:hover {\n            background: ${buttonColor};\n        }\n        \n        input[type=radio] {\n            cursor: pointer;\n            position: relative;\n            top: -2px;\n        }\n        \n        p {\n            color: ${textColor};\n        }\n        p.infoText:empty{\n            display:none;\n        }\n        \n        p.infoText:before {\n            content: "i";\n            display: inline-block;\n            color: ${buttonTextColor};\n            margin-right: 5px;\n            background-color: ${buttonColor};\n            width: 20px;\n            height: 20px;\n            border-radius: 100%;\n            text-align: center;\n            font-weight: 700;\n        }\n        \n        @keyframes spinner-rotate { to { transform: rotate(360deg) } }\n        \n        .send div {\n            display:inline-block;\n            transition: width 0.5s, background 0.5s;\n            border-radius:50%;\n        } \n        .spinner {\n            height: 12px;\n            margin: 0 5px 0 -7px;\n            border-bottom: 2px solid ${buttonTextColor};\n            animation: spinner-rotate 1s infinite linear;\n            width: 12px;\n        }\n        .checkmark {\n            position:absolute;\n            width: 22px;\n            height:22px;\n            background: #00c200;\n            margin:-2px 5px 0 -27px;\n            transform: rotate(45deg);\n        }\n        \n        .checkmark:before{\n            content:"";\n            position: absolute;\n            width:3px;\n            height:9px;\n            background-color:#fff;\n            left:11px;\n            top:6px;\n        }\n        .checkmark:after {\n            content: "";\n            position: absolute;\n            width: 3px;\n            height: 3px;\n            background-color: #fff;\n            left: 8px;\n            top: 12px;\n        }\n        \n        input[type=submit] {\n            display: none;\n        }\n        \n        .poweredby {\n            position: absolute;\n            right: 10px;\n            bottom: 4px;\n            font-size: 8px;\n        }\n        .poweredby a{\n            text-decoration: none;\n        }');var t=this;Object.assign(t,n),t.annotation=new i.a({ignoreEl:t.el,afterMouseUp:function(){var e=t.el.contentDocument.body;e.querySelector("input[type=text]").focus(),t.el.className=t.el.className.replace(/rc-feedbackbutton-iframe-drawing/g,""),e.scrollLeft=0},afterMouseDown:function(){t.drawingTimeout=setTimeout(function(){t.el.className+=" rc-feedbackbutton-iframe-drawing"},100)}}),t.onSendClick=t.onSendClick.bind(t),t.showForm=t.showForm.bind(t),t.hideForm=t.hideForm.bind(t),t.onWindowLoad=t.onWindowLoad.bind(t),["bugText","featureRequestText","nameFieldPlaceholder","messageFieldPlaceholder","submitButtonText","cancelButtonText","infoText"].forEach(function(e){t.template=t.template.replace("_"+e+"_",t[e])}),"complete"===document.readyState&&document.body?t.initialize():window.addEventListener("load",t.onWindowLoad.bind(t))}var n,t;return n=e,(t=[{key:"initialize",value:function(){this.initialized||(this.createElement(),this.createStyle(),this.initialized=!0)}},{key:"createElement",value:function(){var e=this,n=e.el=document.createElement("iframe"),t="\n                <html>\n                <head><style>".concat(e.prepareInnerCss(),"</style></head>\n                <body>").concat(e.template,"</body>\n                </html>\n            ");n.setAttribute("tabindex","-1"),n.id="rc-feedbackbutton-frame",n.className="rc-feedbackbutton-iframe rc-feedbackbutton-init rc-feedbackbutton-iframe-side-"+e.side,setTimeout(function(){n.className=n.className.replace("rc-feedbackbutton-init","")},200),document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(t),n.contentWindow.document.close();var r=n.contentDocument;r.addEventListener("click",function(n){"string"==typeof n.target.className&&0===n.target.className.indexOf("rc-feedbackbutton-button")&&e.showForm()}),r.body.className+=" rc-feedbackbutton-side-"+e.side,r.querySelector(".rc-feedbackbutton-button").innerHTML=e.text,e.userName&&(r.querySelector("input[name=name]").value=e.userName),e.sendBtn=r.querySelector(".send"),e.sendBtn.addEventListener("click",e.onSendClick),r.querySelector(".cancel").addEventListener("mousedown",e.hideForm),n.style.height=r.querySelector(".rc-feedbackbutton-button").offsetWidth+35+"px",r.addEventListener("keyup",this.onIframeDocumentKeyDown.bind(this))}},{key:"createStyle",value:function(){var e=document.createElement("style");e.innerHTML=this.outerCss,document.head.appendChild(e)}},{key:"prepareInnerCss",value:function(){var e=this,n=e.innerCss;return["textColor","backgroundColor","foregroundColor","buttonColor","buttonHoverColor","buttonTextColor","feedbackButtonColor","feedbackButtonTextColor"].forEach(function(t){n=n.replace(new RegExp("\\${"+t+"}","g"),e[t])}),n}},{key:"onWindowLoad",value:function(){this.initialize()}},{key:"onSendClick",value:function(e){var n=this,t=n.el.contentDocument,r=t.querySelector("form");if(e.preventDefault(),r.checkValidity()){var o=n.sendBtn;o.firstChild.className="spinner",o.disabled=!0,n.send(function(e){o.disabled=!1,e?(o.firstChild.className="checkmark",n.timer=setTimeout(function(){n.timer=null,o.firstChild.className="",n.hideForm(),r.reset()},n.hideDelayAfterSubmit)):(o.className="send failed",o.firstChild.className="",n.timer=setTimeout(function(){n.timer=null,o.className="send"},2e3))})}else t.querySelector("input[type=submit]").click()}},{key:"onIframeDocumentKeyDown",value:function(e){"Escape"===e.key&&this.hideForm()}},{key:"setSelectionBox",value:function(e,n,t,r){this.selectorEl.style.cssText="position:absolute;border:2px solid "+this.highlightColor+";border-radius: 3px;z-index:20000001;left:"+e+"px;top:"+n+"px;width:"+t+"px;height:"+r+"px"}},{key:"getName",value:function(){return this.el.contentDocument.querySelector("input[name=name]").value}},{key:"getMessage",value:function(){return this.el.contentDocument.querySelector("textarea[name=message]").value}},{key:"getType",value:function(){return this.el.contentDocument.querySelector("#__bug").checked?"bug":"featurerequest"}},{key:"showForm",value:function(){var e=this,n=e.el;n.className.match(/rc-feedbackbutton-iframe-expanded/)?e.hideForm():(n.className+=" rc-feedbackbutton-iframe-expanded",n.contentDocument.body.className+=" rc-feedbackbutton-expanded",e.annotation.start(),e.maskEl=document.createElement("div"),e.maskEl.style.cssText="z-index:10000;position:absolute;left:0;top:0;width:100%;height:100%;",document.body.appendChild(e.maskEl))}},{key:"hideForm",value:function(){var e=this,n=e.el;e.annotation.stop(),e.annotation.clear(),n&&(n.className=n.className.replace(/rc-feedbackbutton-iframe-expanded/,""),n.contentDocument.body.className=n.contentDocument.body.className.replace("rc-feedbackbutton-expanded",""),n.contentDocument.querySelector(".send").firstChild.className=""),e.selectorEl&&(e.selectorEl.parentElement.removeChild(e.selectorEl),e.selectorEl=null),e.maskEl&&(e.maskEl.parentElement.removeChild(e.maskEl),e.maskEl=null)}},{key:"destroy",value:function(){var e=this;e.hideForm(),e.annotation.destroy(),e.styleNode&&e.styleNode.parentNode.removeChild(e.styleNode),e.styleNode=null,e.el&&e.el.parentNode.removeChild(e.el),e.el=null}}])&&r(n.prototype,t),e}();n.a=s},function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",function(){return l});var i=t(25),s=t(26),a=t(7),l=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"applicationVersion",null),o(this,"frameworkVersion",null),o(this,"playbackScriptUrl",null),o(this,"scope",null),o(this,"ready",!1),o(this,"harness",null),o(this,"test",null),o(this,"highlighter",null),o(this,"initialCursorPosition",null),o(this,"currentActionId",0),o(this,"maxOriginalTimingActionWait",1e4),o(this,"maxActionWait",500),o(this,"playing",!1),o(this,"speed",null),o(this,"useOriginalTiming",null),o(this,"sinonScriptUrl",null),o(this,"replayAjaxInteraction",!1),o(this,"xhrSimulator",null),o(this,"extPatched",!1);var t=this;Object.assign(t,n);try{window.top=window}catch(e){}window.addEventListener("hashchange",t.onUrlChange.bind(t)),window.addEventListener("popstate",t.onUrlChange.bind(t)),this.loadPlaybackEngine()}var n,t;return n=e,(t=[{key:"isReady",value:function(){return this.ready}},{key:"patchExtJSWindowTopAccess",value:function(){if(!this.extPatched&&window.Ext&&Ext.dom&&Ext.dom.Element){this.extPatched=!0;var e=Ext.dom.Element.getViewportScale;e&&e.toString().match(/\.top/)&&(Ext.dom.Element.getViewportScale=function(){var e=window;return(Ext.isiOS||Ext.isAndroid?1:e.devicePixelRatio||e.screen.deviceXDPI/e.screen.logicalXDPI)*this.getViewportTouchScale()});var n=Ext.dom.Element.getViewportTouchScale;n&&n.toString().match(/\.top/)&&(Ext.dom.Element.getViewportTouchScale=function(e){var n,t=1,r=window,o=document.documentElement,i=window;return!e&&(n=this._viewportTouchScale)?n:(Ext.isIE10p||Ext.isEdge||Ext.isiOS?t=o.offsetWidth/i.innerWidth:Ext.isChromeMobile&&(t=r.outerWidth/r.innerWidth),t)})}}},{key:"loadPlaybackEngine",value:function(){function e(){(t=document.createElement("iframe")).name="rootcause_playback_engine",t.style.cssText="position: absolute; left: -10000px; top: -10000px;width: 100px;height:100px;",t.onload=n,t.src="about:blank",document.body.appendChild(t)}function n(){r.scope=t.contentWindow;var e=r.scope.document,n=e.createElement("script");n.src=r.playbackScriptUrl,n.onload=r.onSiestaLoadComplete.bind(r),n.onerror=r.onSiestaLoadError.bind(r),n.setAttribute("crossorigin","anonymous"),(e.head||e.body).appendChild(n)}var t,r=this;window.addEventListener("message",r.onMessage.bind(r)),r.postMessage("playbackengineloadstart",{href:location.href}),document.body?e():document.addEventListener("DOMContentLoaded",e),this.replayAjaxInteraction&&(this.xhrSimulator=new s.a({sinonScriptUrl:this.sinonScriptUrl}))}},{key:"onSiestaLoadComplete",value:function(){var e=this;e.patchExtJSWindowTopAccess(),e.postMessage("playbackengineloaded"),e.createHarness(),e.resetScroll(),e.ready=!0,e.postMessage("ready",{applicationVersion:e.applicationVersion,frameworkVersion:e.frameworkVersion,scrollbarWidth:a.a.measureScrollBarWidth()})}},{key:"onUrlChange",value:function(){this.postMessage("urlchange",{href:location.href})}},{key:"onTestUpdate",value:function(e,n,t){var r=t.description||t.annotation;"string"==typeof r&&r.match(/waited too long/i)&&!t.isPassed()&&this.postMessage("playbackFailed",{message:t.description||t.annotation,actionId:this.currentActionId})}},{key:"postMessage",value:function(e,n){(n=n||{}).type=e,window.parent.postMessage(n,"*")}},{key:"highlightTarget",value:function(e,n){var t=e instanceof Array;this.highlighter||(this.highlighter=new this.scope.Siesta.Project.Browser.UI.ElementHighlighter({window:window})),t?(n=e,e=document.body):(e=this.test.normalizeElement(e,!0,!0,!1))&&(e.offsetWidth||e.offsetHeight?n&&(n=this.test.normalizeOffset(n,this.scope.$(e))):e=n=null),this.highlighter.highlightTarget(e,n)}},{key:"onSiestaLoadError",value:function(){this.postMessage("playbackengineloadfail")}},{key:"onMessage",value:function(e){var n=e.data;switch(n.type){case"playbackContext":if(!this.test)return void console.error("Playback engine not initialized.");var t=n.settings;Object.assign(this.test.simulator,{mouseMovePrecision:t.mouseMovePrecision,pathBatchSize:t.pathBatchSize,dragDelay:t.dragDelay,actionDelay:t.actionDelay}),this.speed=t.speed,this.useOriginalTiming=t.useOriginalTiming,n.steps&&this.xhrSimulator&&this.xhrSimulator.prepareFor(n.steps),n.steps&&this.play(n.steps);break;case"browserContext":n.cookies&&i.a.injectCookie(n.cookies),"number"==typeof n.scrollbarWidth&&this.attemptSetScrollbarWidth(n.scrollbarWidth),n.initialCursorPosition&&(this.initialCursorPosition=n.initialCursorPosition),this.xhrSimulator&&n.xhrResponses&&this.xhrSimulator.setRecordedResponses(n.xhrResponses);break;case"highlightTarget":if(!this.test)return void console.error("Playback engine not initialized.");this.highlightTarget(n.target,n.offset);break;case"stop":this.stop()}}},{key:"play",value:function(e){if(0!==e.length){this.patchExtJSWindowTopAccess();var n=this,t=e[e.length-1];n.highlighter&&n.highlighter.stop(),e=n.processSteps(e).concat(function(e){n.postMessage("stop",{actionId:t.id})}),n.playing=!0,n.postMessage("play"),n.test.chain(e)}}},{key:"stop",value:function(){this.playing=!1,this.postMessage("stop",{actionId:this.currentActionId})}},{key:"processSteps",value:function(e){var n=this,t=n.test,r=n.useOriginalTiming;return e.map(function(o,i){var s=0,a=e[i-1];if(t.mouseMovePrecision,i>0&&o.timestamp&&!a.moveCursorAlongPath){e[i-1].timestamp;var l=o.timestamp-a.timestamp;if(isNaN(l))throw new Error("Incorrect timestamps: "+String(o.timestamp)+" "+String(a.timestamp));s=r?Math.min(l,n.maxOriginalTimingActionWait):Math.min(l,"fast"===n.speed&&"click"!==a.action||"click"!==o.action?0:n.maxActionWait),s=Math.max(0,s)}return[function(e){n.playing&&(n.currentActionId=o.id,n.postMessage("beforeStepPlay",{actionId:o.id}),s?this.waitFor(s,e):e())},o.before,o,o.after,function(e){n.postMessage("stepPlayed",{actionId:o.id}),e()}]})}},{key:"resetScroll",value:function(){var e=this.test&&this.test.global;if(e){var n=e.document;n&&n.body&&(n.body.scrollTop=n.documentElement.scrollTop=0)}}},{key:"createHarness",value:function(){var e=this.scope,n=this.harness=new e.Siesta.Project.Browser,t=e.RC.player.ReplayTestClass;return n.configure({testClass:t,showCursor:!1,viewDOM:!0,autoRun:!1,needUI:!1,transparentEx:!0,runCore:"sequential",maxThreads:1,keepNLastResults:1,disableGlobalsCheck:!0,forceDOMVisible:!1,defaultTimeout:18e7}),n.start(),this.scopeProvider=new e.Scope.Provider.IFrame({scope:window,cls:"tr-iframe",launchId:Date.now(),name:"",performWrap:!1,seedingCode:"",sourceURL:"",useStrictMode:!0}),this.test=new t({player:this,bowser:bowser,xhrSimulator:this.xhrSimulator,moveCursorBetweenPoints:!bowser.mobile&&!bowser.tablet,scopeProvider:this.scopeProvider,transparentEx:!0,project:this.harness,testCode:"StartTest(function() {});",url:"/",initialCursorPosition:this.initialCursorPosition}),this.test.on("testupdate",this.onTestUpdate,this),this.harness.launchTest({scopeProvider:this.scopeProvider,desc:{url:"/"},testHolder:{test:this.test},startTestAnchor:{exceptionCatcher:function(e){e()},testErrorClass:function(){},args:[function(){}]}}),n}},{key:"attemptSetScrollbarWidth",value:function(e){}}])&&r(n.prototype,t),e}()},function(e,n,t){"use strict";var r={inject:function(e){var n=document.cookie.split(";"),t=e.split(";"),r={},o={};n.forEach(function(e){var n=e.indexOf("="),t=(n>-1?e.substr(0,n):e).trim(),r=n>-1?e.substr(n+1):"";o[t]=r}),t.forEach(function(e){var n=e.indexOf("="),t=(n>-1?e.substr(0,n):e).trim(),o=n>-1?e.substr(n+1):"";r[t]=o});for(var i=0;i<n.length;i++){var s=n[i],a=s.indexOf("="),l=(a>-1?s.substr(0,a):s).trim();if(r[l]){var c=new Date;c.setTime(c.getTime()+6048e5);var u="; expires="+c.toUTCString();document.cookie=l+"="+r[l]+u+"; path=/"}else document.cookie=l+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}};n.a=r},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function init(libScriptUrl,onXhrRequest){var request;if(!fakeXhr){try{(request=new XMLHttpRequest).open("GET",libScriptUrl,!1),request.send(null),200===request.status&&eval(request.responseText)}catch(e){}window.nise&&(fakeXhr=window.nise.fakeXhr.useFakeXMLHttpRequest())}return fakeXhr&&(fakeXhr.onCreate=onXhrRequest),!!fakeXhr}function onXhrRequest(e,n){n.onSend=function(n){onXhrSend(e,n)}}function onXhrSend(e,n){!1!==n.async?respondOrQueueAsyncRequest(e,n):respondSync(e,n)}function respondSync(e,n){var t=getFakeRequestMatchingRecordedResponse(n,e.recordedSyncResponses);t?(unqueueReqResp(t,e.recordedSyncResponses),n.respond(t.status,t.responseHeaders,t.response)):n.respond(404,{},"")}function respondOrQueueAsyncRequest(e,n,t){var r=getFakeRequestMatchingRecordedResponse(n,e.replayedAsyncResponses);r?(unqueueReqResp(r,e.replayedAsyncResponses),respond(e,n,r,t)):(n.timestamp=Date.now(),e.replayedRequests.push(n),t&&setTimeout(t,10))}function respondOrQueueAsyncResponse(e,n,t){var r=getRecordedResponseMatchingFakeRequest(n,e.replayedRequests);r?(unqueueReqResp(r,e.replayedRequests),respond(e,r,n,t)):(e.replayedAsyncResponses.push(n),t&&setTimeout(t,10))}function respond(e,n,t,r){var o,i=Date.now();o=function(){n.respond(t.status,t.responseHeaders||t.headers.split("\r\n").reduce(function(e,n){if(n=n.trim()){var t=n.split(":");e[t[0].trim()]=t[1].trim()}return e},{}),t.response||t.responseText),r&&setTimeout(r,10)},i-n.timestamp>=t.duration?o():setTimeout(o,t.duration-(i-n.timestamp))}function getFakeRequestMatchingRecordedResponse(e,n){return(n=n.slice()).sort(function(n,t){var r=calcFakedRequestToRecordedResponseFitness(e,n),o=calcFakedRequestToRecordedResponseFitness(e,t);return r==o&&(r=n.timestamp,o=t.timestamp),r<o?-1:1}),n.pop()}function getRecordedResponseMatchingFakeRequest(e,n){return(n=n.slice()).sort(function(n,t){var r=calcFakedRequestToRecordedResponseFitness(n,e),o=calcFakedRequestToRecordedResponseFitness(n,e);return r==o&&(r=n.timestamp,o=t.timestamp),r<o?-1:1}),n.pop()}function calcFakedRequestToRecordedResponseFitness(e,n){var t,r;return t={url:_util_Url__WEBPACK_IMPORTED_MODULE_1__.a.parse(e.url),method:e.method,async:!1!==e.async,headers:e.requestHeaders,body:e.requestBody,username:e.username,password:e.password},r={url:_util_Url__WEBPACK_IMPORTED_MODULE_1__.a.parse(n.url),method:n.method,async:!1!==n.async,headers:n.requestHeaders,body:n.request,username:n.username,password:n.password},t.url.host=t.url.host.split(".").reverse(),r.url.host=r.url.host.split(".").reverse(),delete t.url.source,delete t.url.relative,delete t.url.authority,delete r.url.source,delete r.url.relative,delete r.url.authority,_util_Value__WEBPACK_IMPORTED_MODULE_0__.a.fuzzyMatchValues(t,r)}function unqueueReqResp(e,n){return n.splice(n.indexOf(e),1),n}__webpack_require__.d(__webpack_exports__,"a",function(){return XhrSimulator});var _util_Value__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27),_util_Url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),fakeXhr=null,XhrSimulator=function(){function e(n){_classCallCheck(this,e),_defineProperty(this,"sinonScriptUrl",null),_defineProperty(this,"replayedRequests",null),_defineProperty(this,"replayedAsyncResponses",null),_defineProperty(this,"recordedSyncResponses",null),_defineProperty(this,"recordedSyncResponsesBackup",null);var t=this,r=this;return Object.assign(t,n),t.replayedRequests=[],t.replayedAsyncResponses=[],t.recordedSyncResponses=[],t.recordedSyncResponsesBackup=[],init(t.sinonScriptUrl,function(e){onXhrRequest(t,e)})||(r=null,console.error("Failed to initialize Ajax mocking library")),r}return _createClass(e,[{key:"setRecordedResponses",value:function(e){this.recordedSyncResponses=(e||[]).filter(function(e){return!1===e.async}),this.recordedSyncResponsesBackup=this.recordedSyncResponses.slice()}},{key:"prepareFor",value:function(e){var n,t;this.replayedAsyncResponses=[],e&&e.length?(n=e[0].timestamp,t=e[e.length-1].timestamp,this.recordedSyncResponses=this.recordedSyncResponsesBackup.reduce(function(e,r){return r.timestamp<=n&&r.timestamp<=t&&e.push(r),e},[])):this.recordedSyncResponses=[]}},{key:"simulateXhrResponse",value:function(e,n){!1!==e.async?respondOrQueueAsyncResponse(this,e,n):n&&setTimeout(n,10)}}]),e}()},function(e,n,t){"use strict";var r={atoms:{Undefined:1,Null:2,Boolean:3,Number:4,String:5,Date:6},typeOf:function(e){return Object.prototype.toString.call(e).slice(8,-1)},isAtom:function(e){return r.typeOf(e)in r.atoms},getObjectKeys:function(e){var n,t=[];for(n in e)e.hasOwnProperty(n)&&t.push(n);return t},fuzzyMatchValues:function(e,n,t,o,i){var s,a=r,l=0;if(e=t?t(e):e,n=t?t(n):n,(s=a.typeOf(e))==a.typeOf(n))switch(s){case"Null":case"Undefined":case"Boolean":case"Number":l=a.fuzzyMatchSimple(e,n);break;case"String":l=a.fuzzyMatchString(e,n);break;case"Date":l=a.fuzzyMatchDate(e,n);break;case"Array":l=a.fuzzyMatchArray(e,n,t,o,i);break;default:l=a.fuzzyMatchObject(e,n,t,o,i)}return l},fuzzyMatchSimple:function(e,n){return e==n?1:0},fuzzyMatchDate:function(e,n){return e===n||e.getTime()==n.getTime()&&1||0},fuzzyMatchString:function(e,n){var t,r,o;for(e=e.split(""),n=n.split(""),e.length>n.length&&(t=n,n=e,e=t),t=0,r=0,o=e.length;r<o&&t==r;++r)t+=e[r]==n[r]?1:0;return n.length>0?t/n.length:1},fuzzyMatchArray:function(e,n,t,o,i){var s,a,l,c,u=r;if(e===n)c=1;else{if(e.length>n.length&&(s=n,n=e,e=s),i=i||[],(o=o||[]).includes(e)||i.includes(n))throw new Error("Can't fuzzy match arrays circular reference found");for(o.push(e),i.push(n),s=[],a=0,l=e.length;a<l;++a)s[a]=u.fuzzyMatchValues(e[a],n[a],t,o,i);o.pop(),i.pop(),c=n.length>0?s.reduce(function(e,n){return e+n},0)/n.length:1}return c},fuzzyMatchObject:function(e,n,t,o,i){var s,a,l,c,u,d,h,p=r;if(e===n)h=1;else{if(s=p.getObjectKeys(e),a=p.getObjectKeys(n),s.length>a.length&&(c=a,a=s,s=c,c=n,n=e,e=c),i=i||[],(o=o||[]).includes(e)||i.includes(n))throw"Can't fuzzy match arrays circular reference found";for(o.push(e),i.push(n),c=[],u=0,d=s.length;u<d;++u)l=s[u],c[u]=p.fuzzyMatchValues(e[l],n[l],t,o,i);o.pop(),i.pop(),h=a.length>0?c.reduce(function(e,n){return e+n},0)/a.length:1}return h}};n.a=r},function(e,n,t){"use strict";var r={chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid:function(){for(var e,n=r.chars,t=new Array(36),o=0,i=0;i<36;i++)8===i||13===i||18===i||23===i?t[i]="-":(o<=2&&(o=33554432+16777216*Math.random()|0),e=15&o,o>>=4,t[i]=n[19==i?3&e|8:e]);return t.join("")}};n.a=r},function(e,n,t){var r=t(35),o=t(36);e.exports=function(e){return r(o(e))}},function(e,n,t){var r=t(2),o=t(18);e.exports=function(e,n){try{o(r,e,n)}catch(t){r[e]=n}return n}},function(e,n){e.exports=function(e){function n(e){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",e)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(e):"undefined"!=typeof eval?eval.call(null,e):n("EvalError: No eval function available")}catch(e){n(e)}}},function(e,n,t){var r=t(8),o=t(33),i=t(34),s=t(29),a=t(37),l=t(10),c=t(38),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,n){if(e=s(e),n=a(n,!0),c)try{return u(e,n)}catch(e){}if(l(e,n))return i(!o.f.call(e,n),e[n])}},function(e,n,t){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);n.f=i?function(e){var n=o(this,e);return!!n&&n.enumerable}:r},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var r=t(9),o=t(61),i="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,n){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,n,t){var r=t(17);e.exports=function(e,n){if(!r(e))return e;var t,o;if(n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;if("function"==typeof(t=e.valueOf)&&!r(o=t.call(e)))return o;if(!n&&"function"==typeof(t=e.toString)&&!r(o=t.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,n,t){var r=t(8),o=t(9),i=t(62);e.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(e,n,t){var r=t(8),o=t(38),i=t(40),s=t(37),a=Object.defineProperty;n.f=r?a:function(e,n,t){if(i(e),n=s(n,!0),i(t),o)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(17);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,n,t){var r=t(42),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,n,t){var r=t(2),o=t(30),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,n){e.exports={}},function(e,n,t){var r=t(2);e.exports=r},function(e,n,t){var r=t(10),o=t(29),i=t(74).indexOf,s=t(43);e.exports=function(e,n){var t,a=o(e),l=0,c=[];for(t in a)!r(s,t)&&r(a,t)&&c.push(t);for(;n.length>l;)r(a,t=n[l++])&&(~i(c,t)||c.push(t));return c}},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n){(function(n){e.exports=n}).call(this,{})},function(e,n,t){"use strict";n.a=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}},function(e,n,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,n,t){"use strict";var r=t(28),o=t(6),i=(t(0),{recordSessionVideo:!1,maxVideoDuration:null,processVideoFrameFn:null,mirrorProducer:null,videoBaseUrl:null,videoData:null,socket:null,sessionUuid:null,connectAttempts:0,maxConnectAttempts:10,connectAttemptInterval:3e3,start:function(){window.MutationObserver||window.WebKitMutationObserver||(this.recordSessionVideo=!1),this.recordSessionVideo&&this.startVideoRecording(),this.SUPER()},stop:function(){this.recordSessionVideo&&this.stopVideoRecording(),this.SUPER()},startVideoRecording:function(){var e=this;window.MutationObserver||window.WebKitMutationObserver?(e.mirrorProducer?e.mirrorProducer.connect():(e.sessionUuid=r.a.uuid(),e.videoData=[],e.allVideoData=[],e.connectToWebSocketServer(),e.mirrorProducer=new o.b(document,{onVideoFrameAvailable:e.onVideoFrameAvailable.bind(this),baseUrl:e.videoBaseUrl})),e.maxVideoDuration&&(e.videoDurationTimeout&&clearTimeout(e.videoDurationTimeout),e.videoDurationTimeout=setTimeout(function(){return e.stopVideoRecording()},1e3*e.maxVideoDuration))):e.logToConsole("Video recording not supported in this browser")},stopVideoRecording:function(){var e=this;e.videoDurationTimeout&&clearTimeout(e.videoDurationTimeout),e.mirrorProducer&&(e.mirrorProducer.disconnect(),e.socket&&e.socket.readyState===WebSocket.OPEN&&e.socket.close())},onVideoFrameAvailable:function(e){this.processVideoFrameFn&&this.processVideoFrameFn(e),this.supportOffline&&this.allVideoData.push(e),this.socket&&this.socket.readyState==WebSocket.OPEN?this.socket.send(JSON.stringify([e])):this.videoData.push(e)},connectToWebSocketServer:function(){try{this.connectAttempts++;var e=this.baseUrl.replace(/^https?:\/\/([^/]+).*/,"wss://$1/wss/"),n=this.socket=new WebSocket(e);n.addEventListener("open",this.onWebSocketOpen.bind(this)),n.addEventListener("close",this.onWebSocketClosed.bind(this))}catch(e){console.log("Could not not connect to RootCause websocket server"),this.reConnectToWebSocketServerAfterDelay()}},reConnectToWebSocketServerAfterDelay:function(){if(this.connectAttempts<=this.maxConnectAttempts){var e=this;setTimeout(function(){e.connectToWebSocketServer()},this.connectAttemptInterval)}},onWebSocketOpen:function(e){this.videoData.length&&(this.socket.send(JSON.stringify([["initSession",0,this.applicationId,this.sessionUuid]])),this.socket.send(JSON.stringify(this.videoData)),this.videoData=[])},onWebSocketClosed:function(e){1e3!=e.code&&this.reConnectToWebSocketServerAfterDelay()},collectCrashData:function(e,n){var t=this;this.SUPER(e,function(e){e.sessionUuid=t.sessionUuid,e.mayHaveVideo=Boolean(t.sessionUuid),n.call(t,e)})}});n.a=i},function(e,n){Class("RC.recorder.Action",{isa:Siesta.Recorder.Action,has:{type:null,message:null,start:null,end:null},methods:{asStep:function(){var e,n=this.getTarget();return n&&(n="cq"==n.type?n.target.indexOf("->")>0?n.target.split("->").splice(1,0,">>").join():">>"+n.target:n.target),e="diag"===this.action?{diag:this.message,type:this.type}:this.selectText||"selectText"==this.action?{selectText:[n,this.start,this.end]}:this.setHash?{setHash:[this.value]}:this.SUPER(),this.sourceEvent&&(this.sourceEvent.target&&(e.nodeName=this.sourceEvent.target.nodeName),e.xy=[this.sourceEvent.x,this.sourceEvent.y]),e.timestamp=this.getTimestamp(),e}}})},function(e,n){Role("RC.recorder.CanRecordHashChange",{has:{recordHashChange:!0},override:{initialize:function(){var e=this;e.SUPERARG(arguments),e.onHashChange=e.onHashChange.bind(e)},onStart:function(){this.SUPERARG(arguments),this.recordHashChange&&this.window.addEventListener("hashchange",this.onHashChange)},onStop:function(){this.SUPERARG(arguments),this.recordHashChange&&this.window.removeEventListener("hashchange",this.onHashChange)}},methods:{onHashChange:function(e){var n=this.window.location,t=this.getLastAction();t&&"setHash"===t.action&&t.value[0]===n.hash||this.addAction({action:"setHash",value:[n.hash],sourceEvent:Siesta.Recorder.Event.fromDomEvent(e)})}}})},function(e,n){Role("RC.recorder.CanRecordTextSelection",{has:{recordTextSelection:!0},after:{finalizeDragAction:function(e,n){if(this.recordTextSelection){var t=n.target;if(t&&this.elementSupportsSelection(t)){var r;try{r=t.selectionStart}catch(e){r=-1}r>=0&&this.addTextSelectionAction(this.getActionByEvent(n).target,r,t.selectionEnd)}}}},methods:{elementSupportsSelection:function(e){var n=e.tagName.toLowerCase();return"textarea"===n||"input"===n&&/^text|password|tel|url|search$/i.test(e.getAttribute("type"))},addTextSelectionAction:function(e,n,t){this.addAction({action:"selectText",target:e,start:n,end:t})}}})},function(e,n){Role("RC.recorder.BaseRecorderRole",{does:[RC.recorder.CanRecordHashChange,RC.recorder.CanRecordTextSelection],has:{actionClass:RC.recorder.Action,initialCursorPosition:Joose.I.Array},methods:{initialize:function(){var e=this;e.SUPERARG(arguments),e.onFirstMouseMove=e.onFirstMouseMove.bind(e)},start:function(){"function"==typeof this.window.document.body.contains&&this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments),this.window.document.body.addEventListener("mousemove",this.onFirstMouseMove,!0)},onStop:function(){this.SUPERARG(arguments),this.window.document.body.removeEventListener("mousemove",this.onFirstMouseMove,!0)},onFirstMouseMove:function(e){this.window.document.body.removeEventListener("mousemove",this.onFirstMouseMove,!0),0===this.getRecordedActions().length&&(this.initialCursorPosition[0]=e.pageX,this.initialCursorPosition[1]=e.pageY)},getLastRecordedCursorPosition:function(){var e;return Joose.A.eachR(this.actions,function(n){var t=n.target&&n.target.getTargetByType("xy");if(t)return e=t.target,!1}),e},flushRemainingActions:function(){var e=this.cursorPosition,n=this.getLastEvent();if(n&&"keydown"===n.type)this.convertToAction(RC.applyIf({type:"keypress"},n));else if(2===e.length){var t=this.getLastRecordedCursorPosition();(!t||Math.abs(t[0]-e[0])>=1||Math.abs(t[1]-e[1])>=1)&&this.addMoveCursorAction(this.lastMouseMoveEvent)}},getInitialCursorPosition:function(){if(this.initialCursorPosition.length>0)return this.initialCursorPosition;if(this.getRecordedEvents().length>0)for(var e=this.getRecordedEvents(),n=0;n<e.length;n++)if("number"==typeof e[n].x)return[e[n].x,e[n].y];return null}}})},function(e,n,t){var r=t(58);e.exports=r},function(e,n,t){t(59);var r=t(44);e.exports=r.Object.assign},function(e,n,t){var r=t(60),o=t(78);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,n,t){var r=t(2),o=t(32).f,i=t(18),s=t(63),a=t(30),l=t(70),c=t(77);e.exports=function(e,n){var t,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(t=m?r:g?r[f]||a(f,{}):(r[f]||{}).prototype)for(u in n){if(h=n[u],d=e.noTargetGet?(p=o(t,u))&&p.value:t[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),s(t,u,h,e)}}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n,t){var r=t(2),o=t(17),i=r.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,n,t){var r=t(2),o=t(18),i=t(10),s=t(30),a=t(41),l=t(64),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,n,t,a){var l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof t&&("string"!=typeof n||i(t,"name")||o(t,"name",n),u(t).source=d.join("string"==typeof n?n:"")),e!==r?(l?!h&&e[n]&&(c=!0):delete e[n],c?e[n]=t:o(e,n,t)):c?e[n]=t:s(n,t)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||a(this)})},function(e,n,t){var r,o,i,s=t(65),a=t(2),l=t(17),c=t(18),u=t(10),d=t(66),h=t(43),p=a.WeakMap;if(s){var f=new p,m=f.get,g=f.has,v=f.set;r=function(e,n){return v.call(f,e,n),n},o=function(e){return m.call(f,e)||{}},i=function(e){return g.call(f,e)}}else{var y=d("state");h[y]=!0,r=function(e,n){return c(e,y,n),n},o=function(e){return u(e,y)?e[y]:{}},i=function(e){return u(e,y)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(n){var t;if(!l(n)||(t=o(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}}}},function(e,n,t){var r=t(2),o=t(41),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,n,t){var r=t(67),o=t(69),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,n,t){var r=t(68),o=t(42);(e.exports=function(e,n){return o[e]||(o[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,n){e.exports=!1},function(e,n){var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},function(e,n,t){var r=t(10),o=t(71),i=t(32),s=t(39);e.exports=function(e,n){for(var t=o(n),a=s.f,l=i.f,c=0;c<t.length;c++){var u=t[c];r(e,u)||a(e,u,l(n,u))}}},function(e,n,t){var r=t(72),o=t(73),i=t(48),s=t(40);e.exports=r("Reflect","ownKeys")||function(e){var n=o.f(s(e)),t=i.f;return t?n.concat(t(e)):n}},function(e,n,t){var r=t(44),o=t(2),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,n){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][n]||o[e]&&o[e][n]}},function(e,n,t){var r=t(45),o=t(47).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,n,t){var r=t(29),o=t(75),i=t(76),s=function(e){return function(n,t,s){var a,l=r(n),c=o(l.length),u=i(s,c);if(e&&t!=t){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===t)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,n,t){var r=t(46),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,n,t){var r=t(46),o=Math.max,i=Math.min;e.exports=function(e,n){var t=r(e);return t<0?o(t+n,0):i(t,n)}},function(e,n,t){var r=t(9),o=/#|\.prototype\./,i=function(e,n){var t=a[s(e)];return t==c||t!=l&&("function"==typeof n?r(n):!!n)},s=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=i.data={},l=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},function(e,n,t){"use strict";var r=t(8),o=t(9),i=t(79),s=t(48),a=t(33),l=t(80),c=t(35),u=Object.assign,d=Object.defineProperty;e.exports=!u||o(function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),7!=u({},e)[t]||"abcdefghijklmnopqrst"!=i(u({},n)).join("")})?function(e,n){for(var t=l(e),o=arguments.length,u=1,d=s.f,h=a.f;o>u;)for(var p,f=c(arguments[u++]),m=d?i(f).concat(d(f)):i(f),g=m.length,v=0;g>v;)p=m[v++],r&&!h.call(f,p)||(t[p]=f[p]);return t}:u},function(e,n,t){var r=t(45),o=t(47);e.exports=Object.keys||function(e){return r(e,o)}},function(e,n,t){var r=t(36);e.exports=function(e){return Object(r(e))}},function(e,n){e.exports=function(e){if(!e.webpackPolyfill){var n=Object.create(e);n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,"exports",{enumerable:!0}),n.webpackPolyfill=1}return n}},function(e,n,t){t(31)(t(83))},function(e,n){e.exports="/**\n * https://github.com/csnover/TraceKit\n * @license MIT\n * @namespace TraceKit\n */\n(function (window, undefined) {\n  if (!window) {\n    return;\n  }\n\n  var TraceKit = {};\n  var _oldTraceKit = window.TraceKit; // global reference to slice\n\n  var _slice = [].slice;\n  var UNKNOWN_FUNCTION = '?';\n\n  function _has(object, key) {\n    return Object.prototype.hasOwnProperty.call(object, key);\n  }\n\n  function _isUndefined(what) {\n    return typeof what === 'undefined';\n  }\n\n  TraceKit.noConflict = function noConflict() {\n    window.TraceKit = _oldTraceKit;\n    return TraceKit;\n  };\n\n  TraceKit.computeStackTrace = function computeStackTraceWrapper() {\n    var debug = false,\n        sourceCache = {};\n\n    function getSource(url) {\n      if (typeof url !== 'string') {\n        return [];\n      }\n\n      if (!_has(sourceCache, url)) {\n        var source = '';\n        sourceCache[url] = source ? source.split('\\n') : [];\n      }\n\n      return sourceCache[url];\n    }\n\n    function guessFunctionName(url, lineNo) {\n      var reFunctionArgNames = /function ([^(]*)\\(([^)]*)\\)/,\n          reGuessFunction = /['\"]?([0-9A-Za-z$_]+)['\"]?\\s*[:=]\\s*(function|eval|new Function)/,\n          line = '',\n          maxLines = 10,\n          source = getSource(url),\n          m;\n\n      if (!source.length) {\n        return UNKNOWN_FUNCTION;\n      } // Walk backwards from the first line in the function until we find the line which\n      // matches the pattern above, which is the function definition\n\n\n      for (var i = 0; i < maxLines; ++i) {\n        line = source[lineNo - i] + line;\n\n        if (!_isUndefined(line)) {\n          if (m = reGuessFunction.exec(line)) {\n            return m[1];\n          } else if (m = reFunctionArgNames.exec(line)) {\n            return m[1];\n          }\n        }\n      }\n\n      return UNKNOWN_FUNCTION;\n    }\n\n    function gatherContext(url, line) {\n      var source = getSource(url);\n\n      if (!source.length) {\n        return null;\n      }\n\n      var context = [],\n          // linesBefore & linesAfter are inclusive with the offending line.\n      // if linesOfContext is even, there will be one extra line\n      //   *before* the offending line.\n      linesBefore = Math.floor(TraceKit.linesOfContext / 2),\n          // Add one extra line if linesOfContext is odd\n      linesAfter = linesBefore + TraceKit.linesOfContext % 2,\n          start = Math.max(0, line - linesBefore - 1),\n          end = Math.min(source.length, line + linesAfter - 1);\n      line -= 1; // convert to 0-based index\n\n      for (var i = start; i < end; ++i) {\n        if (!_isUndefined(source[i])) {\n          context.push(source[i]);\n        }\n      }\n\n      return context.length > 0 ? context : null;\n    }\n\n    function escapeRegExp(text) {\n      return text.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#]/g, '\\\\$&');\n    }\n\n    function escapeCodeAsRegExpForMatchingInsideHTML(body) {\n      return escapeRegExp(body).replace('<', '(?:<|&lt;)').replace('>', '(?:>|&gt;)').replace('&', '(?:&|&amp;)').replace('\"', '(?:\"|&quot;)').replace(/\\s+/g, '\\\\s+');\n    }\n\n    function findSourceInUrls(re, urls) {\n      var source, m;\n\n      for (var i = 0, j = urls.length; i < j; ++i) {\n        // console.log('searching', urls[i]);\n        if ((source = getSource(urls[i])).length) {\n          source = source.join('\\n');\n\n          if (m = re.exec(source)) {\n            // console.log('Found function in ' + urls[i]);\n            return {\n              'url': urls[i],\n              'line': source.substring(0, m.index).split('\\n').length,\n              'column': m.index - source.lastIndexOf('\\n', m.index) - 1\n            };\n          }\n        }\n      } // console.log('no match');\n\n\n      return null;\n    }\n\n    function findSourceInLine(fragment, url, line) {\n      var source = getSource(url),\n          re = new RegExp('\\\\b' + escapeRegExp(fragment) + '\\\\b'),\n          m;\n      line -= 1;\n\n      if (source && source.length > line && (m = re.exec(source[line]))) {\n        return m.index;\n      }\n\n      return null;\n    }\n\n    function findSourceByFunctionBody(func) {\n      if (_isUndefined(window && window.document)) {\n        return;\n      }\n\n      var urls = [window.location.href],\n          scripts = window.document.getElementsByTagName('script'),\n          body,\n          code = '' + func,\n          codeRE = /^function(?:\\s+([\\w$]+))?\\s*\\(([\\w\\s,]*)\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n          eventRE = /^function on([\\w$]+)\\s*\\(event\\)\\s*\\{\\s*(\\S[\\s\\S]*\\S)\\s*\\}\\s*$/,\n          re,\n          parts,\n          result;\n\n      for (var i = 0; i < scripts.length; ++i) {\n        var script = scripts[i];\n\n        if (script.src) {\n          urls.push(script.src);\n        }\n      }\n\n      if (!(parts = codeRE.exec(code))) {\n        re = new RegExp(escapeRegExp(code).replace(/\\s+/g, '\\\\s+'));\n      } // not sure if this is really necessary, but I don’t have a test\n      // corpus large enough to confirm that and it was in the original.\n      else {\n          var name = parts[1] ? '\\\\s+' + parts[1] : '',\n              args = parts[2].split(',').join('\\\\s*,\\\\s*');\n          body = escapeRegExp(parts[3]).replace(/;$/, ';?'); // semicolon is inserted if the function ends with a comment.replace(/\\s+/g, '\\\\s+');\n\n          re = new RegExp('function' + name + '\\\\s*\\\\(\\\\s*' + args + '\\\\s*\\\\)\\\\s*{\\\\s*' + body + '\\\\s*}');\n        } // look for a normal function definition\n\n\n      if (result = findSourceInUrls(re, urls)) {\n        return result;\n      } // look for an old-school event handler function\n\n\n      if (parts = eventRE.exec(code)) {\n        var event = parts[1];\n        body = escapeCodeAsRegExpForMatchingInsideHTML(parts[2]); // look for a function defined in HTML as an onXXX handler\n\n        re = new RegExp('on' + event + '=[\\\\\\'\"]\\\\s*' + body + '\\\\s*[\\\\\\'\"]', 'i');\n\n        if (result = findSourceInUrls(re, urls[0])) {\n          return result;\n        } // look for ???\n\n\n        re = new RegExp(body);\n\n        if (result = findSourceInUrls(re, urls)) {\n          return result;\n        }\n      }\n\n      return null;\n    }\n\n    function computeStackTraceFromStackProp(ex) {\n      if (!ex.stack) {\n        return null;\n      }\n\n      var chrome = /^\\s*at (.*?) ?\\(((?:file|https?|\\s*|blob|chrome-extension|native|webpack|eval).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n          gecko = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\\[native).*?)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n          winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n          lines = ex.stack.split('\\n'),\n          stack = [],\n          parts,\n          element,\n          reference = /^(.*) is undefined$/.exec(ex.message);\n\n      for (var i = 0, j = lines.length; i < j; ++i) {\n        if (parts = chrome.exec(lines[i])) {\n          var isNative = parts[2] && parts[2].indexOf('native') !== -1;\n          element = {\n            'url': !isNative ? parts[2] : null,\n            'func': parts[1] || UNKNOWN_FUNCTION,\n            'args': isNative ? [parts[2]] : [],\n            'line': parts[3] ? +parts[3] : null,\n            'column': parts[4] ? +parts[4] : null\n          };\n        } else if (parts = winjs.exec(lines[i])) {\n          element = {\n            'url': parts[2],\n            'func': parts[1] || UNKNOWN_FUNCTION,\n            'args': [],\n            'line': +parts[3],\n            'column': parts[4] ? +parts[4] : null\n          };\n        } else if (parts = gecko.exec(lines[i])) {\n          element = {\n            'url': parts[3],\n            'func': parts[1] || UNKNOWN_FUNCTION,\n            'args': parts[2] ? parts[2].split(',') : [],\n            'line': parts[4] ? +parts[4] : null,\n            'column': parts[5] ? +parts[5] : null\n          };\n        } else {\n          continue;\n        }\n\n        if (!element.func && element.line) {\n          element.func = guessFunctionName(element.url, element.line);\n        }\n\n        if (element.line) {\n          element.context = gatherContext(element.url, element.line);\n        }\n\n        stack.push(element);\n      }\n\n      if (!stack.length) {\n        return null;\n      }\n\n      if (stack[0] && stack[0].line && !stack[0].column && reference) {\n        stack[0].column = findSourceInLine(reference[1], stack[0].url, stack[0].line);\n      } else if (!stack[0].column && !_isUndefined(ex.columnNumber)) {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        stack[0].column = ex.columnNumber + 1;\n      }\n\n      return {\n        'mode': 'stack',\n        'name': ex.name,\n        'message': ex.message,\n        'stack': stack\n      };\n    }\n\n    function computeStackTraceFromStacktraceProp(ex) {\n      // Access and store the stacktrace property before doing ANYTHING\n      // else to it because Opera is not very good at providing it\n      // reliably in other circumstances.\n      var stacktrace = ex.stacktrace;\n\n      if (!stacktrace) {\n        return;\n      }\n\n      var opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i,\n          opera11Regex = / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^\\)]+))\\((.*)\\))? in (.*):\\s*$/i,\n          lines = stacktrace.split('\\n'),\n          stack = [],\n          parts;\n\n      for (var line = 0; line < lines.length; line += 2) {\n        var element = null;\n\n        if (parts = opera10Regex.exec(lines[line])) {\n          element = {\n            'url': parts[2],\n            'line': +parts[1],\n            'column': null,\n            'func': parts[3],\n            'args': []\n          };\n        } else if (parts = opera11Regex.exec(lines[line])) {\n          element = {\n            'url': parts[6],\n            'line': +parts[1],\n            'column': +parts[2],\n            'func': parts[3] || parts[4],\n            'args': parts[5] ? parts[5].split(',') : []\n          };\n        }\n\n        if (element) {\n          if (!element.func && element.line) {\n            element.func = guessFunctionName(element.url, element.line);\n          }\n\n          if (element.line) {\n            try {\n              element.context = gatherContext(element.url, element.line);\n            } catch (exc) {}\n          }\n\n          if (!element.context) {\n            element.context = [lines[line + 1]];\n          }\n\n          stack.push(element);\n        }\n      }\n\n      if (!stack.length) {\n        return null;\n      }\n\n      return {\n        'mode': 'stacktrace',\n        'name': ex.name,\n        'message': ex.message,\n        'stack': stack\n      };\n    }\n\n    function computeStackTraceFromOperaMultiLineMessage(ex) {\n      // TODO: Clean this function up\n      var lines = ex.message.split('\\n');\n\n      if (lines.length < 4) {\n        return null;\n      }\n\n      var lineRE1 = /^\\s*Line (\\d+) of linked script ((?:file|https?|blob)\\S+)(?:: in function (\\S+))?\\s*$/i,\n          lineRE2 = /^\\s*Line (\\d+) of inline#(\\d+) script in ((?:file|https?|blob)\\S+)(?:: in function (\\S+))?\\s*$/i,\n          lineRE3 = /^\\s*Line (\\d+) of function script\\s*$/i,\n          stack = [],\n          scripts = window && window.document && window.document.getElementsByTagName('script'),\n          inlineScriptBlocks = [],\n          parts;\n\n      for (var s in scripts) {\n        if (_has(scripts, s) && !scripts[s].src) {\n          inlineScriptBlocks.push(scripts[s]);\n        }\n      }\n\n      for (var line = 2; line < lines.length; line += 2) {\n        var item = null;\n\n        if (parts = lineRE1.exec(lines[line])) {\n          item = {\n            'url': parts[2],\n            'func': parts[3],\n            'args': [],\n            'line': +parts[1],\n            'column': null\n          };\n        } else if (parts = lineRE2.exec(lines[line])) {\n          item = {\n            'url': parts[3],\n            'func': parts[4],\n            'args': [],\n            'line': +parts[1],\n            'column': null // TODO: Check to see if inline#1 (+parts[2]) points to the script number or column number.\n\n          };\n          var relativeLine = +parts[1]; // relative to the start of the <SCRIPT> block\n\n          var script = inlineScriptBlocks[parts[2] - 1];\n\n          if (script) {\n            var source = getSource(item.url);\n\n            if (source) {\n              source = source.join('\\n');\n              var pos = source.indexOf(script.innerText);\n\n              if (pos >= 0) {\n                item.line = relativeLine + source.substring(0, pos).split('\\n').length;\n              }\n            }\n          }\n        } else if (parts = lineRE3.exec(lines[line])) {\n          var url = window.location.href.replace(/#.*$/, '');\n          var re = new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[line + 1]));\n          var src = findSourceInUrls(re, [url]);\n          item = {\n            'url': url,\n            'func': '',\n            'args': [],\n            'line': src ? src.line : parts[1],\n            'column': null\n          };\n        }\n\n        if (item) {\n          if (!item.func) {\n            item.func = guessFunctionName(item.url, item.line);\n          }\n\n          var context = gatherContext(item.url, item.line);\n          var midline = context ? context[Math.floor(context.length / 2)] : null;\n\n          if (context && midline.replace(/^\\s*/, '') === lines[line + 1].replace(/^\\s*/, '')) {\n            item.context = context;\n          } else {\n            // if (context) alert(\"Context mismatch. Correct midline:\\n\" + lines[i+1] + \"\\n\\nMidline:\\n\" + midline + \"\\n\\nContext:\\n\" + context.join(\"\\n\") + \"\\n\\nURL:\\n\" + item.url);\n            item.context = [lines[line + 1]];\n          }\n\n          stack.push(item);\n        }\n      }\n\n      if (!stack.length) {\n        return null; // could not parse multiline exception message as Opera stack trace\n      }\n\n      return {\n        'mode': 'multiline',\n        'name': ex.name,\n        'message': lines[0],\n        'stack': stack\n      };\n    }\n\n    function augmentStackTraceWithInitialElement(stackInfo, url, lineNo, message) {\n      var initial = {\n        'url': url,\n        'line': lineNo\n      };\n\n      if (initial.url && initial.line) {\n        stackInfo.incomplete = false;\n\n        if (!initial.func) {\n          initial.func = guessFunctionName(initial.url, initial.line);\n        }\n\n        if (!initial.context) {\n          initial.context = gatherContext(initial.url, initial.line);\n        }\n\n        var reference = / '([^']+)' /.exec(message);\n\n        if (reference) {\n          initial.column = findSourceInLine(reference[1], initial.url, initial.line);\n        }\n\n        if (stackInfo.stack.length > 0) {\n          if (stackInfo.stack[0].url === initial.url) {\n            if (stackInfo.stack[0].line === initial.line) {\n              return false; // already in stack trace\n            } else if (!stackInfo.stack[0].line && stackInfo.stack[0].func === initial.func) {\n              stackInfo.stack[0].line = initial.line;\n              stackInfo.stack[0].context = initial.context;\n              return false;\n            }\n          }\n        }\n\n        stackInfo.stack.unshift(initial);\n        stackInfo.partial = true;\n        return true;\n      } else {\n        stackInfo.incomplete = true;\n      }\n\n      return false;\n    }\n\n    function computeStackTraceByWalkingCallerChain(ex, depth) {\n      var functionName = /function\\s+([_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*)?\\s*\\(/i,\n          stack = [],\n          funcs = {},\n          recursion = false,\n          parts,\n          item,\n          source;\n\n      for (var curr = computeStackTraceByWalkingCallerChain.caller; curr && !recursion; curr = curr.caller) {\n        if (curr === computeStackTrace || curr === TraceKit.report) {\n          // console.log('skipping internal function');\n          continue;\n        }\n\n        item = {\n          'url': null,\n          'func': UNKNOWN_FUNCTION,\n          'args': [],\n          'line': null,\n          'column': null\n        };\n\n        if (curr.name) {\n          item.func = curr.name;\n        } else if (parts = functionName.exec(curr.toString())) {\n          item.func = parts[1];\n        }\n\n        if (typeof item.func === 'undefined') {\n          try {\n            item.func = parts.input.substring(0, parts.input.indexOf('{'));\n          } catch (e) {}\n        }\n\n        if (source = findSourceByFunctionBody(curr)) {\n          item.url = source.url;\n          item.line = source.line;\n\n          if (item.func === UNKNOWN_FUNCTION) {\n            item.func = guessFunctionName(item.url, item.line);\n          }\n\n          var reference = / '([^']+)' /.exec(ex.message || ex.description);\n\n          if (reference) {\n            item.column = findSourceInLine(reference[1], source.url, source.line);\n          }\n        }\n\n        if (funcs['' + curr]) {\n          recursion = true;\n        } else {\n          funcs['' + curr] = true;\n        }\n\n        stack.push(item);\n      }\n\n      if (depth) {\n        // console.log('depth is ' + depth);\n        // console.log('stack is ' + stack.length);\n        stack.splice(0, depth);\n      }\n\n      var result = {\n        'mode': 'callers',\n        'name': ex.name,\n        'message': ex.message,\n        'stack': stack\n      };\n      augmentStackTraceWithInitialElement(result, ex.sourceURL || ex.fileName, ex.line || ex.lineNumber, ex.message || ex.description);\n      return result;\n    }\n\n    function computeStackTrace(ex, depth) {\n      var stack = null;\n      depth = depth == null ? 0 : +depth;\n\n      try {\n        // This must be tried first because Opera 10 *destroys*\n        // its stacktrace property if you try to access the stack\n        // property first!!\n        stack = computeStackTraceFromStacktraceProp(ex);\n\n        if (stack) {\n          return stack;\n        }\n      } catch (e) {\n        if (debug) {\n          throw e;\n        }\n      }\n\n      try {\n        stack = computeStackTraceFromStackProp(ex);\n\n        if (stack) {\n          return stack;\n        }\n      } catch (e) {\n        if (debug) {\n          throw e;\n        }\n      }\n\n      try {\n        stack = computeStackTraceFromOperaMultiLineMessage(ex);\n\n        if (stack) {\n          return stack;\n        }\n      } catch (e) {\n        if (debug) {\n          throw e;\n        }\n      }\n\n      try {\n        stack = computeStackTraceByWalkingCallerChain(ex, depth + 1);\n\n        if (stack) {\n          return stack;\n        }\n      } catch (e) {\n        if (debug) {\n          throw e;\n        }\n      }\n\n      return {\n        'mode': 'failed'\n      };\n    }\n\n    function computeStackTraceOfCaller(depth) {\n      depth = (depth == null ? 0 : +depth) + 1; // \"+ 1\" because \"ofCaller\" should drop one frame\n\n      try {\n        throw new Error();\n      } catch (ex) {\n        return computeStackTrace(ex, depth + 1);\n      }\n    }\n\n    computeStackTrace.augmentStackTraceWithInitialElement = augmentStackTraceWithInitialElement;\n    computeStackTrace.guessFunctionName = guessFunctionName;\n    computeStackTrace.gatherContext = gatherContext;\n    computeStackTrace.ofCaller = computeStackTraceOfCaller;\n    computeStackTrace.getSource = getSource;\n    return computeStackTrace;\n  }();\n\n  window.TraceKit = TraceKit;\n})(typeof window !== 'undefined' ? window : global);"},function(e,n,t){"use strict";var r=t(4),o=t(24),i=t(26),s=t(11),a=t(22),l=t(23),c=t(5),u=t(12),d=t(25),h=t(7),p=t(1),f=t(21),m=t(20),g=t(13),v=t(28),y=t(27),b=t(6);window.RC.Logger=r.a,window.RC.TraceKit=s.a.TraceKit,window.RC.player=window.RC.player||{},window.RC.player.Player=o.a,window.RC.player.XhrSimulator=i.a,window.RC.trace=window.RC.trace||{},window.RC.trace.Tracer=s.a,window.RC.ui=window.RC.ui||{},window.RC.ui.ConfirmationDialog=a.a,window.RC.ui.FeedbackButton=l.a,window.RC.ui.Toast=c.a,window.RC.util=window.RC.util||{},window.RC.util.Ajax=u.a,window.RC.util.Cookie=d.a,window.RC.util.Dom=h.a,window.RC.util.Function=p.a,window.RC.util.Serializer=f.a,window.RC.util.Touch=m.a,window.RC.util.Url=g.a,window.RC.util.Uuid=v.a,window.RC.util.Value=y.a,window.RC.video=window.RC.video||{},window.RC.video.recorder=window.RC.video.recorder||{},window.RC.video.recorder.TreeMirrorProducer=b.b,window.RC.video.recorder.TreeMirrorConsumer=b.a,window.RC.video.recorder.VideoRecordingMessage=b.c,window.RC.plugin=window.RC.plugin||[],window.RC.plugin.Angular=function e(n,t){function r(e,n){return function(e,r){t.logException(e,{data:{cause:r}}),n(e,r)}}!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.apply(this,n);var o=this.angular||window.angular;o&&o.module("ngRootCause",[]).provider("RootCause",function(){this.$get=["$window",function(e){return t}]}).config(["$provide",function(e){e.decorator("$exceptionHandler",["RootCause","$delegate",r])}])},window.RC.ErrorLogger=r.a},function(e,n,t){"use strict";e.exports=function(e,n,t,r){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==t;){t-=s=t>2e3?2e3:t;do{i=i+(o=o+n[r++]|0)|0}while(--s);o%=65521,i%=65521}return o|i<<16|0}},function(e,n,t){"use strict";var r=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();e.exports=function(e,n,t,o){var i=r,s=o+t;e^=-1;for(var a=o;a<s;a++)e=e>>>8^i[255&(e^n[a])];return-1^e}},function(e,n,t){"use strict";function r(e,n){if(n<65534&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,n));for(var t="",r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t}var o=t(15),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var a=new o.Buf8(256),l=0;l<256;l++)a[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;a[254]=a[254]=1,n.string2buf=function(e){var n,t,r,i,s,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new o.Buf8(l),s=0,i=0;s<l;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),t<128?n[s++]=t:t<2048?(n[s++]=192|t>>>6,n[s++]=128|63&t):t<65536?(n[s++]=224|t>>>12,n[s++]=128|t>>>6&63,n[s++]=128|63&t):(n[s++]=240|t>>>18,n[s++]=128|t>>>12&63,n[s++]=128|t>>>6&63,n[s++]=128|63&t);return n},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var n=new o.Buf8(e.length),t=0,r=n.length;t<r;t++)n[t]=e.charCodeAt(t);return n},n.buf2string=function(e,n){var t,o,i,s,l=n||e.length,c=new Array(2*l);for(o=0,t=0;t<l;)if((i=e[t++])<128)c[o++]=i;else if((s=a[i])>4)c[o++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&t<l;)i=i<<6|63&e[t++],s--;s>1?c[o++]=65533:i<65536?c[o++]=i:(i-=65536,c[o++]=55296|i>>10&1023,c[o++]=56320|1023&i)}return r(c,o)},n.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?n:t+a[e[t]]>n?t:n}},function(e,n,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,n,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,n,t){"use strict";var r={init:function(e){this.SUPER(e),this.sources={},this.isElectron=window.process&&window.process.versions&&window.process.versions.electron},collectCrashData:function(e,n){var t=this;if(!t.isElectron)return t.SUPER(e,n);t.SUPER(e,function(e){t.extractFileSources(e,function(){n.call(t,e)})})},extractFileSources:function(e,n){e.stackFrames=e.stackFrames||[];var t=this,r=0,o=e.stackFrames.filter(function(e){return e.url&&(0===e.url.indexOf("file://")||0===e.url.indexOf("/")||0===e.url.indexOf("\\\\")||e.url.match(/^[A-Z]/))}).map(function(e){return e.url}),i=function(e,n){t.sources[e]=t.sources[e]||{},n&&(t.sources[e].file=n,function(e,n){var o=n.match("//# [s]ourceMappingURL=(.*)[\\s]*$","m");if(o&&2===o.length){var i=o[1],a=i.match("data:application/json;(charset=[^;]+;)?base64,(.*)");if(a&&a[2])t.sources[e].map=atob(a[2]);else{if(!new RegExp("^(?:[a-z]+:)?//","i").test(i)){var l=e.lastIndexOf("/");-1!==l&&(i=e.slice(0,l+1)+i)}var c=i;0===i.indexOf("file://")&&(c=i.substring(7)),window.require("fs").readFile(c,"utf-8",function(n,t){s(e,t)}),r+=1}}}(e,n)),r-=1,a()},s=function(e,n){t.sources[e]=t.sources[e]||{},n&&(t.sources[e].map=n),r-=1,a()},a=function(){0===r&&l()},l=function(){var r={};o.forEach(function(e){t.sources[e]&&(r[e]=t.sources[e])}),e.sourceCode=r,n()};o.filter(function(e,n,t){return t.indexOf(e)===n}).forEach(function(e){if(!t.sources[e]){var n=e;0===e.indexOf("file://")&&(n=e.substring(7)),window.require("fs").readFile(n,"utf-8",function(n,t){i(e,t)}),r+=1}}),a()}};n.a=r},function(e,n,t){"use strict";var r=t(92),o=t.n(r),i={supportOffline:!1,maxItemsInLocalStorage:5,checkOnlineIntervalInSeconds:60,checkOnlineInterval:6e4,afterPageLoadRetryDelay:2e4,maxDays:7,init:function(e){var n=this;n.SUPER(e),n.queue=[],n.isRetrying=!1,n.supportOffline&&(n.loadFromLocalStorage(),setInterval(function(){n.processQueue()},n.checkOnlineInterval),setTimeout(function(){n.processQueue()},n.afterPageLoadRetryDelay),window.addEventListener("online",function(){n.processQueue()}))},getDate:function(){return(new Date).getTime()},onLogFailed:function(e,n){var t,r=this;return r.supportOffline&&(r.allVideoData&&(t=btoa(o.a.gzip(JSON.stringify(r.allVideoData.slice()),{to:"string"}))),r.addToQueue({url:r.logUrl,data:n,fullVideo:t,createdAt:r.getDate()})),r.SUPER(e,n)},addToQueue:function(e){this.queue.push(e),this.saveToLocalStorage()},processQueue:function(){if(navigator.onLine){var e=this.queue[this.queue.length-1];if(e&&!this.isRetrying){this.isRetrying=!0;var n=function(){this.queue=this.queue.filter(function(n){return n!==e}),this.isRetrying=!1,this.saveToLocalStorage()}.bind(this),t=function(){this.logToConsole("Failed to send an error report. Will retry again later."),this.isRetrying=!1}.bind(this),r=function(){RC.util.Ajax.request(e.url,RC.apply(e.data,{offline:!0,fullVideo:e.fullVideo}),"POST",function(e){var r=!0;try{var o=JSON.parse(e);o&&"success"in o&&(r=o.success)}catch(e){r=!1}r?n():t()},function(e){t()})};this.isElectron?this.extractFileSources(e.data,function(){r()}):r()}}},saveToLocalStorage:function(){limitedQueue=this.queue.slice(-this.maxItemsInLocalStorage);for(var e=0;e<this.maxItemsInLocalStorage;e++){var n=limitedQueue[e],t={};RC.apply(t,n),delete t.sourceCode;var r="RC"+e;try{localStorage.setItem(r,JSON.stringify(t||null))}catch(e){this.logToConsole("Failed to save to local storage")}}},loadFromLocalStorage:function(){for(var e=0;e<this.maxItemsInLocalStorage;e++){var n,t="RC"+e;try{var r=localStorage.getItem(t);n=JSON.parse(r)}catch(e){}n&&n.createdAt<this.getDate()+1e3*this.maxDays*86400&&this.queue.push(n)}}};n.a=i},function(e,n,t){"use strict";var r={};(0,t(15).assign)(r,t(101),t(104),t(89)),e.exports=r},function(e,n,t){"use strict";var r=t(94),o=(t(109),{captureScreenshot:!1,screenshots:[],blurredNodes:null,blackoutSelector:null,onBeforeScreenshot:null,onAfterScreenshot:null,screenshot:function(e,n,t){var r=this;r.onBeforeScreenshot&&r.onBeforeScreenshot(),r.blurTargets();try{r.doScreenshot(e,n,t)}catch(e){if(r.debug)throw e;this.addLogEntry({type:"error",message:e.message+" - "+e.stack}),r.clearBlurTargets(),r.onAfterScreenshot&&r.onAfterScreenshot(),n&&n.call(r,null,e)}},doScreenshot:function(e,n,t){var o=this;o.isElectron?window.require("electron").remote.getCurrentWebContents().capturePage(function(n){var r=n.toDataURL("image/png"),i=new Image;i.src=n.toDataURL();var s=document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),t&&o.injectMarker(s),o.clearBlurTargets(),o.onAfterScreenshot&&o.onAfterScreenshot(),e&&e.call(o,r)}):Object(r.a)(o.getDocument().body,{type:"view",onrendered:function(n){t&&o.injectMarker(n);var r=n.toDataURL("image/png");o.clearBlurTargets(),o.onAfterScreenshot&&o.onAfterScreenshot(),e&&e.call(o,r)}})},injectMarker:function(e){if(this.recorder&&this.recorder.getLastEvent()){var n=this.recorder.getLastEvent();if(n){var t=this.recorder.getRecordedEvents(),r=t[t.length-2];r&&0===n.x&&0===n.y&&"click"===n.type&&r.type.match("key")&&(n=r);var o=n.type;if(/^key/.test(n.type)&&"string"==typeof n.rawEvent.key&&(o=o+" - "+n.rawEvent.key),"number"==typeof n.x){var i=Math.max(n.x,10),s=Math.max(n.y,30);this.drawCrosshair(e,i,s),this.drawText(e,"{ "+o+" }",i+20,s-30)}else{var a=n.target.getBoundingClientRect(),l=a.top;this.drawBox(e,a),l=l>30?a.top-30:a.bottom+5,this.drawText(e,"{ "+o+" }",a.left,l)}}}},drawCrosshair:function(e,n,t){var r=e.getContext("2d"),o=document.scrollingElement||document.documentElement,i=n-o.scrollLeft,s=t-o.scrollTop;r.lineWidth=2,r.strokeStyle="#8b0000",r.beginPath(),r.arc(i,s,15,0,2*Math.PI,!1),r.stroke(),r.moveTo(i-19,s),r.lineTo(i-11,s),r.moveTo(i+11,s),r.lineTo(i+19,s),r.moveTo(i,s-19),r.lineTo(i,s-11),r.moveTo(i,s+11),r.lineTo(i,s+19),r.stroke()},drawBox:function(e,n){var t=e.getContext("2d"),r=document.scrollingElement||document.documentElement;t.lineWidth=2,t.strokeStyle="#8b0000",t.strokeRect(n.left-r.scrollLeft,n.top-r.scrollTop,n.width,n.height)},drawText:function(e,n,t,r){var o=e.getContext("2d"),i=document.scrollingElement||document.documentElement,s=t-i.scrollLeft,a=r-i.scrollTop;o.lineWidth=2,o.strokeStyle="#fff",o.font="normal 14pt monospace",o.textBaseline="top",o.fillStyle="#fff";var l=o.measureText(n).width;o.fillRect(s,a,l,parseInt(o.font,10)+3),o.fillStyle="#8b0000",o.fillText(n,s,a)},blurTargets:function(){var e=this.blackoutSelector;if(e)try{(this.blurredNodes=this.getDocument().querySelectorAll(e)).forEach(function(e){e.oldCssText=e.style.cssText,e.style.cssText="visibility:hidden !important"})}catch(e){if(this.debug)throw e;this.logToConsole(e)}},clearBlurTargets:function(){var e=this.blurredNodes||[];try{e.forEach(function(e){e.style.cssText=e.oldCssText,delete e.oldCssText})}catch(e){if(this.debug)throw e;this.logToConsole(e)}this.blurredNodes=null},reset:function(){this.screenshots=[],this.SUPER()},collectCrashData:function(e,n){var t=this,r="siesta-recorder"===t.applicationId&&!location.href.match("bryntum.com");this.SUPER(e,function(e){if(r||!t.captureScreenshot&&!e.isFeedback)n.call(t,e);else{t.pause();var o=function(r){t.resume(),r&&(t.screenshots.push(r),e.screenshot=r),n.call(t,e)};t.screenshot(o,o,!e.isFeedback)}})},onLogCompleted:function(){return this.screenshots=[],this.SUPER.apply(this,arguments)}});n.a=o},function(e,n,t){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};n[s][0].call(c.exports,function(e){return o(n[s][1][e]||e)},c,c.exports,e,n,t,r)}return t[s].exports}for(var i=!1,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(n,r,o){(function(e){!function(n){function i(e){throw RangeError(C[e])}function s(e,n){for(var t=e.length;t--;)e[t]=n(e[t]);return e}function a(e,n){return s(e.split(E),n).join(".")}function l(e){for(var n,t,r=[],o=0,i=e.length;o<i;)(n=e.charCodeAt(o++))>=55296&&n<=56319&&o<i?56320==(64512&(t=e.charCodeAt(o++)))?r.push(((1023&n)<<10)+(1023&t)+65536):(r.push(n),o--):r.push(n);return r}function c(e){return s(e,function(e){var n="";return e>65535&&(n+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=k(e)}).join("")}function u(e,n){return e+22+75*(e<26)-((0!=n)<<5)}function d(e,n,t){var r=0;for(e=t?S(e/700):e>>1,e+=S(e/n);e>455;r+=36)e=S(e/35);return S(r+36*e/(e+38))}function h(e){var n,t,r,o,s,a,l,u,h,p,f,m=[],g=e.length,v=0,y=128,w=72;for((t=e.lastIndexOf("-"))<0&&(t=0),r=0;r<t;++r)e.charCodeAt(r)>=128&&i("not-basic"),m.push(e.charCodeAt(r));for(o=t>0?t+1:0;o<g;){for(s=v,a=1,l=36;o>=g&&i("invalid-input"),((u=(f=e.charCodeAt(o++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>S((b-v)/a))&&i("overflow"),v+=u*a,!(u<(h=l<=w?1:l>=w+26?26:l-w));l+=36)a>S(b/(p=36-h))&&i("overflow"),a*=p;w=d(v-s,n=m.length+1,0==s),S(v/n)>b-y&&i("overflow"),y+=S(v/n),v%=n,m.splice(v++,0,y)}return c(m)}function p(e){var n,t,r,o,s,a,c,h,p,f,m,g,v,y,w,x=[];for(g=(e=l(e)).length,n=128,t=0,s=72,a=0;a<g;++a)(m=e[a])<128&&x.push(k(m));for(r=o=x.length,o&&x.push("-");r<g;){for(c=b,a=0;a<g;++a)(m=e[a])>=n&&m<c&&(c=m);for(c-n>S((b-t)/(v=r+1))&&i("overflow"),t+=(c-n)*v,n=c,a=0;a<g;++a)if((m=e[a])<n&&++t>b&&i("overflow"),m==n){for(h=t,p=36;!(h<(f=p<=s?1:p>=s+26?26:p-s));p+=36)w=h-f,y=36-f,x.push(k(u(f+w%y,0))),h=S(w/y);x.push(k(u(h,0))),s=d(t,v,r==o),t=0,++r}++t,++n}return x.join("")}var f="object"==t(o)&&o,m="object"==t(r)&&r&&r.exports==f&&r,g="object"==t(e)&&e;g.global!==g&&g.window!==g||(n=g);var v,y,b=2147483647,w=/^xn--/,x=/[^ -~]/,E=/\x2E|\u3002|\uFF0E|\uFF61/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=Math.floor,k=String.fromCharCode;if(v={version:"1.2.4",ucs2:{decode:l,encode:c},decode:h,encode:p,toASCII:function(e){return a(e,function(e){return x.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return a(e,function(e){return w.test(e)?h(e.slice(4).toLowerCase()):e})}},f&&!f.nodeType)if(m)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(f[y]=v[y]);else n.punycode=v}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){function r(e,n){for(var t=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||t.appendChild(r(i,n)),i=i.nextSibling;return 1===e.nodeType&&(t._scrollTop=e.scrollTop,t._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?function(e,n){try{n&&(n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(n){o("Unable to copy canvas content from",e,n)}}(e,t):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(t.value=e.value)),t}var o=e("./log");n.exports=function(e,n,t,o,i,s,a){var l=r(e.documentElement,i.javascriptEnabled),c=n.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=t,c.height=o,c.scrolling="no",n.body.appendChild(c),new Promise(function(n){var t=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var e=setInterval(function(){t.body.childNodes.length>0&&(function e(n){if(1===n.nodeType){n.scrollTop=n._scrollTop,n.scrollLeft=n._scrollLeft;for(var t=n.firstChild;t;)e(t),t=t.nextSibling}}(t.documentElement),clearInterval(e),"view"===i.type&&(c.contentWindow.scrollTo(s,a),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.contentWindow.scrollY===a&&c.contentWindow.scrollX===s||(t.documentElement.style.top=-a+"px",t.documentElement.style.left=-s+"px",t.documentElement.style.position="absolute")),n(c))},50)},t.open(),t.write("<!DOCTYPE html><html></html>"),function(e,n,t){!e.defaultView||n===e.defaultView.pageXOffset&&t===e.defaultView.pageYOffset||e.defaultView.scrollTo(n,t)}(e,s,a),t.replaceChild(t.adoptNode(l),t.documentElement),t.close()})}},{"./log":13}],3:[function(e,n,t){function r(e){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}r.prototype.darken=function(e){var n=1-e;return new r([Math.round(this.r*n),Math.round(this.g*n),Math.round(this.b*n),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var o=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(e){var n;return null!==(n=e.match(o))&&(this.r=parseInt(n[1][0]+n[1][0],16),this.g=parseInt(n[1][1]+n[1][1],16),this.b=parseInt(n[1][2]+n[1][2],16)),null!==n};var i=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(e){var n=null;return null!==(n=e.match(i))&&(this.r=parseInt(n[1].substring(0,2),16),this.g=parseInt(n[1].substring(2,4),16),this.b=parseInt(n[1].substring(4,6),16)),null!==n};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(e){var n;return null!==(n=e.match(s))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3])),null!==n};var a=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(e){var n;return null!==(n=e.match(a))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3]),this.a=Number(n[4])),null!==n},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(e){e=e.toLowerCase();var n=l[e];if(n)this.r=n[0],this.g=n[1],this.b=n[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!n},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};n.exports=r},{}],4:[function(e,n,t){function r(e,n){var t,r,i=g++;if((n=n||{}).logging&&(d.options.logging=!0,d.options.start=Date.now()),n.async=void 0===n.async||n.async,n.allowTaint=void 0!==n.allowTaint&&n.allowTaint,n.removeContainer=void 0===n.removeContainer||n.removeContainer,n.javascriptEnabled=void 0!==n.javascriptEnabled&&n.javascriptEnabled,n.imageTimeout=void 0===n.imageTimeout?1e4:n.imageTimeout,n.renderer="function"==typeof n.renderer?n.renderer:a,n.strict=!!n.strict,"string"==typeof e){if("string"!=typeof n.proxy)return Promise.reject("Proxy must be used when rendering url");var s=null!=n.width?n.width:window.innerWidth,l=null!=n.height?n.height:window.innerHeight;return f((t=e,r=document.createElement("a"),r.href=t,r.href=r.href,r),n.proxy,document,s,l,n).then(function(e){return o(e.contentWindow.document.documentElement,e,n,s,l)})}var c=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return c.setAttribute("data-html2canvas-node"+i,i),function(e,n,t,r,i){return p(e,e,t,r,n,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(s){d("Document cloned");var a="data-html2canvas-node"+i,l="["+a+"='"+i+"']";e.querySelector(l).removeAttribute(a);var c=s.contentWindow,u=c.document.querySelector(l);return("function"==typeof n.onclone?Promise.resolve(n.onclone(c.document)):Promise.resolve(!0)).then(function(){return o(u,s,n,t,r)})})}(c.ownerDocument,n,c.ownerDocument.defaultView.innerWidth,c.ownerDocument.defaultView.innerHeight,i).then(function(e){return"function"==typeof n.onrendered&&(d("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),n.onrendered(e)),e})}function o(e,n,t,r,o){var a,u=n.contentWindow,h=new s(u.document),p=new l(t,h),f=m(e),g="view"===t.type?r:(a=u.document,Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))),v="view"===t.type?o:function(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}(u.document),y=new t.renderer(g,v,p,t,document);return new c(e,y,h,p,t).ready.then(function(){var r;return d("Finished rendering"),r="view"===t.type?i(y.canvas,{width:y.canvas.width,height:y.canvas.height,top:0,left:0,x:0,y:0}):e===u.document.body||e===u.document.documentElement||null!=t.canvas?y.canvas:i(y.canvas,{width:null!=t.width?t.width:f.width,height:null!=t.height?t.height:f.height,top:f.top,left:f.left,x:0,y:0}),function(e,n){t.removeContainer&&(e.parentNode.removeChild(e),d("Cleaned up container"))}(n),r})}function i(e,n){var t=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,n.left)),o=Math.min(e.width,Math.max(1,n.left+n.width)),i=Math.min(e.height-1,Math.max(0,n.top)),s=Math.min(e.height,Math.max(1,n.top+n.height));t.width=n.width,t.height=n.height;var a=o-r,l=s-i;return d("Cropping canvas at:","left:",n.left,"top:",n.top,"width:",a,"height:",l),d("Resulting crop with width",n.width,"and height",n.height,"with x",r,"and y",i),t.getContext("2d").drawImage(e,r,i,a,l,n.x,n.y,a,l),t}var s=e("./support"),a=e("./renderers/canvas"),l=e("./imageloader"),c=e("./nodeparser"),u=e("./nodecontainer"),d=e("./log"),h=e("./utils"),p=e("./clone"),f=e("./proxy").loadUrlDocument,m=h.getBounds,g=0;r.CanvasRenderer=a,r.NodeContainer=u,r.log=d,r.utils=h;var v="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;n.exports=v},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,n,t){var r=e("./log"),o=e("./utils").smallImage;n.exports=function e(n){if(this.src=n,r("DummyImageContainer for",n),!this.promise||!this.image){r("Initiating DummyImageContainer"),e.prototype.image=new Image;var t=this.image;e.prototype.promise=new Promise(function(e,n){t.onload=e,t.onerror=n,t.src=o(),!0===t.complete&&e(t)})}}},{"./log":13,"./utils":26}],6:[function(e,n,t){var r=e("./utils").smallImage;n.exports=function(e,n){var t,o,i=document.createElement("div"),s=document.createElement("img"),a=document.createElement("span");i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),s.src=r(),s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode("Hidden Text")),i.appendChild(a),i.appendChild(s),t=s.offsetTop-a.offsetTop+1,i.removeChild(a),i.appendChild(document.createTextNode("Hidden Text")),i.style.lineHeight="normal",s.style.verticalAlign="super",o=s.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=t,this.lineWidth=1,this.middle=o}},{"./utils":26}],7:[function(e,n,t){function r(){this.data={}}var o=e("./font");r.prototype.getMetrics=function(e,n){return void 0===this.data[e+"-"+n]&&(this.data[e+"-"+n]=new o(e,n)),this.data[e+"-"+n]},n.exports=r},{"./font":6}],8:[function(e,n,t){function r(n,t,r){this.image=null,this.src=n;var i=this,s=o(n);this.promise=(t?new Promise(function(e){"about:blank"===n.contentWindow.document.URL||null==n.contentWindow.document.documentElement?n.contentWindow.onload=n.onload=function(){e(n)}:e(n)}):this.proxyLoad(r.proxy,s,r)).then(function(n){return e("./core")(n.contentWindow.document.documentElement,{type:"view",width:n.width,height:n.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(e){return i.image=e})}var o=e("./utils").getBounds,i=e("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(e,n,t){var r=this.src;return i(r.src,e,r.ownerDocument,n.width,n.height,t)},n.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,n,t){function r(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,n.exports=r},{}],10:[function(e,n,t){n.exports=function(e,n){this.src=e,this.image=new Image;var t=this;this.tainted=null,this.promise=new Promise(function(r,o){t.image.onload=r,t.image.onerror=o,n&&(t.image.crossOrigin="anonymous"),t.image.src=e,!0===t.image.complete&&r(t.image)})}},{}],11:[function(e,n,t){function r(e,n){this.link=null,this.options=e,this.support=n,this.origin=this.getOrigin(window.location.href)}var o=e("./log"),i=e("./imagecontainer"),s=e("./dummyimagecontainer"),a=e("./proxyimagecontainer"),l=(e("./framecontainer"),e("./svgcontainer")),c=e("./svgnodecontainer"),u=e("./lineargradientcontainer"),d=e("./webkitgradientcontainer"),h=e("./utils").bind;r.prototype.findImages=function(e){var n=[];return e.reduce(function(e,n){switch(n.node.nodeName){case"IMG":return e.concat([{args:[n.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[n.node],method:n.node.nodeName}])}return e},[]).forEach(this.addImage(n,this.loadImage),this),n},r.prototype.findBackgroundImage=function(e,n){return n.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.addImage=function(e,n){return function(t){t.args.forEach(function(r){this.imageExists(e,r)||(e.splice(0,0,n.call(this,t)),o("Added image #"+e.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(e){return"none"!==e.method},r.prototype.loadImage=function(e){if("url"===e.method){var n=e.args[0];return!this.isSVG(n)||this.support.svg||this.options.allowTaint?n.match(/data:image\/.*;base64,/i)?new i(n.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(n)||!0===this.options.allowTaint||this.isSVG(n)?new i(n,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new i(n,!0):this.options.proxy?new a(n,this.options.proxy):new s(n):new l(n)}return"linear-gradient"===e.method?new u(e):"gradient"===e.method?new d(e):"svg"===e.method?new c(e.args[0],this.support.svg):new s(e)},r.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||l.prototype.isInline(e)},r.prototype.imageExists=function(e,n){return e.some(function(e){return e.src===n})},r.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},r.prototype.getOrigin=function(e){var n=this.link||(this.link=document.createElement("a"));return n.href=e,n.href=n.href,n.protocol+n.hostname+n.port},r.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new s(e.src).promise.then(function(n){e.image=n})})},r.prototype.get=function(e){var n=null;return this.images.some(function(t){return(n=t).src===e})?n:null},r.prototype.fetch=function(e){return this.images=e.reduce(h(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,n){e.promise.then(function(){o("Succesfully loaded image #"+(n+1),e)},function(t){o("Failed loading image #"+(n+1),e,t)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},r.prototype.timeout=function(e,n){var t,r=Promise.race([e.promise,new Promise(function(r,i){t=setTimeout(function(){o("Timed out loading image",e),i(e)},n)})]).then(function(e){return clearTimeout(t),e});return r.catch(function(){clearTimeout(t)}),r},n.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,n,t){function r(e){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var n=r.REGEXP_DIRECTION.test(e.args[0])||!o.REGEXP_COLORSTOP.test(e.args[0]);n?e.args[0].split(/\s+/).reverse().forEach(function(e,n){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var t=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=t;break;case"center":break;default:var o=.01*parseFloat(e,10);if(isNaN(o))break;0===n?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(n?1:0).map(function(e){var n=e.match(o.REGEXP_COLORSTOP),t=+n[2],r=0===t?"%":n[3];return{color:new i(n[1]),stop:"%"===r?t/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,n){null===e.stop&&this.colorStops.slice(n).some(function(t,r){return null!==t.stop&&(e.stop=(t.stop-this.colorStops[n-1].stop)/(r+1)+this.colorStops[n-1].stop,!0)},this)},this)}var o=e("./gradientcontainer"),i=e("./color");r.prototype=Object.create(o.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,n.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(e,n,t){var r=function e(){e.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-e.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},n.exports=r},{}],14:[function(e,n,t){function r(e,n){this.node=e,this.parent=n,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(e){return-1!==e.toString().indexOf("%")}function i(e){return e.replace("px","")}function s(e){return parseFloat(e)}var a=e("./color"),l=e("./utils"),c=l.getBounds,u=l.parseBackgrounds,d=l.offsetBounds;r.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},r.prototype.prefixedCss=function(e){var n=this.css(e);return void 0===n&&["webkit","moz","ms","o"].some(function(t){return void 0!==(n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===n?null:n},r.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},r.prototype.cssInt=function(e){var n=parseInt(this.css(e),10);return isNaN(n)?0:n},r.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new a(this.css(e)))},r.prototype.cssFloat=function(e){var n=parseFloat(this.css(e));return isNaN(n)?0:n},r.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},r.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=u(this.css("backgroundImage")))},r.prototype.cssList=function(e,n){var t=(this.css(e)||"").split(",");return 1===(t=(t=t[n||0]||t[0]||"auto").trim().split(" ")).length&&(t=[t[0],o(t[0])?"auto":t[0]]),t},r.prototype.parseBackgroundSize=function(e,n,t){var r,i,s=this.cssList("backgroundSize",t);if(o(s[0]))r=e.width*parseFloat(s[0])/100;else{if(/contain|cover/.test(s[0])){var a=e.width/e.height,l=n.width/n.height;return a<l^"contain"===s[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}r=parseInt(s[0],10)}return i="auto"===s[0]&&"auto"===s[1]?n.height:"auto"===s[1]?r/n.width*n.height:o(s[1])?e.height*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(r=i/n.height*n.width),{width:r,height:i}},r.prototype.parseBackgroundPosition=function(e,n,t,r){var i,s,a=this.cssList("backgroundPosition",t);return i=o(a[0])?(e.width-(r||n).width)*(parseFloat(a[0])/100):parseInt(a[0],10),s="auto"===a[1]?i/n.width*n.height:o(a[1])?(e.height-(r||n).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(i=s/n.height*n.width),{left:i,top:s}},r.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},r.prototype.parseTextShadows=function(){var e=this.css("textShadow"),n=[];if(e&&"none"!==e)for(var t=e.match(this.TEXT_SHADOW_PROPERTY),r=0;t&&r<t.length;r++){var o=t[r].match(this.TEXT_SHADOW_VALUES);n.push({color:new a(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return n},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),n=this.prefixedCss("transformOrigin").split(" ").map(i).map(s);n[0]+=e.left,n[1]+=e.top,this.transformData={origin:n,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),n=e?function(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var n=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[n[0],n[1],n[4],n[5],n[12],n[13]]}}(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=n||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?d(this.node):c(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var e,n,t=this.node.value||"";return"SELECT"===this.node.tagName?(e=this.node,t=(n=e.options[e.selectedIndex||0])&&n.text||""):"password"===this.node.type&&(t=Array(t.length+1).join("•")),0===t.length?this.node.placeholder||"":t},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,n.exports=r},{"./color":3,"./utils":26}],15:[function(e,n,t){function r(e,n,t,r,o){A("Starting NodeParser"),this.renderer=n,this.options=o,this.range=null,this.support=t,this.renderQueue=[],this.stack=new F(!0,1,e.ownerDocument,null);var i=new R(e,null);if(o.background&&n.rectangle(0,0,n.width,n.height,new D(o.background)),e===e.ownerDocument.documentElement){var s=new R(i.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);n.rectangle(0,0,n.width,n.height,s.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=P([i].concat(this.getChildren(i)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new I,A("Fetched nodes, total:",this.nodes.length),A("Calculate overflow clips"),this.calculateOverflowClips(),A("Start fetching images"),this.images=r.fetch(this.nodes.filter(E)),this.ready=this.images.ready.then(z(function(){return A("Images loaded, starting parsing"),A("Creating stacking contexts"),this.createStackingContexts(),A("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),A("Render queue created with "+this.renderQueue.length+" items"),new Promise(z(function(e){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function o(e){return e.parent&&e.parent.clip.length}function i(){}function s(e,n,t,r){return e.map(function(o,i){if(o.width>0){var s=n.left,a=n.top,l=n.width,c=n.height-e[2].width;switch(i){case 0:c=e[0].width,o.args=u({c1:[s,a],c2:[s+l,a],c3:[s+l-e[1].width,a+c],c4:[s+e[3].width,a+c]},r[0],r[1],t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);break;case 1:s=n.left+n.width-e[1].width,l=e[1].width,o.args=u({c1:[s+l,a],c2:[s+l,a+c+e[2].width],c3:[s,a+c],c4:[s,a+e[0].width]},r[1],r[2],t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);break;case 2:a=a+n.height-e[2].width,c=e[2].width,o.args=u({c1:[s+l,a+c],c2:[s,a+c],c3:[s+e[3].width,a],c4:[s+l-e[3].width,a]},r[2],r[3],t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);break;case 3:l=e[3].width,o.args=u({c1:[s,a+c+e[2].width],c2:[s,a],c3:[s+l,a+e[0].width],c4:[s+l,a+c]},r[3],r[0],t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}}return o})}function a(e,n,t,r){var o=(Math.sqrt(2)-1)/3*4,i=t*o,s=r*o,a=e+t,l=n+r;return{topLeft:c({x:e,y:l},{x:e,y:l-s},{x:a-i,y:n},{x:a,y:n}),topRight:c({x:e,y:n},{x:e+i,y:n},{x:a,y:l-s},{x:a,y:l}),bottomRight:c({x:a,y:n},{x:a,y:n+s},{x:e+i,y:l},{x:e,y:l}),bottomLeft:c({x:a,y:l},{x:a-i,y:l},{x:e,y:n+s},{x:e,y:n})}}function l(e,n,t){var r=e.left,o=e.top,i=e.width,s=e.height,l=n[0][0]<i/2?n[0][0]:i/2,c=n[0][1]<s/2?n[0][1]:s/2,u=n[1][0]<i/2?n[1][0]:i/2,d=n[1][1]<s/2?n[1][1]:s/2,h=n[2][0]<i/2?n[2][0]:i/2,p=n[2][1]<s/2?n[2][1]:s/2,f=n[3][0]<i/2?n[3][0]:i/2,m=n[3][1]<s/2?n[3][1]:s/2,g=i-u,v=s-p,y=i-h,b=s-m;return{topLeftOuter:a(r,o,l,c).topLeft.subdivide(.5),topLeftInner:a(r+t[3].width,o+t[0].width,Math.max(0,l-t[3].width),Math.max(0,c-t[0].width)).topLeft.subdivide(.5),topRightOuter:a(r+g,o,u,d).topRight.subdivide(.5),topRightInner:a(r+Math.min(g,i+t[3].width),o+t[0].width,g>i+t[3].width?0:u-t[3].width,d-t[0].width).topRight.subdivide(.5),bottomRightOuter:a(r+y,o+v,h,p).bottomRight.subdivide(.5),bottomRightInner:a(r+Math.min(y,i-t[3].width),o+Math.min(v,s+t[0].width),Math.max(0,h-t[1].width),p-t[2].width).bottomRight.subdivide(.5),bottomLeftOuter:a(r,o+b,f,m).bottomLeft.subdivide(.5),bottomLeftInner:a(r+t[3].width,o+b,Math.max(0,f-t[3].width),m-t[2].width).bottomLeft.subdivide(.5)}}function c(e,n,t,r){var o=function(e,n,t){return{x:e.x+(n.x-e.x)*t,y:e.y+(n.y-e.y)*t}};return{start:e,startControl:n,endControl:t,end:r,subdivide:function(i){var s=o(e,n,i),a=o(n,t,i),l=o(t,r,i),u=o(s,a,i),d=o(a,l,i),h=o(u,d,i);return[c(e,s,u,h),c(h,d,l,r)]},curveTo:function(e){e.push(["bezierCurve",n.x,n.y,t.x,t.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",t.x,t.y,n.x,n.y,e.x,e.y])}}}function u(e,n,t,r,o,i,s){var a=[];return n[0]>0||n[1]>0?(a.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(a)):a.push(["line",e.c1[0],e.c1[1]]),t[0]>0||t[1]>0?(a.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",e.c2[0],e.c2[1]]),a.push(["line",e.c3[0],e.c3[1]])),n[0]>0||n[1]>0?(a.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(a)):a.push(["line",e.c4[0],e.c4[1]]),a}function d(e,n,t,r,o,i,s){n[0]>0||n[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",i,s]),(t[0]>0||t[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function h(e){return e.cssInt("zIndex")<0}function p(e){return e.cssInt("zIndex")>0}function f(e){return 0===e.cssInt("zIndex")}function m(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function g(e){return e instanceof F}function v(e){return e.node.data.trim().length>0}function y(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function b(e){return"static"!==e.css("position")}function w(e){return"none"!==e.css("float")}function x(e){var n=this;return function(){return!e.apply(n,arguments)}}function E(e){return e.node.nodeType===Node.ELEMENT_NODE}function C(e){return!0===e.isPseudoElement}function S(e){return e.node.nodeType===Node.TEXT_NODE}function k(e){return parseInt(e,10)}function M(e){return e.width}function T(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function P(e){return[].concat.apply([],e)}var A=e("./log"),O=e("punycode"),R=e("./nodecontainer"),_=e("./textcontainer"),N=e("./pseudoelementcontainer"),I=e("./fontmetrics"),D=e("./color"),F=e("./stackingcontext"),L=e("./utils"),z=L.bind,B=L.getBounds,j=L.parseBackgrounds,U=L.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(E(e)){C(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var n="hidden"===e.css("overflow")?[e.borders.clip]:[],t=e.parseClip();t&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&n.push([["rect",e.bounds.left+t.left,e.bounds.top+t.top,t.right-t.left,t.bottom-t.top]]),e.clip=o(e)?e.parent.clip.concat(n):n,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,C(e)&&e.cleanDOM()}else S(e)&&(e.clip=o(e)?e.parent.clip:[]);C(e)||(e.bounds=null)},this)},r.prototype.asyncRenderer=function(e,n,t){t=t||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?n():t+20>Date.now()?this.asyncRenderer(e,n,t):setTimeout(z(function(){this.asyncRenderer(e,n)},this),0)},r.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(e,n){var t=e.createElement("style");t.innerHTML=n,e.body.appendChild(t)},r.prototype.getPseudoElements=function(e){var n=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var t=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");t&&n.push(t),r&&n.push(r)}return P(n)},r.prototype.getPseudoElement=function(e,n){var t=e.computedStyle(n);if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;for(var r=function(e){var n=e.substr(0,1);return n===e.substr(e.length-1)&&n.match(/'|"/)?e.substr(1,e.length-2):e}(t.content),o="url"===r.substr(0,3),i=document.createElement(o?"img":"html2canvaspseudoelement"),s=new N(i,e,n),a=t.length-1;a>=0;a--){var l=t.item(a).replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")});i.style[l]=t[l]}if(i.className=N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return i.src=j(r)[0].args[0],[s];var c=document.createTextNode(r);return i.appendChild(c),[s,new _(c,s)]},r.prototype.getChildren=function(e){return P([].filter.call(e.node.childNodes,y).map(function(n){var t=[n.nodeType===Node.TEXT_NODE?new _(n,e):new R(n,e)].filter(T);return n.nodeType===Node.ELEMENT_NODE&&t.length&&"TEXTAREA"!==n.tagName?t[0].isElementVisible()?t.concat(this.getChildren(t[0])):[]:t},this))},r.prototype.newStackingContext=function(e,n){var t=new F(n,e.getOpacity(),e.node,e.parent);e.cloneTo(t),(n?t.getParentStack(this):t.parent.stack).contexts.push(t),e.stack=t},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){E(e)&&(this.isRootElement(e)||function(e){return e.getOpacity()<1}(e)||function(e){var n=e.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(n)?e.css("zIndex"):"auto")}(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):E(e)&&(b(e)&&f(e)||function(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}(e)||w(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(e){return null===e.parent},r.prototype.sortStackingContexts=function(e){var n;e.contexts.sort((n=e.contexts.slice(0),function(e,t){return e.cssInt("zIndex")+n.indexOf(e)/n.length-(t.cssInt("zIndex")+n.indexOf(t)/n.length)})),e.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(e){return function(n,t,r){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==n.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var o=r.slice(0,t).join("").length;return this.getRangeBounds(e.node,o,n.length)}if(e.node&&"string"==typeof e.node.data){var i=e.node.splitText(n.length),s=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=i,s}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(n.length));return{}}},r.prototype.getWrapperBounds=function(e,n){var t=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,o=e.cloneNode(!0);t.appendChild(e.cloneNode(!0)),r.replaceChild(t,e);var i=n?U(t):B(t);return r.replaceChild(o,t),i},r.prototype.getRangeBounds=function(e,n,t){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,n),r.setEnd(e,n+t),r.getBoundingClientRect()},r.prototype.parse=function(e){var n=e.contexts.filter(h),t=e.children.filter(E),r=t.filter(x(w)),o=r.filter(x(b)).filter(x(m)),s=t.filter(x(b)).filter(w),a=r.filter(x(b)).filter(m),l=e.contexts.concat(r.filter(b)).filter(f),c=e.children.filter(S).filter(v),u=e.contexts.filter(p);n.concat(o).concat(s).concat(a).concat(l).concat(c).concat(u).forEach(function(e){this.renderQueue.push(e),g(e)&&(this.parse(e),this.renderQueue.push(new i))},this)},r.prototype.paint=function(e){try{e instanceof i?this.renderer.ctx.restore():S(e)?(C(e.parent)&&e.parent.appendToDOM(),this.paintText(e),C(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(A(e),this.options.strict)throw e}},r.prototype.paintNode=function(e){g(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},r.prototype.paintElement=function(e){var n=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,n,e.borders.borders.map(M))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var t=this.images.get(e.node);t?this.renderer.renderImage(e,n,e.borders,t):A("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var r=this.images.get(e.node.src);r?this.renderer.renderImage(e,n,e.borders,r):A("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,n,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},r.prototype.paintCheckbox=function(e){var n=e.parseBounds(),t=Math.min(n.width,n.height),r={width:t-1,height:t-1,top:n.top,left:n.left},o=[3,3],i=[o,o,o,o],a=[1,1,1,1].map(function(e){return{color:new D("#A5A5A5"),width:e}}),c=l(r,i,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new D("#DEDEDE")),this.renderer.renderBorders(s(a,r,c,i)),e.node.checked&&(this.renderer.font(new D("#424242"),"normal","normal","bold",t-3+"px","arial"),this.renderer.text("✔",r.left+t/6,r.top+t-1))},this)},r.prototype.paintRadio=function(e){var n=e.parseBounds(),t=Math.min(n.width,n.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(n.left+1,n.top+1,t,new D("#DEDEDE"),1,new D("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(n.left+t/4)+1,Math.ceil(n.top+t/4)+1,Math.floor(t/2),new D("#424242"))},this)},r.prototype.paintFormValue=function(e){var n=e.getValue();if(n.length>0){var t=e.node.ownerDocument,r=t.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(n){try{r.style[n]=e.css(n)}catch(e){A("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var o=e.parseBounds();r.style.position="fixed",r.style.left=o.left+"px",r.style.top=o.top+"px",r.textContent=n,t.body.appendChild(r),this.paintText(new _(r.firstChild,e)),t.body.removeChild(r)}},r.prototype.paintText=function(e){e.applyTextTransform();var n,t=O.ucs2.decode(e.node.data),r=this.options.letterRendering&&!function(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}(e)||(n=e.node.data,/[^\u0000-\u00ff]/.test(n))?t.map(function(e){return O.ucs2.encode([e])}):function(e){for(var n,t,r=[],o=0,i=!1;e.length;)t=e[o],-1!==[32,13,10,9,45].indexOf(t)===i?((n=e.splice(0,o)).length&&r.push(O.ucs2.encode(n)),i=!i,o=0):o++,o>=e.length&&(n=e.splice(0,o)).length&&r.push(O.ucs2.encode(n));return r}(t),o=e.parent.fontWeight(),i=e.parent.css("fontSize"),s=e.parent.css("fontFamily"),a=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),o,i,s),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){r.map(this.parseTextBounds(e),this).forEach(function(n,t){n&&(this.renderer.text(r[t],n.left,n.bottom),this.renderTextDecoration(e.parent,n,this.fontMetrics.getMetrics(s,i)))},this)},this)},r.prototype.renderTextDecoration=function(e,n,t){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(n.left,Math.round(n.top+t.baseline+t.lineWidth),n.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(n.left,Math.round(n.top),n.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(n.left,Math.ceil(n.top+t.middle+t.lineWidth),n.width,1,e.color("color"))}};var q={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(e){var n=e.parseBounds(),t=function(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(n){var t=e.css("border"+n+"Radius").split(" ");return t.length<=1&&(t[1]=t[0]),t.map(k)})}(e),r=["Top","Right","Bottom","Left"].map(function(n,t){var r=e.css("border"+n+"Style"),o=e.color("border"+n+"Color");"inset"===r&&o.isBlack()&&(o=new D([255,255,255,o.a]));var i=q[r]?q[r][t]:null;return{width:e.cssInt("border"+n+"Width"),color:i?o[i[0]](i[1]):o,args:null}}),o=l(n,t,r);return{clip:this.parseBackgroundClip(e,o,r,t,n),borders:s(r,n,o,t)}},r.prototype.parseBackgroundClip=function(e,n,t,r,o){var i=[];switch(e.css("backgroundClip")){case"content-box":case"padding-box":d(i,r[0],r[1],n.topLeftInner,n.topRightInner,o.left+t[3].width,o.top+t[0].width),d(i,r[1],r[2],n.topRightInner,n.bottomRightInner,o.left+o.width-t[1].width,o.top+t[0].width),d(i,r[2],r[3],n.bottomRightInner,n.bottomLeftInner,o.left+o.width-t[1].width,o.top+o.height-t[2].width),d(i,r[3],r[0],n.bottomLeftInner,n.topLeftInner,o.left+t[3].width,o.top+o.height-t[2].width);break;default:d(i,r[0],r[1],n.topLeftOuter,n.topRightOuter,o.left,o.top),d(i,r[1],r[2],n.topRightOuter,n.bottomRightOuter,o.left+o.width,o.top),d(i,r[2],r[3],n.bottomRightOuter,n.bottomLeftOuter,o.left+o.width,o.top+o.height),d(i,r[3],r[0],n.bottomLeftOuter,n.topLeftOuter,o.left,o.top+o.height)}return i},n.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,n,t){function r(e,n,t){var r="withCredentials"in new XMLHttpRequest;if(!n)return Promise.reject("No proxy configured");var a=i(r),c=s(n,e,a);return r?l(c):o(t,c,a).then(function(e){return h(e.content)})}function o(e,n,t){return new Promise(function(r,o){var i=e.createElement("script"),s=function(){delete window.html2canvas.proxy[t],e.body.removeChild(i)};window.html2canvas.proxy[t]=function(e){s(),r(e)},i.src=n,i.onerror=function(e){s(),o(e)},e.body.appendChild(i)})}function i(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++p+"_"+Math.round(1e5*Math.random())}function s(e,n,t){return e+"?url="+encodeURIComponent(n)+(t.length?"&callback=html2canvas.proxy."+t:"")}function a(e){return function(n){var t,r=new DOMParser;try{t=r.parseFromString(n,"text/html")}catch(e){u("DOMParser not supported, falling back to createHTMLDocument"),t=document.implementation.createHTMLDocument("");try{t.open(),t.write(n),t.close()}catch(e){u("createHTMLDocument write not supported, falling back to document.body.innerHTML"),t.body.innerHTML=n}}var o=t.querySelector("base");if(!o||!o.href.host){var i=t.createElement("base");i.href=e,t.head.insertBefore(i,t.head.firstChild)}return t}}var l=e("./xhr"),c=e("./utils"),u=e("./log"),d=e("./clone"),h=c.decode64,p=0;t.Proxy=r,t.ProxyURL=function(e,n,t){var r="crossOrigin"in new Image,a=i(r),l=s(n,e,a);return r?Promise.resolve(l):o(t,l,a).then(function(e){return"data:"+e.type+";base64,"+e.content})},t.loadUrlDocument=function(e,n,t,o,i,s){return new r(e,n,window.document).then(a(e)).then(function(e){return d(e,t,o,i,s,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,n,t){var r=e("./proxy").ProxyURL;n.exports=function(e,n){var t=document.createElement("a");t.href=e,e=t.href,this.src=e,this.image=new Image;var o=this;this.promise=new Promise(function(t,i){o.image.crossOrigin="Anonymous",o.image.onload=t,o.image.onerror=i,new r(e,n,document).then(function(e){o.image.src=e}).catch(i)})}},{"./proxy":16}],18:[function(e,n,t){function r(e,n,t){o.call(this,e,n),this.isPseudoElement=!0,this.before=":before"===t}var o=e("./nodecontainer");r.prototype.cloneTo=function(e){r.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},(r.prototype=Object.create(o.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",n.exports=r},{"./nodecontainer":14}],19:[function(e,n,t){function r(e,n,t,r,o){this.width=e,this.height=n,this.images=t,this.options=r,this.document=o}var o=e("./log");r.prototype.renderImage=function(e,n,t,r){var o=e.cssInt("paddingLeft"),i=e.cssInt("paddingTop"),s=e.cssInt("paddingRight"),a=e.cssInt("paddingBottom"),l=t.borders,c=n.width-(l[1].width+l[3].width+o+s),u=n.height-(l[0].width+l[2].width+i+a);this.drawImage(r,0,0,r.image.width||c,r.image.height||u,n.left+o+l[3].width,n.top+i+l[0].width,c,u)},r.prototype.renderBackground=function(e,n,t){n.height>0&&n.width>0&&(this.renderBackgroundColor(e,n),this.renderBackgroundImage(e,n,t))},r.prototype.renderBackgroundColor=function(e,n){var t=e.color("backgroundColor");t.isTransparent()||this.rectangle(n.left,n.top,n.width,n.height,t)},r.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},r.prototype.renderBackgroundImage=function(e,n,t){e.parseBackgroundImages().reverse().forEach(function(r,i,s){switch(r.method){case"url":var a=this.images.get(r.args[0]);a?this.renderBackgroundRepeating(e,n,a,s.length-(i+1),t):o("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,n,t):o("Error loading background-image",r.args[0]);break;case"none":break;default:o("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(e,n,t,r,o){var i=e.parseBackgroundSize(n,t.image,r),s=e.parseBackgroundPosition(n,t.image,r,i);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(t,s,i,n,n.left+o[3],n.top+s.top+o[0],99999,i.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(t,s,i,n,n.left+s.left+o[3],n.top+o[0],i.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(t,s,i,n,n.left+s.left+o[3],n.top+s.top+o[0],i.width,i.height,o);break;default:this.renderBackgroundRepeat(t,s,i,{top:n.top,left:n.left},o[3],o[0])}},n.exports=r},{"./log":13}],20:[function(e,n,r){function o(e,n){s.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=n),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},l("Initialized CanvasRenderer with size",e,"x",n)}function i(e){return e.length>0}var s=e("../renderer"),a=e("../lineargradientcontainer"),l=e("../log");(o.prototype=Object.create(s.prototype)).setFillStyle=function(e){return this.ctx.fillStyle="object"===t(e)&&e.isColor?e.toString():e,this.ctx},o.prototype.rectangle=function(e,n,t,r,o){this.setFillStyle(o).fillRect(e,n,t,r)},o.prototype.circle=function(e,n,t,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+t/2,n+t/2,t/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},o.prototype.circleStroke=function(e,n,t,r,o,i){this.circle(e,n,t,r),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},o.prototype.drawShape=function(e,n){this.shape(e),this.setFillStyle(n).fill()},o.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(n){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},o.prototype.drawImage=function(e,n,t,r,o,i,s,a,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,n,t,r,o,i,s,a,l)},o.prototype.clip=function(e,n,t){this.ctx.save(),e.filter(i).forEach(function(e){this.shape(e).clip()},this),n.call(t),this.ctx.restore()},o.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,n){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===n?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},o.prototype.font=function(e,n,t,r,o,i){this.setFillStyle(e).font=[n,t,r,o,i].join(" ").split(",")[0]},o.prototype.fontShadow=function(e,n,t,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",n).setVariable("shadowOffsetX",t).setVariable("shadowBlur",r)},o.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},o.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},o.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},o.prototype.setVariable=function(e,n){return this.variables[e]!==n&&(this.variables[e]=this.ctx[e]=n),this},o.prototype.text=function(e,n,t){this.ctx.fillText(e,n,t)},o.prototype.backgroundRepeatShape=function(e,n,t,r,o,i,s,a,l){var c=[["line",Math.round(o),Math.round(i)],["line",Math.round(o+s),Math.round(i)],["line",Math.round(o+s),Math.round(a+i)],["line",Math.round(o),Math.round(a+i)]];this.clip([c],function(){this.renderBackgroundRepeat(e,n,t,r,l[3],l[0])},this)},o.prototype.renderBackgroundRepeat=function(e,n,t,r,o,i){var s=Math.round(r.left+n.left+o),a=Math.round(r.top+n.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,t),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},o.prototype.renderBackgroundGradient=function(e,n){if(e instanceof a){var t=this.ctx.createLinearGradient(n.left+n.width*e.x0,n.top+n.height*e.y0,n.left+n.width*e.x1,n.top+n.height*e.y1);e.colorStops.forEach(function(e){t.addColorStop(e.stop,e.color.toString())}),this.rectangle(n.left,n.top,n.width,n.height,t)}},o.prototype.resizeImage=function(e,n){var t=e.image;if(t.width===n.width&&t.height===n.height)return t;var r=document.createElement("canvas");return r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),r},n.exports=o},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,n,t){function r(e,n,t,r){o.call(this,t,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*n}var o=e("./nodecontainer");(r.prototype=Object.create(o.prototype)).getParentStack=function(e){var n=this.parent?this.parent.stack:null;return n?n.ownStacking?n:n.getParentStack(e):e.stack},n.exports=r},{"./nodecontainer":14}],22:[function(e,n,t){function r(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(e){var n,t,r=!1;return e.createRange&&(n=e.createRange()).getBoundingClientRect&&((t=e.createElement("boundtest")).style.height="123px",t.style.display="block",e.body.appendChild(t),n.selectNode(t),123===n.getBoundingClientRect().height&&(r=!0),e.body.removeChild(t)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var e=new Image,n=document.createElement("canvas"),t=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{t.drawImage(e,0,0),n.toDataURL()}catch(e){return!1}return!0},n.exports=r},{}],23:[function(e,n,t){function r(e){this.src=e,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(e)?Promise.resolve(n.inlineFormatting(e)):o(e)}).then(function(e){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(e,n.createCanvas.call(n,t))})})}var o=e("./xhr"),i=e("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},r.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},r.prototype.createCanvas=function(e){var n=this;return function(t,r){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");n.image=o.lowerCanvasEl,o.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(t,r)).renderAll(),e(o.lowerCanvasEl)}},r.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):i(e)},n.exports=r},{"./utils":26,"./xhr":28}],24:[function(e,n,t){function r(e,n){this.src=e,this.image=null;var t=this;this.promise=n?new Promise(function(n,r){t.image=new Image,t.image.onload=n,t.image.onerror=r,t.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),!0===t.image.complete&&n(t.image)}):this.hasFabric().then(function(){return new Promise(function(n){window.html2canvas.svg.fabric.parseSVGDocument(e,t.createCanvas.call(t,n))})})}var o=e("./svgcontainer");r.prototype=Object.create(o.prototype),n.exports=r},{"./svgcontainer":23}],25:[function(e,n,t){function r(e,n){i.call(this,e,n)}function o(e,n,t){if(e.length>0)return n+t.toUpperCase()}var i=e("./nodecontainer");(r.prototype=Object.create(i.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(e){var n=this.node.data;switch(e){case"lowercase":return n.toLowerCase();case"capitalize":return n.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return n.toUpperCase();default:return n}},n.exports=r},{"./nodecontainer":14}],26:[function(e,n,t){t.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.bind=function(e,n){return function(){return e.apply(n,arguments)}},t.decode64=function(e){var n,t,r,o,i,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=e.length,u="";for(n=0;n<c;n+=4)i=l.indexOf(e[n])<<2|(t=l.indexOf(e[n+1]))>>4,s=(15&t)<<4|(r=l.indexOf(e[n+2]))>>2,a=(3&r)<<6|(o=l.indexOf(e[n+3])),u+=64===r?String.fromCharCode(i):64===o||-1===o?String.fromCharCode(i,s):String.fromCharCode(i,s,a);return u},t.getBounds=function(e){if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),t=null==e.offsetWidth?n.width:e.offsetWidth;return{top:n.top,bottom:n.bottom||n.top+n.height,right:n.left+t,left:n.left,width:t,height:null==e.offsetHeight?n.height:e.offsetHeight}}return{}},t.offsetBounds=function(e){var n=e.offsetParent?t.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+n.top,bottom:e.offsetTop+e.offsetHeight+n.top,right:e.offsetLeft+n.left+e.offsetWidth,left:e.offsetLeft+n.left,width:e.offsetWidth,height:e.offsetHeight}},t.parseBackgrounds=function(e){var n,t,r,o,i,s,a,l=[],c=0,u=0,d=function(){n&&('"'===t.substr(0,1)&&(t=t.substr(1,t.length-2)),t&&a.push(t),"-"===n.substr(0,1)&&(o=n.indexOf("-",1)+1)>0&&(r=n.substr(0,o),n=n.substr(o)),l.push({prefix:r,method:n.toLowerCase(),value:i,args:a,image:null})),a=[],n=r=t=i=""};return a=[],n=r=t=i="",e.split("").forEach(function(e){if(!(0===c&&" \r\n\t".indexOf(e)>-1)){switch(e){case'"':s?s===e&&(s=null):s=e;break;case"(":if(s)break;if(0===c)return c=1,void(i+=e);u++;break;case")":if(s)break;if(1===c){if(0===u)return c=0,i+=e,void d();u--}break;case",":if(s)break;if(0===c)return void d();if(1===c&&0===u&&!n.match(/^url$/i))return a.push(t),t="",void(i+=e)}i+=e,0===c?n+=e:t+=e}}),d(),l}},{}],27:[function(e,n,t){function r(e){o.apply(this,arguments),this.type="linear"===e.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=e("./gradientcontainer");r.prototype=Object.create(o.prototype),n.exports=r},{"./gradientcontainer":9}],28:[function(e,n,t){n.exports=function(e){return new Promise(function(n,t){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?n(r.responseText):t(new Error(r.statusText))},r.onerror=function(){t(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4);n.a=r}).call(this,t(14))},function(e,n,t){"use strict";(function(e){function r(e){return Boolean(e&&void 0!==e.length)}function o(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var r;try{r=t(e._value)}catch(e){return void l(n.promise,e)}a(n.promise,r)}else(1===e._state?a:l)(n.promise,e._value)})):e._deferreds.push(n)}function a(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if(n instanceof i)return e._state=3,e._value=n,void c(e);if("function"==typeof t)return void d((r=t,o=n,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=n,c(e)}catch(n){l(e,n)}var r,o}function l(e,n){e._state=2,e._value=n,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)s(e,e._deferreds[n]);e._deferreds=null}function u(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function d(e,n){var t=!1;try{e(function(e){t||(t=!0,a(n,e))},function(e){t||(t=!0,l(n,e))})}catch(e){if(t)return;t=!0,l(n,e)}}var h=t(50),p=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,n){var t=new this.constructor(o);return s(this,new u(e,n,t)),t},i.prototype.finally=h.a,i.all=function(e){return new i(function(n,t){function o(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(n){o(e,n)},t)}i[e]=r,0==--s&&n(i)}catch(e){t(e)}}if(!r(e))return t(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);for(var s=i.length,a=0;a<i.length;a++)o(a,i[a])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(n){n(e)})},i.reject=function(e){return new i(function(n,t){t(e)})},i.race=function(e){return new i(function(n,t){if(!r(e))return t(new TypeError("Promise.race accepts an array"));for(var o=0,s=e.length;o<s;o++)i.resolve(e[o]).then(n,t)})},i._immediateFn="function"==typeof e&&function(n){e(n)}||function(e){p(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n.a=i}).call(this,t(110).setImmediate)},function(e,n,t){"use strict";function r(e){s.a.interceptConstructor(e.window,"XMLHttpRequest",function(){!function(e,n){n.__rclogger={},s.a.intercept(n,"open",function(t,r,o,i,s){return function(e,n,t,r,o,i,s){n.__rclogger.method=t,n.__rclogger.url=r,n.__rclogger.async=!1!==o,e.useEncryption&&(n.__rclogger.username=i,n.__rclogger.password=s),n.__rclogger.headers={}}(e,n,t,r,o,i,s)}),s.a.intercept(n,"setRequestHeader",function(e,t){return function(e,n,t,r){n.__rclogger.headers=n.__rclogger.headers||{},t=String(t).toLowerCase().trim(),r=String(r).trim(),n.__rclogger.headers.hasOwnProperty(t)?n.__rclogger.headers[t]+=", "+r:n.__rclogger.headers[t]=r}(0,n,e,t)}),s.a.intercept(n,"send",function(t){return function(e,n,t){n.__rclogger.timestamp=Date.now(),n.__rclogger.requestId=++a,n.__rclogger.request=(t||"").toString(),(e.logAjaxRequests||e.enableAjaxPlayback)&&n.__rclogger.url!==e.logUrl&&e.addLogEntry({type:"ajax",requestId:n.__rclogger.requestId,async:n.__rclogger.async,url:n.__rclogger.url,method:n.__rclogger.method,username:n.__rclogger.username,password:n.__rclogger.password,headers:n.__rclogger.headers||{},request:n.__rclogger.request})}(e,n,t)}),n.addEventListener("load",i.bind(e)),n.addEventListener("abort",i.bind(e)),n.addEventListener("error",i.bind(e)),n.addEventListener("timeout",i.bind(e))}(e,this)})}function o(e,n){var t;try{t=n}catch(e){}return t}function i(e){var n=this,t=e.target;n.addLogEntry({type:"ajax"+e.type,status:t.status,statusText:t.statusText,responseType:t.responseType,requestId:t.__rclogger.requestId,url:t.__rclogger.url,method:t.__rclogger.method,duration:t.__rclogger.timestamp?(new Date).getTime()-t.__rclogger.timestamp:void 0,async:t.__rclogger.async,username:t.__rclogger.username,password:t.__rclogger.password,request:t.__rclogger.request,requestHeaders:t.__rclogger.headers,response:(n.logAjaxResponses||n.enableAjaxPlayback)&&o(t.responseType,t.response)||"",responseHeaders:t.getAllResponseHeaders().trim().split("\n").reduce(function(e,n){return e[(n=n.split(":")).shift().trim()]=n.join(":").trim(),e},{})}),navigator.onLine&&n.treatFailedAjaxAsError&&t.status>=400&&n.handleError("Ajax "+e.type+" ["+t.status+"] "+t.__rclogger.url,t.__rclogger.url,0,0,null,{requestId:t.__rclogger.requestId,responseType:t.responseType,isFailedAjax:!0,response:o(t.responseType,t.response)})}var s=t(1),a=0,l={logAjaxRequests:!1,logAjaxResponses:!1,enableAjaxPlayback:!1,treatFailedAjaxAsError:!1,start:function(){var e=this;if("function"==typeof document.addEventListener&&!e.botRe.test(navigator.userAgent))return(e.logAjaxRequests||e.logAjaxResponses||e.enableAjaxPlayback||e.treatFailedAjaxAsError)&&"XMLHttpRequest"in e.window&&r(e),e.SUPER()},stop:function(){var e=this;return(e.logAjaxRequests||e.logAjaxResponses||e.enableAjaxPlayback||e.treatFailedAjaxAsError)&&"XMLHttpRequest"in e.window&&function(e){s.a.removeInterceptor(e.window,"XMLHttpRequest")}(e),e.SUPER()}};n.a=l},function(e,n,t){"use strict";t(98),t(53),t(54),t(55),t(56),t(100)},function(e,n,t){t(31)(t(99))},function(e,n){e.exports="function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n;\nif (typeof Joose == \"undefined\") !function () {\n  ;\n  var Joose = {}; // configuration hash\n\n  Joose.C = typeof JOOSE_CFG != 'undefined' ? JOOSE_CFG : {};\n  Joose.is_IE = '\\v' == 'v';\n  Joose.is_NodeJS = Boolean(typeof process != 'undefined' && process.pid);\n  Joose.top = Joose.is_NodeJS && global || this;\n\n  Joose.stub = function () {\n    return function () {\n      throw new Error(\"Modules can not be instantiated\");\n    };\n  };\n\n  Joose.VERSION = {\n    /*PKGVERSION*/\n    VERSION: '3.50.1'\n  }.VERSION;\n  if (typeof module != 'undefined') module.exports = Joose;\n  /*if (!Joose.is_NodeJS) */\n\n  this.Joose = Joose; // Static helpers for Arrays\n\n  Joose.A = {\n    each: function each(array, func, scope) {\n      scope = scope || this;\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (func.call(scope, array[i], i) === false) return false;\n      }\n    },\n    eachR: function eachR(array, func, scope) {\n      scope = scope || this;\n\n      for (var i = array.length - 1; i >= 0; i--) {\n        if (func.call(scope, array[i], i) === false) return false;\n      }\n    },\n    exists: function exists(array, value) {\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (array[i] == value) return true;\n      }\n\n      return false;\n    },\n    map: function map(array, func, scope) {\n      scope = scope || this;\n      var res = [];\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        res.push(func.call(scope, array[i], i));\n      }\n\n      return res;\n    },\n    grep: function grep(array, func) {\n      var a = [];\n      Joose.A.each(array, function (t) {\n        if (func(t)) a.push(t);\n      });\n      return a;\n    },\n    remove: function remove(array, removeEle) {\n      var a = [];\n      Joose.A.each(array, function (t) {\n        if (t !== removeEle) a.push(t);\n      });\n      return a;\n    }\n  }; // Static helpers for Strings\n\n  Joose.S = {\n    saneSplit: function saneSplit(str, delimeter) {\n      var res = (str || '').split(delimeter);\n      if (res.length == 1 && !res[0]) res.shift();\n      return res;\n    },\n    uppercaseFirst: function uppercaseFirst(string) {\n      return string.substr(0, 1).toUpperCase() + string.substr(1, string.length - 1);\n    },\n    strToClass: function strToClass(name, top) {\n      var current = top || Joose.top;\n      Joose.A.each(name.split('.'), function (segment) {\n        if (current) current = current[segment];else return false;\n      });\n      return current;\n    }\n  };\n\n  var baseFunc = function baseFunc() {};\n\n  var enumProps = ['hasOwnProperty', 'valueOf', 'toString', 'constructor'];\n  var manualEnum = true;\n\n  for (var i in {\n    toString: 1\n  }) {\n    manualEnum = false;\n  } // Static helpers for objects\n\n\n  Joose.O = {\n    each: function each(object, func, scope) {\n      scope = scope || this;\n\n      for (var i in object) {\n        if (func.call(scope, object[i], i) === false) return false;\n      }\n\n      if (manualEnum) return Joose.A.each(enumProps, function (el) {\n        if (object.hasOwnProperty(el)) return func.call(scope, object[el], el);\n      });\n    },\n    eachOwn: function eachOwn(object, func, scope) {\n      scope = scope || this;\n      return Joose.O.each(object, function (value, name) {\n        if (object.hasOwnProperty(name)) return func.call(scope, value, name);\n      }, scope);\n    },\n    copy: function copy(source, target) {\n      target = target || {};\n      Joose.O.each(source, function (value, name) {\n        target[name] = value;\n      });\n      return target;\n    },\n    copyOwn: function copyOwn(source, target) {\n      target = target || {};\n      Joose.O.eachOwn(source, function (value, name) {\n        target[name] = value;\n      });\n      return target;\n    },\n    getMutableCopy: function getMutableCopy(object) {\n      baseFunc.prototype = object;\n      return new baseFunc();\n    },\n    extend: function extend(target, source) {\n      return Joose.O.copy(source, target);\n    },\n    isEmpty: function isEmpty(object) {\n      for (var i in object) {\n        if (object.hasOwnProperty(i)) return false;\n      }\n\n      return true;\n    },\n    isInstance: function isInstance(obj) {\n      return obj && obj.meta && obj.constructor == obj.meta.c;\n    },\n    isClass: function isClass(obj) {\n      return obj && obj.meta && obj.meta.c == obj;\n    },\n    wantArray: function wantArray(obj) {\n      if (obj instanceof Array) return obj;\n      return [obj];\n    },\n    // this was a bug in WebKit, which gives typeof / / == 'function'\n    // should be monitored and removed at some point in the future\n    isFunction: function isFunction(obj) {\n      return typeof obj == 'function' && obj.constructor != / /.constructor;\n    }\n  }; //initializers\n\n  Joose.I = {\n    Array: function Array() {\n      return [];\n    },\n    Object: function Object() {\n      return {};\n    },\n    Function: function Function() {\n      return arguments.callee;\n    },\n    Now: function Now() {\n      return new Date();\n    }\n  };\n  Joose.Proto = Joose.stub();\n  Joose.Proto.Empty = Joose.stub();\n  Joose.Proto.Empty.meta = {};\n  ;\n\n  (function () {\n    Joose.Proto.Object = Joose.stub();\n\n    var SUPER = function SUPER() {\n      var self = SUPER.caller;\n      if (self == SUPERARG) self = self.caller;\n      if (!self.SUPER) throw \"Invalid call to SUPER\";\n      return self.SUPER[self.methodName].apply(this, arguments);\n    };\n\n    var SUPERARG = function SUPERARG() {\n      return this.SUPER.apply(this, arguments[0]);\n    };\n\n    Joose.Proto.Object.prototype = {\n      SUPERARG: SUPERARG,\n      SUPER: SUPER,\n      INNER: function INNER() {\n        throw \"Invalid call to INNER\";\n      },\n      BUILD: function BUILD(config) {\n        return arguments.length == 1 && _typeof(config) == 'object' && config || {};\n      },\n      initialize: function initialize() {},\n      toString: function toString() {\n        return \"a \" + this.meta.name;\n      }\n    };\n    Joose.Proto.Object.meta = {\n      constructor: Joose.Proto.Object,\n      methods: Joose.O.copy(Joose.Proto.Object.prototype),\n      attributes: {}\n    };\n    Joose.Proto.Object.prototype.meta = Joose.Proto.Object.meta;\n  })();\n\n  ;\n\n  (function () {\n    Joose.Proto.Class = function () {\n      return this.initialize(this.BUILD.apply(this, arguments)) || this;\n    };\n\n    var bootstrap = {\n      VERSION: null,\n      AUTHORITY: null,\n      constructor: Joose.Proto.Class,\n      superClass: null,\n      name: null,\n      attributes: null,\n      methods: null,\n      meta: null,\n      c: null,\n      defaultSuperClass: Joose.Proto.Object,\n      BUILD: function BUILD(name, extend) {\n        this.name = name;\n        return {\n          __extend__: extend || {}\n        };\n      },\n      initialize: function initialize(props) {\n        var extend = props.__extend__;\n        this.VERSION = extend.VERSION;\n        this.AUTHORITY = extend.AUTHORITY;\n        delete extend.VERSION;\n        delete extend.AUTHORITY;\n        this.c = this.extractConstructor(extend);\n        this.adaptConstructor(this.c);\n\n        if (extend.constructorOnly) {\n          delete extend.constructorOnly;\n          return;\n        }\n\n        this.construct(extend);\n      },\n      construct: function construct(extend) {\n        if (!this.prepareProps(extend)) return;\n        var superClass = this.superClass = this.extractSuperClass(extend);\n        this.processSuperClass(superClass);\n        this.adaptPrototype(this.c.prototype);\n        this.finalize(extend);\n      },\n      finalize: function finalize(extend) {\n        this.processStem(extend);\n        this.extend(extend);\n      },\n      //if the extension returns false from this method it should re-enter 'construct'\n      prepareProps: function prepareProps(extend) {\n        return true;\n      },\n      extractConstructor: function extractConstructor(extend) {\n        var res = extend.hasOwnProperty('constructor') ? extend.constructor : this.defaultConstructor();\n        delete extend.constructor;\n        return res;\n      },\n      extractSuperClass: function extractSuperClass(extend) {\n        if (extend.hasOwnProperty('isa') && !extend.isa) throw new Error(\"Attempt to inherit from undefined superclass [\" + this.name + \"]\");\n        var res = extend.isa || this.defaultSuperClass;\n        delete extend.isa;\n        return res;\n      },\n      processStem: function processStem() {\n        var superMeta = this.superClass.meta;\n        this.methods = Joose.O.getMutableCopy(superMeta.methods || {});\n        this.attributes = Joose.O.getMutableCopy(superMeta.attributes || {});\n      },\n      initInstance: function initInstance(instance, props) {\n        Joose.O.copyOwn(props, instance);\n      },\n      defaultConstructor: function defaultConstructor() {\n        return function (arg) {\n          var BUILD = this.BUILD;\n          var args = BUILD && BUILD.apply(this, arguments) || arg || {};\n          var thisMeta = this.meta;\n          thisMeta.initInstance(this, args);\n          return thisMeta.hasMethod('initialize') && this.initialize(args) || this;\n        };\n      },\n      processSuperClass: function processSuperClass(superClass) {\n        var superProto = superClass.prototype; //non-Joose superclasses\n\n        if (!superClass.meta) {\n          var extend = Joose.O.copy(superProto);\n          extend.isa = Joose.Proto.Empty; // clear potential value in the `extend.constructor` to prevent it from being modified\n\n          delete extend.constructor;\n          var meta = new this.defaultSuperClass.meta.constructor(null, extend);\n          superClass.meta = superProto.meta = meta;\n          meta.c = superClass;\n        }\n\n        this.c.prototype = Joose.O.getMutableCopy(superProto);\n        this.c.superClass = superProto;\n      },\n      adaptConstructor: function adaptConstructor(c) {\n        c.meta = this;\n        if (!c.hasOwnProperty('toString')) c.toString = function () {\n          return this.meta.name;\n        };\n      },\n      adaptPrototype: function adaptPrototype(proto) {\n        //this will fix weird semantic of native \"constructor\" property to more intuitive (idea borrowed from Ext)\n        proto.constructor = this.c;\n        proto.meta = this;\n      },\n      addMethod: function addMethod(name, func) {\n        func.SUPER = this.superClass.prototype; //chrome don't allow to redefine the \"name\" property\n\n        func.methodName = name;\n        this.methods[name] = func;\n        this.c.prototype[name] = func;\n      },\n      addAttribute: function addAttribute(name, init) {\n        this.attributes[name] = init;\n        this.c.prototype[name] = init;\n      },\n      removeMethod: function removeMethod(name) {\n        delete this.methods[name];\n        delete this.c.prototype[name];\n      },\n      removeAttribute: function removeAttribute(name) {\n        delete this.attributes[name];\n        delete this.c.prototype[name];\n      },\n      hasMethod: function hasMethod(name) {\n        return Boolean(this.methods[name]);\n      },\n      hasAttribute: function hasAttribute(name) {\n        return this.attributes[name] !== undefined;\n      },\n      hasOwnMethod: function hasOwnMethod(name) {\n        return this.hasMethod(name) && this.methods.hasOwnProperty(name);\n      },\n      hasOwnAttribute: function hasOwnAttribute(name) {\n        return this.hasAttribute(name) && this.attributes.hasOwnProperty(name);\n      },\n      extend: function extend(props) {\n        Joose.O.eachOwn(props, function (value, name) {\n          if (name != 'meta' && name != 'constructor') if (Joose.O.isFunction(value) && !value.meta) this.addMethod(name, value);else this.addAttribute(name, value);\n        }, this);\n      },\n      subClassOf: function subClassOf(classObject, extend) {\n        return this.subClass(extend, null, classObject);\n      },\n      subClass: function subClass(extend, name, classObject) {\n        extend = extend || {};\n        extend.isa = classObject || this.c;\n        return new this.constructor(name, extend).c;\n      },\n      instantiate: function instantiate() {\n        var f = function f() {};\n\n        f.prototype = this.c.prototype;\n        var obj = new f();\n        return this.c.apply(obj, arguments) || obj;\n      }\n    }; //micro bootstraping\n\n    Joose.Proto.Class.prototype = Joose.O.getMutableCopy(Joose.Proto.Object.prototype);\n    Joose.O.extend(Joose.Proto.Class.prototype, bootstrap);\n    Joose.Proto.Class.prototype.meta = new Joose.Proto.Class('Joose.Proto.Class', bootstrap);\n    Joose.Proto.Class.meta.addMethod('isa', function (someClass) {\n      var f = function f() {};\n\n      f.prototype = this.c.prototype;\n      return new f() instanceof someClass;\n    });\n  })();\n\n  Joose.Managed = Joose.stub();\n  Joose.Managed.Property = new Joose.Proto.Class('Joose.Managed.Property', {\n    name: null,\n    init: null,\n    value: null,\n    definedIn: null,\n    initialize: function initialize(props) {\n      Joose.Managed.Property.superClass.initialize.call(this, props);\n      this.computeValue();\n    },\n    computeValue: function computeValue() {\n      this.value = this.init;\n    },\n    //targetClass is still open at this stage\n    preApply: function preApply(targetClass) {},\n    //targetClass is already open at this stage\n    postUnApply: function postUnApply(targetClass) {},\n    apply: function apply(target) {\n      target[this.name] = this.value;\n    },\n    isAppliedTo: function isAppliedTo(target) {\n      return target[this.name] == this.value;\n    },\n    unapply: function unapply(from) {\n      if (!this.isAppliedTo(from)) throw \"Unapply of property [\" + this.name + \"] from [\" + from + \"] failed\";\n      delete from[this.name];\n    },\n    cloneProps: function cloneProps() {\n      return {\n        name: this.name,\n        init: this.init,\n        definedIn: this.definedIn\n      };\n    },\n    clone: function clone(name) {\n      var props = this.cloneProps();\n      props.name = name || props.name;\n      return new this.constructor(props);\n    }\n  }).c;\n  Joose.Managed.Property.ConflictMarker = new Joose.Proto.Class('Joose.Managed.Property.ConflictMarker', {\n    isa: Joose.Managed.Property,\n    apply: function apply(target) {\n      throw new Error(\"Attempt to apply ConflictMarker [\" + this.name + \"] to [\" + target + \"]\");\n    }\n  }).c;\n  Joose.Managed.Property.Requirement = new Joose.Proto.Class('Joose.Managed.Property.Requirement', {\n    isa: Joose.Managed.Property,\n    apply: function apply(target) {\n      if (!target.meta.hasMethod(this.name)) throw new Error(\"Requirement [\" + this.name + \"], defined in [\" + this.definedIn.definedIn.name + \"] is not satisfied for class [\" + target + \"]\");\n    },\n    unapply: function unapply(from) {}\n  }).c;\n  Joose.Managed.Property.Attribute = new Joose.Proto.Class('Joose.Managed.Property.Attribute', {\n    isa: Joose.Managed.Property,\n    slot: null,\n    initialize: function initialize() {\n      Joose.Managed.Property.Attribute.superClass.initialize.apply(this, arguments);\n      this.slot = this.name;\n    },\n    apply: function apply(target) {\n      target.prototype[this.slot] = this.value;\n    },\n    isAppliedTo: function isAppliedTo(target) {\n      return target.prototype[this.slot] == this.value;\n    },\n    unapply: function unapply(from) {\n      if (!this.isAppliedTo(from)) throw \"Unapply of property [\" + this.name + \"] from [\" + from + \"] failed\";\n      delete from.prototype[this.slot];\n    },\n    clearValue: function clearValue(instance) {\n      delete instance[this.slot];\n    },\n    hasValue: function hasValue(instance) {\n      return instance.hasOwnProperty(this.slot);\n    },\n    getRawValueFrom: function getRawValueFrom(instance) {\n      return instance[this.slot];\n    },\n    setRawValueTo: function setRawValueTo(instance, value) {\n      instance[this.slot] = value;\n      return this;\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier', {\n    isa: Joose.Managed.Property,\n    prepareWrapper: function prepareWrapper() {\n      throw \"Abstract method [prepareWrapper] of \" + this + \" was called\";\n    },\n    apply: function apply(target) {\n      var name = this.name;\n      var targetProto = target.prototype;\n      var isOwn = targetProto.hasOwnProperty(name);\n      var original = targetProto[name];\n      var superProto = target.meta.superClass.prototype;\n      var originalCall = isOwn ? original : function () {\n        return superProto[name].apply(this, arguments);\n      };\n      var methodWrapper = this.prepareWrapper({\n        name: name,\n        modifier: this.value,\n        isOwn: isOwn,\n        originalCall: originalCall,\n        superProto: superProto,\n        target: target\n      });\n      if (isOwn) methodWrapper.__ORIGINAL__ = original;\n      methodWrapper.__CONTAIN__ = this.value;\n      methodWrapper.__METHOD__ = this;\n      this.value.displayName = this.getDisplayName(target);\n      methodWrapper.displayName = 'internal wrapper';\n      targetProto[name] = methodWrapper;\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[' + this.name + ']';\n    },\n    isAppliedTo: function isAppliedTo(target) {\n      var targetCont = target.prototype[this.name];\n      return targetCont && targetCont.__CONTAIN__ == this.value;\n    },\n    unapply: function unapply(from) {\n      var name = this.name;\n      var fromProto = from.prototype;\n      var original = fromProto[name].__ORIGINAL__;\n      if (!this.isAppliedTo(from)) throw \"Unapply of method [\" + name + \"] from class [\" + from + \"] failed\"; //if modifier was applied to own method - restore it\n\n      if (original) fromProto[name] = original; //otherwise - just delete it, to reveal the inherited method \n      else delete fromProto[name];\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.Override = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.Override', {\n    isa: Joose.Managed.Property.MethodModifier,\n    prepareWrapper: function prepareWrapper(params) {\n      var modifier = params.modifier;\n      var originalCall = params.originalCall;\n      var superProto = params.superProto;\n      var superMetaConst = superProto.meta.constructor; //call to Joose.Proto level, require some additional processing\n\n      var isCallToProto = (superMetaConst == Joose.Proto.Class || superMetaConst == Joose.Proto.Object) && !(params.isOwn && originalCall.IS_OVERRIDE);\n      var original = originalCall;\n      if (isCallToProto) original = function original() {\n        var beforeSUPER = this.SUPER;\n        this.SUPER = superProto.SUPER;\n        var res = originalCall.apply(this, arguments);\n        this.SUPER = beforeSUPER;\n        return res;\n      };\n\n      var override = function override() {\n        var beforeSUPER = this.SUPER;\n        this.SUPER = original;\n        var res = modifier.apply(this, arguments);\n        this.SUPER = beforeSUPER;\n        return res;\n      };\n\n      override.IS_OVERRIDE = true;\n      return override;\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[override ' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.Put = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.Put', {\n    isa: Joose.Managed.Property.MethodModifier.Override,\n    prepareWrapper: function prepareWrapper(params) {\n      if (params.isOwn) throw \"Method [\" + params.name + \"] is applying over something [\" + params.originalCall + \"] in class [\" + params.target + \"]\";\n      return Joose.Managed.Property.MethodModifier.Put.superClass.prepareWrapper.call(this, params);\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.After = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.After', {\n    isa: Joose.Managed.Property.MethodModifier,\n    prepareWrapper: function prepareWrapper(params) {\n      var modifier = params.modifier;\n      var originalCall = params.originalCall;\n      return function () {\n        var res = originalCall.apply(this, arguments);\n        modifier.apply(this, arguments);\n        return res;\n      };\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[after ' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.Before = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.Before', {\n    isa: Joose.Managed.Property.MethodModifier,\n    prepareWrapper: function prepareWrapper(params) {\n      var modifier = params.modifier;\n      var originalCall = params.originalCall;\n      return function () {\n        modifier.apply(this, arguments);\n        return originalCall.apply(this, arguments);\n      };\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[before ' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.Around = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.Around', {\n    isa: Joose.Managed.Property.MethodModifier,\n    prepareWrapper: function prepareWrapper(params) {\n      var modifier = params.modifier;\n      var originalCall = params.originalCall;\n      var me;\n\n      var bound = function bound() {\n        return originalCall.apply(me, arguments);\n      };\n\n      return function () {\n        me = this;\n        var boundArr = [bound];\n        boundArr.push.apply(boundArr, arguments);\n        return modifier.apply(this, boundArr);\n      };\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[around ' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.Property.MethodModifier.Augment = new Joose.Proto.Class('Joose.Managed.Property.MethodModifier.Augment', {\n    isa: Joose.Managed.Property.MethodModifier,\n    prepareWrapper: function prepareWrapper(params) {\n      var AUGMENT = function AUGMENT() {\n        //populate callstack to the most deep non-augment method\n        var callstack = [];\n        var self = AUGMENT;\n\n        do {\n          callstack.push(self.IS_AUGMENT ? self.__CONTAIN__ : self);\n          self = self.IS_AUGMENT && (self.__ORIGINAL__ || self.SUPER[self.methodName]);\n        } while (self); //save previous INNER\n\n\n        var beforeINNER = this.INNER; //create new INNER\n\n        this.INNER = function () {\n          var innerCall = callstack.pop();\n          return innerCall ? innerCall.apply(this, arguments) : undefined;\n        }; //augment modifier results in hypotetical INNER call of the same method in subclass \n\n\n        var res = this.INNER.apply(this, arguments); //restore previous INNER chain\n\n        this.INNER = beforeINNER;\n        return res;\n      };\n\n      AUGMENT.methodName = params.name;\n      AUGMENT.SUPER = params.superProto;\n      AUGMENT.IS_AUGMENT = true;\n      return AUGMENT;\n    },\n    getDisplayName: function getDisplayName(target) {\n      return target.meta.name + '[augment ' + this.name + ']';\n    }\n  }).c;\n  Joose.Managed.PropertySet = new Joose.Proto.Class('Joose.Managed.PropertySet', {\n    isa: Joose.Managed.Property,\n    properties: null,\n    propertyMetaClass: Joose.Managed.Property,\n    initialize: function initialize(props) {\n      Joose.Managed.PropertySet.superClass.initialize.call(this, props); //XXX this guards the meta roles :)\n\n      this.properties = props.properties || {};\n    },\n    addProperty: function addProperty(name, props) {\n      var metaClass = props.meta || this.propertyMetaClass;\n      delete props.meta;\n      props.definedIn = this;\n      props.name = name;\n      return this.properties[name] = new metaClass(props);\n    },\n    addPropertyObject: function addPropertyObject(object) {\n      return this.properties[object.name] = object;\n    },\n    removeProperty: function removeProperty(name) {\n      var prop = this.properties[name];\n      delete this.properties[name];\n      return prop;\n    },\n    haveProperty: function haveProperty(name) {\n      return this.properties[name] != null;\n    },\n    haveOwnProperty: function haveOwnProperty(name) {\n      return this.haveProperty(name) && this.properties.hasOwnProperty(name);\n    },\n    getProperty: function getProperty(name) {\n      return this.properties[name];\n    },\n    //includes inherited properties (probably you wants 'eachOwn', which process only \"own\" (including consumed from Roles) properties) \n    each: function each(func, scope) {\n      Joose.O.each(this.properties, func, scope || this);\n    },\n    eachOwn: function eachOwn(func, scope) {\n      Joose.O.eachOwn(this.properties, func, scope || this);\n    },\n    //synonym for each\n    eachAll: function eachAll(func, scope) {\n      this.each(func, scope);\n    },\n    cloneProps: function cloneProps() {\n      var props = Joose.Managed.PropertySet.superClass.cloneProps.call(this);\n      props.propertyMetaClass = this.propertyMetaClass;\n      return props;\n    },\n    clone: function clone(name) {\n      var clone = this.cleanClone(name);\n      clone.properties = Joose.O.copyOwn(this.properties);\n      return clone;\n    },\n    cleanClone: function cleanClone(name) {\n      var props = this.cloneProps();\n      props.name = name || props.name;\n      return new this.constructor(props);\n    },\n    alias: function alias(what) {\n      var props = this.properties;\n      Joose.O.each(what, function (aliasName, originalName) {\n        var original = props[originalName];\n        if (original) this.addPropertyObject(original.clone(aliasName));\n      }, this);\n    },\n    exclude: function exclude(what) {\n      var props = this.properties;\n      Joose.A.each(what, function (name) {\n        delete props[name];\n      });\n    },\n    beforeConsumedBy: function beforeConsumedBy() {},\n    flattenTo: function flattenTo(target) {\n      var targetProps = target.properties;\n      this.eachOwn(function (property, name) {\n        var targetProperty = targetProps[name];\n        if (targetProperty instanceof Joose.Managed.Property.ConflictMarker) return;\n\n        if (!targetProps.hasOwnProperty(name) || targetProperty == null) {\n          target.addPropertyObject(property);\n          return;\n        }\n\n        if (targetProperty == property) return;\n        target.removeProperty(name);\n        target.addProperty(name, {\n          meta: Joose.Managed.Property.ConflictMarker\n        });\n      }, this);\n    },\n    composeTo: function composeTo(target) {\n      this.eachOwn(function (property, name) {\n        if (!target.haveOwnProperty(name)) target.addPropertyObject(property);\n      });\n    },\n    composeFrom: function composeFrom() {\n      if (!arguments.length) return;\n      var flattening = this.cleanClone();\n      Joose.A.each(arguments, function (arg) {\n        var isDescriptor = !(arg instanceof Joose.Managed.PropertySet);\n        var propSet = isDescriptor ? arg.propertySet : arg;\n        propSet.beforeConsumedBy(this, flattening);\n\n        if (isDescriptor) {\n          if (arg.alias || arg.exclude) propSet = propSet.clone();\n          if (arg.alias) propSet.alias(arg.alias);\n          if (arg.exclude) propSet.exclude(arg.exclude);\n        }\n\n        propSet.flattenTo(flattening);\n      }, this);\n      flattening.composeTo(this);\n    },\n    preApply: function preApply(target) {\n      this.eachOwn(function (property) {\n        property.preApply(target);\n      });\n    },\n    apply: function apply(target) {\n      this.eachOwn(function (property) {\n        property.apply(target);\n      });\n    },\n    unapply: function unapply(from) {\n      this.eachOwn(function (property) {\n        property.unapply(from);\n      });\n    },\n    postUnApply: function postUnApply(target) {\n      this.eachOwn(function (property) {\n        property.postUnApply(target);\n      });\n    }\n  }).c;\n  var __ID__ = 1;\n  Joose.Managed.PropertySet.Mutable = new Joose.Proto.Class('Joose.Managed.PropertySet.Mutable', {\n    isa: Joose.Managed.PropertySet,\n    ID: null,\n    derivatives: null,\n    opened: null,\n    composedFrom: null,\n    initialize: function initialize(props) {\n      Joose.Managed.PropertySet.Mutable.superClass.initialize.call(this, props); //initially opened\n\n      this.opened = 1;\n      this.derivatives = {};\n      this.ID = __ID__++;\n      this.composedFrom = [];\n    },\n    addComposeInfo: function addComposeInfo() {\n      this.ensureOpen();\n      Joose.A.each(arguments, function (arg) {\n        this.composedFrom.push(arg);\n        var propSet = arg instanceof Joose.Managed.PropertySet ? arg : arg.propertySet;\n        propSet.derivatives[this.ID] = this;\n      }, this);\n    },\n    removeComposeInfo: function removeComposeInfo() {\n      this.ensureOpen();\n      Joose.A.each(arguments, function (arg) {\n        var i = 0;\n\n        while (i < this.composedFrom.length) {\n          var propSet = this.composedFrom[i];\n          propSet = propSet instanceof Joose.Managed.PropertySet ? propSet : propSet.propertySet;\n\n          if (arg == propSet) {\n            delete propSet.derivatives[this.ID];\n            this.composedFrom.splice(i, 1);\n          } else i++;\n        }\n      }, this);\n    },\n    ensureOpen: function ensureOpen() {\n      if (!this.opened) throw \"Mutation of closed property set: [\" + this.name + \"]\";\n    },\n    addProperty: function addProperty(name, props) {\n      this.ensureOpen();\n      return Joose.Managed.PropertySet.Mutable.superClass.addProperty.call(this, name, props);\n    },\n    addPropertyObject: function addPropertyObject(object) {\n      this.ensureOpen();\n      return Joose.Managed.PropertySet.Mutable.superClass.addPropertyObject.call(this, object);\n    },\n    removeProperty: function removeProperty(name) {\n      this.ensureOpen();\n      return Joose.Managed.PropertySet.Mutable.superClass.removeProperty.call(this, name);\n    },\n    composeFrom: function composeFrom() {\n      this.ensureOpen();\n      return Joose.Managed.PropertySet.Mutable.superClass.composeFrom.apply(this, this.composedFrom);\n    },\n    open: function open() {\n      this.opened++;\n\n      if (this.opened == 1) {\n        Joose.O.each(this.derivatives, function (propSet) {\n          propSet.open();\n        });\n        this.deCompose();\n      }\n    },\n    close: function close() {\n      if (!this.opened) throw \"Unmatched 'close' operation on property set: [\" + this.name + \"]\";\n\n      if (this.opened == 1) {\n        this.reCompose();\n        Joose.O.each(this.derivatives, function (propSet) {\n          propSet.close();\n        });\n      }\n\n      this.opened--;\n    },\n    reCompose: function reCompose() {\n      this.composeFrom();\n    },\n    deCompose: function deCompose() {\n      this.eachOwn(function (property, name) {\n        if (property.definedIn != this) this.removeProperty(name);\n      }, this);\n    }\n  }).c;\n\n  Joose.Managed.StemElement = function () {\n    throw \"Modules may not be instantiated.\";\n  };\n\n  Joose.Managed.StemElement.Attributes = new Joose.Proto.Class('Joose.Managed.StemElement.Attributes', {\n    isa: Joose.Managed.PropertySet.Mutable,\n    propertyMetaClass: Joose.Managed.Property.Attribute\n  }).c;\n  Joose.Managed.StemElement.Methods = new Joose.Proto.Class('Joose.Managed.StemElement.Methods', {\n    isa: Joose.Managed.PropertySet.Mutable,\n    propertyMetaClass: Joose.Managed.Property.MethodModifier.Put,\n    preApply: function preApply() {},\n    postUnApply: function postUnApply() {}\n  }).c;\n  Joose.Managed.StemElement.Requirements = new Joose.Proto.Class('Joose.Managed.StemElement.Requirements', {\n    isa: Joose.Managed.PropertySet.Mutable,\n    propertyMetaClass: Joose.Managed.Property.Requirement,\n    alias: function alias() {},\n    exclude: function exclude() {},\n    flattenTo: function flattenTo(target) {\n      this.each(function (property, name) {\n        if (!target.haveProperty(name)) target.addPropertyObject(property);\n      });\n    },\n    composeTo: function composeTo(target) {\n      this.flattenTo(target);\n    },\n    preApply: function preApply() {},\n    postUnApply: function postUnApply() {}\n  }).c;\n  Joose.Managed.StemElement.MethodModifiers = new Joose.Proto.Class('Joose.Managed.StemElement.MethodModifiers', {\n    isa: Joose.Managed.PropertySet.Mutable,\n    propertyMetaClass: null,\n    addProperty: function addProperty(name, props) {\n      var metaClass = props.meta;\n      delete props.meta;\n      props.definedIn = this;\n      props.name = name;\n      var modifier = new metaClass(props);\n      var properties = this.properties;\n      if (!properties[name]) properties[name] = [];\n      properties[name].push(modifier);\n      return modifier;\n    },\n    addPropertyObject: function addPropertyObject(object) {\n      var name = object.name;\n      var properties = this.properties;\n      if (!properties[name]) properties[name] = [];\n      properties[name].push(object);\n      return object;\n    },\n    //remove only the last modifier\n    removeProperty: function removeProperty(name) {\n      if (!this.haveProperty(name)) return undefined;\n      var properties = this.properties;\n      var modifier = properties[name].pop(); //if all modifiers were removed - clearing the properties\n\n      if (!properties[name].length) Joose.Managed.StemElement.MethodModifiers.superClass.removeProperty.call(this, name);\n      return modifier;\n    },\n    alias: function alias() {},\n    exclude: function exclude() {},\n    flattenTo: function flattenTo(target) {\n      var targetProps = target.properties;\n      this.each(function (modifiersArr, name) {\n        var targetModifiersArr = targetProps[name];\n        if (targetModifiersArr == null) targetModifiersArr = targetProps[name] = [];\n        Joose.A.each(modifiersArr, function (modifier) {\n          if (!Joose.A.exists(targetModifiersArr, modifier)) targetModifiersArr.push(modifier);\n        });\n      });\n    },\n    composeTo: function composeTo(target) {\n      this.flattenTo(target);\n    },\n    deCompose: function deCompose() {\n      this.each(function (modifiersArr, name) {\n        var i = 0;\n\n        while (i < modifiersArr.length) {\n          if (modifiersArr[i].definedIn != this) modifiersArr.splice(i, 1);else i++;\n        }\n      });\n    },\n    preApply: function preApply(target) {},\n    postUnApply: function postUnApply(target) {},\n    apply: function apply(target) {\n      this.each(function (modifiersArr, name) {\n        Joose.A.each(modifiersArr, function (modifier) {\n          modifier.apply(target);\n        });\n      });\n    },\n    unapply: function unapply(from) {\n      this.each(function (modifiersArr, name) {\n        for (var i = modifiersArr.length - 1; i >= 0; i--) {\n          modifiersArr[i].unapply(from);\n        }\n      });\n    }\n  }).c;\n  Joose.Managed.PropertySet.Composition = new Joose.Proto.Class('Joose.Managed.PropertySet.Composition', {\n    isa: Joose.Managed.PropertySet.Mutable,\n    propertyMetaClass: Joose.Managed.PropertySet.Mutable,\n    processOrder: null,\n    each: function each(func, scope) {\n      var props = this.properties;\n      var scope = scope || this;\n      Joose.A.each(this.processOrder, function (name) {\n        func.call(scope, props[name], name);\n      });\n    },\n    eachR: function eachR(func, scope) {\n      var props = this.properties;\n      var scope = scope || this;\n      Joose.A.eachR(this.processOrder, function (name) {\n        func.call(scope, props[name], name);\n      }); //        var props           = this.properties\n      //        var processOrder    = this.processOrder\n      //        \n      //        for(var i = processOrder.length - 1; i >= 0; i--) \n      //            func.call(scope || this, props[ processOrder[i] ], processOrder[i])\n    },\n    clone: function clone(name) {\n      var clone = this.cleanClone(name);\n      this.each(function (property) {\n        clone.addPropertyObject(property.clone());\n      });\n      return clone;\n    },\n    alias: function alias(what) {\n      this.each(function (property) {\n        property.alias(what);\n      });\n    },\n    exclude: function exclude(what) {\n      this.each(function (property) {\n        property.exclude(what);\n      });\n    },\n    flattenTo: function flattenTo(target) {\n      var targetProps = target.properties;\n      this.each(function (property, name) {\n        var subTarget = targetProps[name] || target.addProperty(name, {\n          meta: property.constructor\n        });\n        property.flattenTo(subTarget);\n      });\n    },\n    composeTo: function composeTo(target) {\n      var targetProps = target.properties;\n      this.each(function (property, name) {\n        var subTarget = targetProps[name] || target.addProperty(name, {\n          meta: property.constructor\n        });\n        property.composeTo(subTarget);\n      });\n    },\n    deCompose: function deCompose() {\n      this.eachR(function (property) {\n        property.open();\n      });\n      Joose.Managed.PropertySet.Composition.superClass.deCompose.call(this);\n    },\n    reCompose: function reCompose() {\n      Joose.Managed.PropertySet.Composition.superClass.reCompose.call(this);\n      this.each(function (property) {\n        property.close();\n      });\n    },\n    unapply: function unapply(from) {\n      this.eachR(function (property) {\n        property.unapply(from);\n      });\n    }\n  }).c;\n  Joose.Managed.Stem = new Joose.Proto.Class('Joose.Managed.Stem', {\n    isa: Joose.Managed.PropertySet.Composition,\n    targetMeta: null,\n    attributesMC: Joose.Managed.StemElement.Attributes,\n    methodsMC: Joose.Managed.StemElement.Methods,\n    requirementsMC: Joose.Managed.StemElement.Requirements,\n    methodsModifiersMC: Joose.Managed.StemElement.MethodModifiers,\n    processOrder: ['attributes', 'methods', 'requirements', 'methodsModifiers'],\n    initialize: function initialize(props) {\n      Joose.Managed.Stem.superClass.initialize.call(this, props);\n      var targetMeta = this.targetMeta;\n      this.addProperty('attributes', {\n        meta: this.attributesMC,\n        //it can be no 'targetMeta' in clones\n        properties: targetMeta ? targetMeta.attributes : {}\n      });\n      this.addProperty('methods', {\n        meta: this.methodsMC,\n        properties: targetMeta ? targetMeta.methods : {}\n      });\n      this.addProperty('requirements', {\n        meta: this.requirementsMC\n      });\n      this.addProperty('methodsModifiers', {\n        meta: this.methodsModifiersMC\n      });\n    },\n    reCompose: function reCompose() {\n      var c = this.targetMeta.c;\n      this.preApply(c);\n      Joose.Managed.Stem.superClass.reCompose.call(this);\n      this.apply(c);\n    },\n    deCompose: function deCompose() {\n      var c = this.targetMeta.c;\n      this.unapply(c);\n      Joose.Managed.Stem.superClass.deCompose.call(this);\n      this.postUnApply(c);\n    }\n  }).c;\n  Joose.Managed.Builder = new Joose.Proto.Class('Joose.Managed.Builder', {\n    targetMeta: null,\n    _buildStart: function _buildStart(targetMeta, props) {\n      targetMeta.stem.open();\n      Joose.A.each(['trait', 'traits', 'removeTrait', 'removeTraits', 'does', 'doesnot', 'doesnt'], function (builder) {\n        if (props[builder]) {\n          this[builder](targetMeta, props[builder]);\n          delete props[builder];\n        }\n      }, this);\n    },\n    _extend: function _extend(props) {\n      if (Joose.O.isEmpty(props)) return;\n      var targetMeta = this.targetMeta;\n\n      this._buildStart(targetMeta, props);\n\n      Joose.O.eachOwn(props, function (value, name) {\n        var handler = this[name];\n        if (!handler) throw new Error(\"Unknown builder [\" + name + \"] was used during extending of [\" + targetMeta.c + \"]\");\n        handler.call(this, targetMeta, value);\n      }, this);\n\n      this._buildComplete(targetMeta, props);\n    },\n    _buildComplete: function _buildComplete(targetMeta, props) {\n      targetMeta.stem.close();\n    },\n    methods: function methods(targetMeta, info) {\n      Joose.O.eachOwn(info, function (value, name) {\n        targetMeta.addMethod(name, value);\n      });\n    },\n    removeMethods: function removeMethods(targetMeta, info) {\n      Joose.A.each(info, function (name) {\n        targetMeta.removeMethod(name);\n      });\n    },\n    have: function have(targetMeta, info) {\n      Joose.O.eachOwn(info, function (value, name) {\n        targetMeta.addAttribute(name, value);\n      });\n    },\n    havenot: function havenot(targetMeta, info) {\n      Joose.A.each(info, function (name) {\n        targetMeta.removeAttribute(name);\n      });\n    },\n    havent: function havent(targetMeta, info) {\n      this.havenot(targetMeta, info);\n    },\n    after: function after(targetMeta, info) {\n      Joose.O.each(info, function (value, name) {\n        targetMeta.addMethodModifier(name, value, Joose.Managed.Property.MethodModifier.After);\n      });\n    },\n    before: function before(targetMeta, info) {\n      Joose.O.each(info, function (value, name) {\n        targetMeta.addMethodModifier(name, value, Joose.Managed.Property.MethodModifier.Before);\n      });\n    },\n    override: function override(targetMeta, info) {\n      Joose.O.each(info, function (value, name) {\n        targetMeta.addMethodModifier(name, value, Joose.Managed.Property.MethodModifier.Override);\n      });\n    },\n    around: function around(targetMeta, info) {\n      Joose.O.each(info, function (value, name) {\n        targetMeta.addMethodModifier(name, value, Joose.Managed.Property.MethodModifier.Around);\n      });\n    },\n    augment: function augment(targetMeta, info) {\n      Joose.O.each(info, function (value, name) {\n        targetMeta.addMethodModifier(name, value, Joose.Managed.Property.MethodModifier.Augment);\n      });\n    },\n    removeModifier: function removeModifier(targetMeta, info) {\n      Joose.A.each(info, function (name) {\n        targetMeta.removeMethodModifier(name);\n      });\n    },\n    does: function does(targetMeta, info) {\n      Joose.A.each(Joose.O.wantArray(info), function (desc) {\n        targetMeta.addRole(desc);\n      });\n    },\n    doesnot: function doesnot(targetMeta, info) {\n      Joose.A.each(Joose.O.wantArray(info), function (desc) {\n        targetMeta.removeRole(desc);\n      });\n    },\n    doesnt: function doesnt(targetMeta, info) {\n      this.doesnot(targetMeta, info);\n    },\n    trait: function trait() {\n      this.traits.apply(this, arguments);\n    },\n    traits: function traits(targetMeta, info) {\n      if (targetMeta.firstPass) return;\n      if (!targetMeta.meta.isDetached) throw \"Can't apply trait to not detached class\";\n      targetMeta.meta.extend({\n        does: info\n      });\n    },\n    removeTrait: function removeTrait() {\n      this.removeTraits.apply(this, arguments);\n    },\n    removeTraits: function removeTraits(targetMeta, info) {\n      if (!targetMeta.meta.isDetached) throw \"Can't remove trait from not detached class\";\n      targetMeta.meta.extend({\n        doesnot: info\n      });\n    },\n    name: function name(targetMeta, _name) {\n      targetMeta.name = _name;\n    }\n  }).c;\n  Joose.Managed.Class = new Joose.Proto.Class('Joose.Managed.Class', {\n    isa: Joose.Proto.Class,\n    stem: null,\n    stemClass: Joose.Managed.Stem,\n    stemClassCreated: false,\n    builder: null,\n    builderClass: Joose.Managed.Builder,\n    builderClassCreated: false,\n    isDetached: false,\n    firstPass: true,\n    // a special instance, which, when passed as 1st argument to constructor, signifies that constructor should\n    // skips traits processing for this instance\n    skipTraitsAnchor: {},\n    //build for metaclasses - collects traits from roles\n    BUILD: function BUILD() {\n      var sup = Joose.Managed.Class.superClass.BUILD.apply(this, arguments);\n      var props = sup.__extend__;\n      var traits = Joose.O.wantArray(props.trait || props.traits || []);\n      delete props.trait;\n      delete props.traits;\n      Joose.A.each(Joose.O.wantArray(props.does || []), function (arg) {\n        var role = arg.meta instanceof Joose.Managed.Class ? arg : arg.role;\n        if (role.meta.meta.isDetached) traits.push(role.meta.constructor);\n      });\n      if (traits.length) props.traits = traits;\n      return sup;\n    },\n    initInstance: function initInstance(instance, props) {\n      Joose.O.each(this.attributes, function (attribute, name) {\n        if (attribute instanceof Joose.Managed.Attribute) attribute.initFromConfig(instance, props);else if (props.hasOwnProperty(name)) instance[name] = props[name];\n      });\n    },\n    // we are using the same constructor for usual and meta- classes\n    defaultConstructor: function defaultConstructor() {\n      return function (skipTraitsAnchor, params) {\n        var thisMeta = this.meta;\n        var skipTraits = skipTraitsAnchor == thisMeta.skipTraitsAnchor;\n        var BUILD = this.BUILD;\n        var props = BUILD && BUILD.apply(this, skipTraits ? params : arguments) || (skipTraits ? params[0] : skipTraitsAnchor) || {}; // either looking for traits in __extend__ (meta-class) or in usual props (usual class)\n\n        var extend = props.__extend__ || props;\n        var traits = extend.trait || extend.traits;\n\n        if (traits || extend.detached) {\n          delete extend.trait;\n          delete extend.traits;\n          delete extend.detached;\n\n          if (!skipTraits) {\n            var classWithTrait = thisMeta.subClass({\n              does: traits || []\n            }, thisMeta.name);\n            var meta = classWithTrait.meta;\n            meta.isDetached = true;\n            return meta.instantiate(thisMeta.skipTraitsAnchor, arguments);\n          }\n        }\n\n        thisMeta.initInstance(this, props);\n        return thisMeta.hasMethod('initialize') && this.initialize(props) || this;\n      };\n    },\n    finalize: function finalize(extend) {\n      Joose.Managed.Class.superClass.finalize.call(this, extend);\n      this.stem.close();\n      this.afterMutate();\n    },\n    processStem: function processStem() {\n      Joose.Managed.Class.superClass.processStem.call(this);\n      this.builder = new this.builderClass({\n        targetMeta: this\n      });\n      this.stem = new this.stemClass({\n        name: this.name,\n        targetMeta: this\n      });\n      var builderClass = this.getClassInAttribute('builderClass');\n\n      if (builderClass) {\n        this.builderClassCreated = true;\n        this.addAttribute('builderClass', this.subClassOf(builderClass));\n      }\n\n      var stemClass = this.getClassInAttribute('stemClass');\n\n      if (stemClass) {\n        this.stemClassCreated = true;\n        this.addAttribute('stemClass', this.subClassOf(stemClass));\n      }\n    },\n    extend: function extend(props) {\n      if (props.builder) {\n        this.getBuilderTarget().meta.extend(props.builder);\n        delete props.builder;\n      }\n\n      if (props.stem) {\n        this.getStemTarget().meta.extend(props.stem);\n        delete props.stem;\n      }\n\n      this.builder._extend(props);\n\n      this.firstPass = false;\n      if (!this.stem.opened) this.afterMutate();\n    },\n    getBuilderTarget: function getBuilderTarget() {\n      var builderClass = this.getClassInAttribute('builderClass');\n      if (!builderClass) throw \"Attempt to extend a builder on non-meta class\";\n      return builderClass;\n    },\n    getStemTarget: function getStemTarget() {\n      var stemClass = this.getClassInAttribute('stemClass');\n      if (!stemClass) throw \"Attempt to extend a stem on non-meta class\";\n      return stemClass;\n    },\n    getClassInAttribute: function getClassInAttribute(attributeName) {\n      var attrClass = this.getAttribute(attributeName);\n      if (attrClass instanceof Joose.Managed.Property.Attribute) attrClass = attrClass.value;\n      return attrClass;\n    },\n    addMethodModifier: function addMethodModifier(name, func, type) {\n      var props = {};\n      props.init = func;\n      props.meta = type;\n      return this.stem.properties.methodsModifiers.addProperty(name, props);\n    },\n    removeMethodModifier: function removeMethodModifier(name) {\n      return this.stem.properties.methodsModifiers.removeProperty(name);\n    },\n    addMethod: function addMethod(name, func, props) {\n      props = props || {};\n      props.init = func;\n      return this.stem.properties.methods.addProperty(name, props);\n    },\n    addAttribute: function addAttribute(name, init, props) {\n      props = props || {};\n      props.init = init;\n      return this.stem.properties.attributes.addProperty(name, props);\n    },\n    removeMethod: function removeMethod(name) {\n      return this.stem.properties.methods.removeProperty(name);\n    },\n    removeAttribute: function removeAttribute(name) {\n      return this.stem.properties.attributes.removeProperty(name);\n    },\n    hasMethod: function hasMethod(name) {\n      return this.stem.properties.methods.haveProperty(name);\n    },\n    hasAttribute: function hasAttribute(name) {\n      return this.stem.properties.attributes.haveProperty(name);\n    },\n    hasMethodModifiersFor: function hasMethodModifiersFor(name) {\n      return this.stem.properties.methodsModifiers.haveProperty(name);\n    },\n    hasOwnMethod: function hasOwnMethod(name) {\n      return this.stem.properties.methods.haveOwnProperty(name);\n    },\n    hasOwnAttribute: function hasOwnAttribute(name) {\n      return this.stem.properties.attributes.haveOwnProperty(name);\n    },\n    getMethod: function getMethod(name) {\n      return this.stem.properties.methods.getProperty(name);\n    },\n    getAttribute: function getAttribute(name) {\n      return this.stem.properties.attributes.getProperty(name);\n    },\n    eachRole: function eachRole(roles, func, scope) {\n      Joose.A.each(roles, function (arg, index) {\n        var role = arg.meta instanceof Joose.Managed.Class ? arg : arg.role;\n        func.call(scope || this, arg, role, index);\n      }, this);\n    },\n    addRole: function addRole() {\n      this.eachRole(arguments, function (arg, role) {\n        this.beforeRoleAdd(role);\n        var desc = arg; //compose descriptor can contain 'alias' and 'exclude' fields, in this case actual reference should be stored\n        //into 'propertySet' field\n\n        if (role != arg) {\n          desc.propertySet = role.meta.stem;\n          delete desc.role;\n        } else desc = desc.meta.stem;\n\n        this.stem.addComposeInfo(desc);\n      }, this);\n    },\n    beforeRoleAdd: function beforeRoleAdd(role) {\n      var roleMeta = role.meta;\n      if (roleMeta.builderClassCreated) this.getBuilderTarget().meta.extend({\n        does: [roleMeta.getBuilderTarget()]\n      });\n      if (roleMeta.stemClassCreated) this.getStemTarget().meta.extend({\n        does: [roleMeta.getStemTarget()]\n      });\n      if (roleMeta.meta.isDetached && !this.firstPass) this.builder.traits(this, roleMeta.constructor);\n    },\n    beforeRoleRemove: function beforeRoleRemove(role) {\n      var roleMeta = role.meta;\n      if (roleMeta.builderClassCreated) this.getBuilderTarget().meta.extend({\n        doesnt: [roleMeta.getBuilderTarget()]\n      });\n      if (roleMeta.stemClassCreated) this.getStemTarget().meta.extend({\n        doesnt: [roleMeta.getStemTarget()]\n      });\n      if (roleMeta.meta.isDetached && !this.firstPass) this.builder.removeTraits(this, roleMeta.constructor);\n    },\n    removeRole: function removeRole() {\n      this.eachRole(arguments, function (arg, role) {\n        this.beforeRoleRemove(role);\n        this.stem.removeComposeInfo(role.meta.stem);\n      }, this);\n    },\n    getRoles: function getRoles() {\n      return Joose.A.map(this.stem.composedFrom, function (composeDesc) {\n        //compose descriptor can contain 'alias' and 'exclude' fields, in this case actual reference is stored\n        //into 'propertySet' field\n        if (!(composeDesc instanceof Joose.Managed.PropertySet)) return composeDesc.propertySet;\n        return composeDesc.targetMeta.c;\n      });\n    },\n    does: function does(role) {\n      var myRoles = this.getRoles();\n\n      for (var i = 0; i < myRoles.length; i++) {\n        if (role == myRoles[i]) return true;\n      }\n\n      for (var i = 0; i < myRoles.length; i++) {\n        if (myRoles[i].meta.does(role)) return true;\n      }\n\n      var superMeta = this.superClass.meta; // considering the case of inheriting from non-Joose classes\n\n      if (this.superClass != Joose.Proto.Empty && superMeta && superMeta.meta && superMeta.meta.hasMethod('does')) return superMeta.does(role);\n      return false;\n    },\n    getMethods: function getMethods() {\n      return this.stem.properties.methods;\n    },\n    getAttributes: function getAttributes() {\n      return this.stem.properties.attributes;\n    },\n    afterMutate: function afterMutate() {},\n    getCurrentMethod: function getCurrentMethod() {\n      for (var wrapper = arguments.callee.caller, count = 0; wrapper && count < 5; wrapper = wrapper.caller, count++) {\n        if (wrapper.__METHOD__) return wrapper.__METHOD__;\n      }\n\n      return null;\n    }\n  }).c;\n  Joose.Managed.Role = new Joose.Managed.Class('Joose.Managed.Role', {\n    isa: Joose.Managed.Class,\n    have: {\n      defaultSuperClass: Joose.Proto.Empty,\n      builderRole: null,\n      stemRole: null\n    },\n    methods: {\n      defaultConstructor: function defaultConstructor() {\n        return function () {\n          throw new Error(\"Roles cant be instantiated\");\n        };\n      },\n      processSuperClass: function processSuperClass() {\n        if (this.superClass != this.defaultSuperClass) throw new Error(\"Roles can't inherit from anything\");\n      },\n      getBuilderTarget: function getBuilderTarget() {\n        if (!this.builderRole) {\n          this.builderRole = new this.constructor().c;\n          this.builderClassCreated = true;\n        }\n\n        return this.builderRole;\n      },\n      getStemTarget: function getStemTarget() {\n        if (!this.stemRole) {\n          this.stemRole = new this.constructor().c;\n          this.stemClassCreated = true;\n        }\n\n        return this.stemRole;\n      },\n      addRequirement: function addRequirement(methodName) {\n        this.stem.properties.requirements.addProperty(methodName, {});\n      }\n    },\n    stem: {\n      methods: {\n        apply: function apply() {},\n        unapply: function unapply() {}\n      }\n    },\n    builder: {\n      methods: {\n        requires: function requires(targetClassMeta, info) {\n          Joose.A.each(Joose.O.wantArray(info), function (methodName) {\n            targetClassMeta.addRequirement(methodName);\n          }, this);\n        }\n      }\n    }\n  }).c;\n  Joose.Managed.Attribute = new Joose.Managed.Class('Joose.Managed.Attribute', {\n    isa: Joose.Managed.Property.Attribute,\n    have: {\n      is: null,\n      builder: null,\n      isPrivate: false,\n      role: null,\n      publicName: null,\n      setterName: null,\n      getterName: null,\n      //indicates the logical readableness/writeableness of the attribute\n      readable: false,\n      writeable: false,\n      //indicates the physical presense of the accessor (may be absent for \"combined\" accessors for example)\n      hasGetter: false,\n      hasSetter: false,\n      required: false,\n      canInlineSetRaw: true,\n      canInlineGetRaw: true\n    },\n    after: {\n      initialize: function initialize() {\n        var name = this.name;\n        this.publicName = name.replace(/^_+/, '');\n        this.slot = this.isPrivate ? '$' + name : name;\n        this.setterName = this.setterName || this.getSetterName();\n        this.getterName = this.getterName || this.getGetterName();\n        this.readable = this.hasGetter = /^r/i.test(this.is);\n        this.writeable = this.hasSetter = /^.w/i.test(this.is);\n      }\n    },\n    override: {\n      computeValue: function computeValue() {\n        var init = this.init;\n        if (Joose.O.isClass(init) || !Joose.O.isFunction(init)) this.SUPER();\n      },\n      preApply: function preApply(targetClass) {\n        targetClass.meta.extend({\n          methods: this.getAccessorsFor(targetClass)\n        });\n      },\n      postUnApply: function postUnApply(from) {\n        from.meta.extend({\n          removeMethods: this.getAccessorsFrom(from)\n        });\n      }\n    },\n    methods: {\n      getAccessorsFor: function getAccessorsFor(targetClass) {\n        var targetMeta = targetClass.meta;\n        var setterName = this.setterName;\n        var getterName = this.getterName;\n        var methods = {};\n\n        if (this.hasSetter && !targetMeta.hasMethod(setterName)) {\n          methods[setterName] = this.getSetter();\n          methods[setterName].ACCESSOR_FROM = this;\n        }\n\n        if (this.hasGetter && !targetMeta.hasMethod(getterName)) {\n          methods[getterName] = this.getGetter();\n          methods[getterName].ACCESSOR_FROM = this;\n        }\n\n        return methods;\n      },\n      getAccessorsFrom: function getAccessorsFrom(from) {\n        var targetMeta = from.meta;\n        var setterName = this.setterName;\n        var getterName = this.getterName;\n        var setter = this.hasSetter && targetMeta.getMethod(setterName);\n        var getter = this.hasGetter && targetMeta.getMethod(getterName);\n        var removeMethods = [];\n        if (setter && setter.value.ACCESSOR_FROM == this) removeMethods.push(setterName);\n        if (getter && getter.value.ACCESSOR_FROM == this) removeMethods.push(getterName);\n        return removeMethods;\n      },\n      getGetterName: function getGetterName() {\n        return 'get' + Joose.S.uppercaseFirst(this.publicName);\n      },\n      getSetterName: function getSetterName() {\n        return 'set' + Joose.S.uppercaseFirst(this.publicName);\n      },\n      getSetter: function getSetter() {\n        var me = this;\n        var slot = me.slot;\n        if (me.canInlineSetRaw) return function (value) {\n          this[slot] = value;\n          return this;\n        };else return function () {\n          return me.setRawValueTo.apply(this, arguments);\n        };\n      },\n      getGetter: function getGetter() {\n        var me = this;\n        var slot = me.slot;\n        if (me.canInlineGetRaw) return function (value) {\n          return this[slot];\n        };else return function () {\n          return me.getRawValueFrom.apply(this, arguments);\n        };\n      },\n      getValueFrom: function getValueFrom(instance) {\n        var getterName = this.getterName;\n        if (this.readable && instance.meta.hasMethod(getterName)) return instance[getterName]();\n        return this.getRawValueFrom(instance);\n      },\n      setValueTo: function setValueTo(instance, value) {\n        var setterName = this.setterName;\n        if (this.writeable && instance.meta.hasMethod(setterName)) instance[setterName](value);else this.setRawValueTo(instance, value);\n      },\n      initFromConfig: function initFromConfig(instance, config) {\n        var name = this.name;\n        var value,\n            isSet = false;\n\n        if (config.hasOwnProperty(name)) {\n          value = config[name];\n          isSet = true;\n        } else {\n          var init = this.init; // simple function (not class) has been used as \"init\" value\n\n          if (Joose.O.isFunction(init) && !Joose.O.isClass(init)) {\n            value = init.call(instance, config, name);\n            isSet = true;\n          } else if (this.builder) {\n            value = instance[this.builder.replace(/^this\\./, '')](config, name);\n            isSet = true;\n          }\n        }\n\n        if (isSet) this.setRawValueTo(instance, value);else if (this.required) throw new Error(\"Required attribute [\" + name + \"] is missed during initialization of \" + instance);\n      }\n    }\n  }).c;\n  Joose.Managed.Attribute.Builder = new Joose.Managed.Role('Joose.Managed.Attribute.Builder', {\n    have: {\n      defaultAttributeClass: Joose.Managed.Attribute\n    },\n    builder: {\n      methods: {\n        has: function has(targetClassMeta, info) {\n          Joose.O.eachOwn(info, function (props, name) {\n            if (_typeof(props) != 'object' || props == null || props.constructor == / /.constructor) props = {\n              init: props\n            };\n            props.meta = props.meta || targetClassMeta.defaultAttributeClass;\n\n            if (/^__/.test(name)) {\n              name = name.replace(/^_+/, '');\n              props.isPrivate = true;\n            }\n\n            targetClassMeta.addAttribute(name, props.init, props);\n          }, this);\n        },\n        hasnot: function hasnot(targetClassMeta, info) {\n          this.havenot(targetClassMeta, info);\n        },\n        hasnt: function hasnt(targetClassMeta, info) {\n          this.hasnot(targetClassMeta, info);\n        }\n      }\n    }\n  }).c;\n  Joose.Managed.My = new Joose.Managed.Role('Joose.Managed.My', {\n    have: {\n      myClass: null,\n      needToReAlias: false\n    },\n    methods: {\n      createMy: function createMy(extend) {\n        var thisMeta = this.meta;\n        var isRole = this instanceof Joose.Managed.Role;\n        var myExtend = extend.my || {};\n        delete extend.my; // Symbiont will generally have the same meta class as its hoster, excepting the cases, when the superclass also have the symbiont. \n        // In such cases, the meta class for symbiont will be inherited (unless explicitly specified)\n\n        var superClassMy = this.superClass.meta.myClass;\n        if (!isRole && !myExtend.isa && superClassMy) myExtend.isa = superClassMy;\n        if (!myExtend.meta && !myExtend.isa) myExtend.meta = this.constructor;\n        myExtend.name = this.name + '.my';\n        var createdClass = this.myClass = Class(myExtend);\n        var c = this.c;\n        c.prototype.my = c.my = isRole ? createdClass : new createdClass({\n          HOST: c\n        });\n        this.needToReAlias = true;\n      },\n      aliasStaticMethods: function aliasStaticMethods() {\n        this.needToReAlias = false;\n        var c = this.c;\n        var myProto = this.myClass.prototype;\n        Joose.O.eachOwn(c, function (property, name) {\n          if (property.IS_ALIAS) delete c[name];\n        });\n        this.myClass.meta.stem.properties.methods.each(function (method, name) {\n          if (!c[name]) (c[name] = function () {\n            return myProto[name].apply(c.my, arguments);\n          }).IS_ALIAS = true;\n        });\n      }\n    },\n    override: {\n      extend: function extend(props) {\n        var myClass = this.myClass;\n        if (!myClass && this.superClass.meta.myClass) this.createMy(props);\n\n        if (props.my) {\n          if (!myClass) this.createMy(props);else {\n            this.needToReAlias = true;\n            myClass.meta.extend(props.my);\n            delete props.my;\n          }\n        }\n\n        this.SUPER(props);\n        if (this.needToReAlias && !(this instanceof Joose.Managed.Role)) this.aliasStaticMethods();\n      }\n    },\n    before: {\n      addRole: function addRole() {\n        var myStem;\n        Joose.A.each(arguments, function (arg) {\n          if (!arg) throw new Error(\"Attempt to consume an undefined Role into [\" + this.name + \"]\"); //instanceof Class to allow treat classes as roles\n\n          var role = arg.meta instanceof Joose.Managed.Class ? arg : arg.role;\n\n          if (role.meta.meta.hasAttribute('myClass') && role.meta.myClass) {\n            if (!this.myClass) {\n              this.createMy({\n                my: {\n                  does: role.meta.myClass\n                }\n              });\n              return;\n            }\n\n            myStem = this.myClass.meta.stem;\n            if (!myStem.opened) myStem.open();\n            myStem.addComposeInfo(role.my.meta.stem);\n          }\n        }, this);\n\n        if (myStem) {\n          myStem.close();\n          this.needToReAlias = true;\n        }\n      },\n      removeRole: function removeRole() {\n        if (!this.myClass) return;\n        var myStem = this.myClass.meta.stem;\n        myStem.open();\n        Joose.A.each(arguments, function (role) {\n          if (role.meta.meta.hasAttribute('myClass') && role.meta.myClass) {\n            myStem.removeComposeInfo(role.my.meta.stem);\n            this.needToReAlias = true;\n          }\n        }, this);\n        myStem.close();\n      }\n    }\n  }).c;\n  Joose.Namespace = Joose.stub();\n  Joose.Namespace.Able = new Joose.Managed.Role('Joose.Namespace.Able', {\n    have: {\n      bodyFunc: null\n    },\n    before: {\n      extend: function extend(_extend2) {\n        if (_extend2.body) {\n          this.bodyFunc = _extend2.body;\n          delete _extend2.body;\n        }\n      }\n    },\n    after: {\n      afterMutate: function afterMutate() {\n        var bodyFunc = this.bodyFunc;\n        delete this.bodyFunc;\n        if (bodyFunc) Joose.Namespace.Manager.my.executeIn(this.c, bodyFunc);\n      }\n    }\n  }).c;\n  Joose.Managed.Bootstrap = new Joose.Managed.Role('Joose.Managed.Bootstrap', {\n    does: [Joose.Namespace.Able, Joose.Managed.My, Joose.Managed.Attribute.Builder]\n  }).c;\n  Joose.Meta = Joose.stub();\n  Joose.Meta.Object = new Joose.Proto.Class('Joose.Meta.Object', {\n    isa: Joose.Proto.Object\n  }).c;\n  Joose.Meta.Class = new Joose.Managed.Class('Joose.Meta.Class', {\n    isa: Joose.Managed.Class,\n    does: Joose.Managed.Bootstrap,\n    have: {\n      defaultSuperClass: Joose.Meta.Object\n    }\n  }).c;\n  Joose.Meta.Role = new Joose.Meta.Class('Joose.Meta.Role', {\n    isa: Joose.Managed.Role,\n    does: Joose.Managed.Bootstrap\n  }).c;\n  Joose.Namespace.Keeper = new Joose.Meta.Class('Joose.Namespace.Keeper', {\n    isa: Joose.Meta.Class,\n    have: {\n      externalConstructor: null\n    },\n    methods: {\n      defaultConstructor: function defaultConstructor() {\n        return function () {\n          //constructors should assume that meta is attached to 'arguments.callee' (not to 'this') \n          var thisMeta = arguments.callee.meta;\n          if (thisMeta instanceof Joose.Namespace.Keeper) throw new Error(\"Module [\" + thisMeta.c + \"] may not be instantiated. Forgot to 'use' the class with the same name?\");\n          var externalConstructor = thisMeta.externalConstructor;\n\n          if (typeof externalConstructor == 'function') {\n            externalConstructor.meta = thisMeta;\n            return externalConstructor.apply(this, arguments);\n          }\n\n          throw \"NamespaceKeeper of [\" + thisMeta.name + \"] was planted incorrectly.\";\n        };\n      },\n      //withClass should be not constructed yet on this stage (see Joose.Proto.Class.construct)\n      //it should be on the 'constructorOnly' life stage (should already have constructor)\n      plant: function plant(withClass) {\n        var keeper = this.c;\n        keeper.meta = withClass.meta;\n        keeper.meta.c = keeper;\n        keeper.meta.externalConstructor = withClass;\n      }\n    }\n  }).c;\n  Joose.Namespace.Manager = new Joose.Managed.Class('Joose.Namespace.Manager', {\n    have: {\n      current: null\n    },\n    methods: {\n      initialize: function initialize() {\n        this.current = [Joose.top];\n      },\n      getCurrent: function getCurrent() {\n        return this.current[0];\n      },\n      executeIn: function executeIn(ns, func) {\n        var current = this.current;\n        current.unshift(ns);\n        var res = func.call(ns, ns);\n        current.shift();\n        return res;\n      },\n      earlyCreate: function earlyCreate(name, metaClass, props) {\n        props.constructorOnly = true;\n        return new metaClass(name, props).c;\n      },\n      //this function establishing the full \"namespace chain\" (including the last element)\n      create: function create(nsName, metaClass, extend) {\n        //if no name provided, then we creating an anonymous class, so just skip all the namespace manipulations\n        if (!nsName) return new metaClass(nsName, extend).c;\n        var me = this;\n        if (/^\\./.test(nsName)) return this.executeIn(Joose.top, function () {\n          return me.create(nsName.replace(/^\\./, ''), metaClass, extend);\n        });\n        var props = extend || {};\n        var parts = Joose.S.saneSplit(nsName, '.');\n        var object = this.getCurrent();\n        var soFar = object == Joose.top ? [] : Joose.S.saneSplit(object.meta.name, '.');\n\n        for (var i = 0; i < parts.length; i++) {\n          var part = parts[i];\n          var isLast = i == parts.length - 1;\n          if (part == \"meta\" || part == \"my\" || !part) throw \"Module name [\" + nsName + \"] may not include a part called 'meta' or 'my' or empty part.\";\n          var cur = object[part];\n          soFar.push(part);\n          var soFarName = soFar.join(\".\");\n          var needFinalize = false;\n          var nsKeeper; // if the namespace segment is empty\n\n          if (typeof cur == \"undefined\") {\n            if (isLast) {\n              // perform \"early create\" which just fills the namespace segment with right constructor\n              // this allows us to have a right constructor in the namespace segment when the `body` will be called\n              nsKeeper = this.earlyCreate(soFarName, metaClass, props);\n              needFinalize = true;\n            } else nsKeeper = new Joose.Namespace.Keeper(soFarName).c;\n\n            object[part] = nsKeeper;\n            cur = nsKeeper;\n          } else if (isLast && cur && cur.meta) {\n            var currentMeta = cur.meta;\n            if (metaClass == Joose.Namespace.Keeper) //`Module` over something case - extend the original\n              currentMeta.extend(props);else {\n              if (currentMeta instanceof Joose.Namespace.Keeper) {\n                currentMeta.plant(this.earlyCreate(soFarName, metaClass, props));\n                needFinalize = true;\n              } else if (!Joose.C.ignoreRepeatedDeclarations) throw new Error(\"Double declaration of [\" + soFarName + \"]\");\n            }\n          } else if (isLast && !(cur && cur.meta && cur.meta.meta)) throw \"Trying to setup module \" + soFarName + \" failed. There is already something: \" + cur; // hook to allow embedd resource into meta\n\n\n          if (isLast) this.prepareMeta(cur.meta);\n          if (needFinalize) cur.meta.construct(props);\n          object = cur;\n        }\n\n        return object;\n      },\n      prepareMeta: function prepareMeta() {},\n      prepareProperties: function prepareProperties(name, props, defaultMeta, callback) {\n        if (name && typeof name != 'string') {\n          props = name;\n          name = null;\n        }\n\n        var meta;\n\n        if (props && props.meta) {\n          meta = props.meta;\n          delete props.meta;\n        }\n\n        if (!meta) if (props && typeof props.isa == 'function' && props.isa.meta) meta = props.isa.meta.constructor;else meta = defaultMeta;\n        return callback.call(this, name, meta, props);\n      },\n      getDefaultHelperFor: function getDefaultHelperFor(metaClass) {\n        var me = this;\n        return function (name, props) {\n          return me.prepareProperties(name, props, metaClass, function (name, meta, props) {\n            return me.create(name, meta, props);\n          });\n        };\n      },\n      register: function register(helperName, metaClass, func) {\n        var me = this;\n\n        if (this.meta.hasMethod(helperName)) {\n          var helper = function helper() {\n            return me[helperName].apply(me, arguments);\n          };\n\n          if (!Joose.top[helperName]) Joose.top[helperName] = helper;\n          if (!Joose[helperName]) Joose[helperName] = helper;\n          if (Joose.is_NodeJS && typeof exports != 'undefined') exports[helperName] = helper;\n        } else {\n          var methods = {};\n          methods[helperName] = func || this.getDefaultHelperFor(metaClass);\n          this.meta.extend({\n            methods: methods\n          });\n          this.register(helperName);\n        }\n      },\n      Module: function Module(name, props) {\n        return this.prepareProperties(name, props, Joose.Namespace.Keeper, function (name, meta, props) {\n          if (typeof props == 'function') props = {\n            body: props\n          };\n          return this.create(name, meta, props);\n        });\n      }\n    }\n  }).c;\n  Joose.Namespace.Manager.my = new Joose.Namespace.Manager();\n  Joose.Namespace.Manager.my.register('Class', Joose.Meta.Class);\n  Joose.Namespace.Manager.my.register('Role', Joose.Meta.Role);\n  Joose.Namespace.Manager.my.register('Module'); // for the rest of the package\n\n  var Class = Joose.Class;\n  var Role = Joose.Role;\n  Role('Joose.Attribute.Delegate', {\n    have: {\n      handles: null\n    },\n    override: {\n      eachDelegate: function eachDelegate(handles, func, scope) {\n        if (typeof handles == 'string') return func.call(scope, handles, handles);\n        if (handles instanceof Array) return Joose.A.each(handles, function (delegateTo) {\n          func.call(scope, delegateTo, delegateTo);\n        });\n        if (handles === Object(handles)) Joose.O.eachOwn(handles, function (delegateTo, handleAs) {\n          func.call(scope, handleAs, delegateTo);\n        });\n      },\n      getAccessorsFor: function getAccessorsFor(targetClass) {\n        var targetMeta = targetClass.meta;\n        var methods = this.SUPER(targetClass);\n        var me = this;\n        this.eachDelegate(this.handles, function (handleAs, delegateTo) {\n          if (!targetMeta.hasMethod(handleAs)) {\n            var handler = methods[handleAs] = function () {\n              var attrValue = me.getValueFrom(this);\n              return attrValue[delegateTo].apply(attrValue, arguments);\n            };\n\n            handler.ACCESSOR_FROM = me;\n          }\n        });\n        return methods;\n      },\n      getAccessorsFrom: function getAccessorsFrom(from) {\n        var methods = this.SUPER(from);\n        var me = this;\n        var targetMeta = from.meta;\n        this.eachDelegate(this.handles, function (handleAs) {\n          var handler = targetMeta.getMethod(handleAs);\n          if (handler && handler.value.ACCESSOR_FROM == me) methods.push(handleAs);\n        });\n        return methods;\n      }\n    }\n  });\n  Role('Joose.Attribute.Trigger', {\n    have: {\n      trigger: null\n    },\n    after: {\n      initialize: function initialize() {\n        if (this.trigger) {\n          if (!this.writeable) throw new Error(\"Can't use `trigger` for read-only attributes\");\n          this.hasSetter = true;\n        }\n      }\n    },\n    override: {\n      getSetter: function getSetter() {\n        var original = this.SUPER();\n        var trigger = this.trigger;\n        if (!trigger) return original;\n        var me = this;\n        var init = Joose.O.isFunction(me.init) ? null : me.init;\n        return function () {\n          var oldValue = me.hasValue(this) ? me.getValueFrom(this) : init;\n          var res = original.apply(this, arguments);\n          trigger.call(this, me.getValueFrom(this), oldValue);\n          return res;\n        };\n      }\n    }\n  });\n  Role('Joose.Attribute.Lazy', {\n    have: {\n      lazy: null\n    },\n    before: {\n      computeValue: function computeValue() {\n        if (typeof this.init == 'function' && this.lazy) {\n          this.lazy = this.init;\n          delete this.init;\n        }\n      }\n    },\n    after: {\n      initialize: function initialize() {\n        if (this.lazy) this.readable = this.hasGetter = true;\n      }\n    },\n    override: {\n      getGetter: function getGetter() {\n        var original = this.SUPER();\n        var lazy = this.lazy;\n        if (!lazy) return original;\n        var me = this;\n        return function () {\n          if (!me.hasValue(this)) {\n            var initializer = typeof lazy == 'function' ? lazy : this[lazy.replace(/^this\\./, '')];\n            me.setValueTo(this, initializer.apply(this, arguments));\n          }\n\n          return original.call(this);\n        };\n      }\n    }\n  });\n  Role('Joose.Attribute.Accessor.Combined', {\n    have: {\n      isCombined: false\n    },\n    after: {\n      initialize: function initialize() {\n        this.isCombined = this.isCombined || /..c/i.test(this.is);\n\n        if (this.isCombined) {\n          this.slot = '$$' + this.name;\n          this.hasGetter = true;\n          this.hasSetter = false;\n          this.setterName = this.getterName = this.publicName;\n        }\n      }\n    },\n    override: {\n      getGetter: function getGetter() {\n        var getter = this.SUPER();\n        if (!this.isCombined) return getter;\n        var setter = this.getSetter();\n        var me = this;\n        return function () {\n          if (!arguments.length) {\n            if (me.readable) return getter.call(this);\n            throw new Error(\"Call to getter of unreadable attribute: [\" + me.name + \"]\");\n          }\n\n          if (me.writeable) return setter.apply(this, arguments);\n          throw new Error(\"Call to setter of read-only attribute: [\" + me.name + \"]\");\n        };\n      }\n    }\n  });\n  Joose.Managed.Attribute.meta.extend({\n    does: [Joose.Attribute.Delegate, Joose.Attribute.Trigger, Joose.Attribute.Lazy, Joose.Attribute.Accessor.Combined]\n  });\n  Role('Joose.Meta.Singleton', {\n    has: {\n      forceInstance: Joose.I.Object,\n      instance: null\n    },\n    override: {\n      defaultConstructor: function defaultConstructor() {\n        var meta = this;\n        var previous = this.SUPER();\n        this.adaptConstructor(previous);\n        return function (forceInstance, params) {\n          if (forceInstance == meta.forceInstance) return previous.apply(this, params) || this;\n          var instance = meta.instance;\n          if (!instance) instance = meta.instance = new meta.c(meta.forceInstance, arguments);\n          if (meta.hasMethod('configure')) instance.configure.apply(instance, arguments);\n          return instance;\n        };\n      }\n    }\n  });\n  Joose.Namespace.Manager.my.register('Singleton', Class({\n    isa: Joose.Meta.Class,\n    meta: Joose.Meta.Class,\n    does: Joose.Meta.Singleton\n  }));\n  ;\n}();\n;\n;\nJoose.C.ignoreRepeatedDeclarations = true;\nClass('JooseX.Observable.Event', {\n  has: {\n    name: {\n      required: true\n    },\n    args: {\n      required: true\n    },\n    source: {\n      required: true\n    },\n    splat: null,\n    current: null,\n    bubbling: true\n  },\n  methods: {\n    stopPropagation: function stopPropagation() {\n      this.bubbling = false;\n    }\n  }\n});\nClass('JooseX.Observable.Listener', {\n  has: {\n    channel: {\n      required: true\n    },\n    eventName: {\n      required: true\n    },\n    func: {\n      required: true\n    },\n    scope: null,\n    single: false,\n    buffer: null,\n    bufferMax: null,\n    bufferStartedAt: null,\n    bufferTimeout: null,\n    delayTimeout: null,\n    delay: null\n  },\n  methods: {\n    activate: function activate(event, args) {\n      var me = this;\n\n      if (me.buffer != null) {\n        if (me.bufferMax != null) if (!me.bufferStartedAt) me.bufferStartedAt = new Date();else if (new Date() - me.bufferStartedAt > me.bufferMax) return;\n        if (me.bufferTimeout) clearTimeout(me.bufferTimeout);\n        me.bufferTimeout = setTimeout(function () {\n          delete me.bufferStartedAt;\n          delete me.bufferTimeout;\n          me.doActivate(event, args);\n        }, me.buffer);\n        return;\n      }\n\n      if (me.delay != null) {\n        me.delayTimeout = setTimeout(function () {\n          delete me.delayTimeout;\n          me.doActivate(event, args);\n        }, me.delay);\n        return;\n      }\n\n      return me.doActivate(event, args);\n    },\n    doActivate: function doActivate(event, args) {\n      if (this.single) this.remove();\n      return this.func.apply(this.scope || event.source, [event].concat(args)) !== false;\n    },\n    cancel: function cancel() {\n      if (this.buffer) {\n        clearTimeout(this.bufferTimeout);\n        delete this.bufferTimeout;\n        delete this.bufferStartedAt;\n      }\n\n      if (this.delay) clearTimeout(this.delayTimeout);\n    },\n    remove: function remove() {\n      this.channel.removeListener(this);\n    }\n  }\n});\nClass('JooseX.Observable.Channel', {\n  has: {\n    channels: Joose.I.Object,\n    listeners: Joose.I.Object\n  },\n  methods: {\n    destroy: function destroy() {\n      Joose.O.each(this.channels, function (channel, name) {\n        channel.purgeListeners();\n      });\n      this.channels = null; // cleanup paranoya\n\n      Joose.O.each(this.listeners, function (value, name) {\n        this.listeners[name] = null;\n      }, this);\n      this.listeners = null;\n    },\n    // (!) segments array will be destroyed in this method\n    getListenersFor: function getListenersFor(segments, name, activators) {\n      var listeners = this.listeners;\n\n      if (listeners['**']) {\n        var splat = segments.concat(name);\n        Joose.A.each(listeners['**'], function (listener) {\n          activators.push({\n            listener: listener,\n            splat: splat\n          });\n        });\n      }\n\n      if (segments.length) {\n        var next = this.getSingleChannel(segments.shift(), true);\n        if (next) next.getListenersFor(segments, name, activators);\n      } else {\n        if (listeners['*']) Joose.A.each(listeners['*'], function (listener) {\n          activators.push({\n            listener: listener,\n            splat: name\n          });\n        });\n        if (listeners[name]) Joose.A.each(listeners[name], function (listener) {\n          activators.push({\n            listener: listener\n          });\n        });\n      }\n    },\n    hasListenerFor: function hasListenerFor(segments, name) {\n      var listeners = this.listeners;\n      if (listeners['**'] && listeners['**'].length) return true;\n\n      if (segments.length) {\n        var next = this.getSingleChannel(segments.shift(), true);\n        if (next) return next.hasListenerFor(segments, name);\n      } else {\n        if (listeners['*'] && listeners['*'].length) return true;\n        if (listeners[name] && listeners[name].length) return true;\n      }\n\n      return false;\n    },\n    addListener: function addListener(listener) {\n      var eventName = listener.eventName;\n      var listeners = this.listeners;\n      listeners[eventName] = listeners[eventName] || [];\n      listeners[eventName].push(listener);\n    },\n    removeListener: function removeListener(listenerToRemove) {\n      // already purged\n      if (!this.listeners) return;\n      var eventListeners = this.listeners[listenerToRemove.eventName];\n      eventListeners && Joose.A.each(eventListeners, function (listener, index) {\n        if (listener == listenerToRemove) {\n          eventListeners.splice(index, 1);\n          return false;\n        }\n      });\n    },\n    removeListenerByHandler: function removeListenerByHandler(eventName, func, scope) {\n      var eventListeners = this.listeners[eventName];\n      eventListeners && Joose.A.each(eventListeners, function (listener, index) {\n        if (listener.func == func && listener.scope == scope) {\n          eventListeners.splice(index, 1);\n          return false;\n        }\n      });\n    },\n    getSingleChannel: function getSingleChannel(name, doNotCreate) {\n      var channels = this.channels;\n      if (channels[name]) return channels[name];\n      if (doNotCreate) return null;\n      return channels[name] = new JooseX.Observable.Channel();\n    },\n    // (!) segments array will be destroyed in this method\n    getChannel: function getChannel(segments, doNotCreate) {\n      if (!segments.length) return this;\n      var next = this.getSingleChannel(segments.shift(), doNotCreate);\n      if (doNotCreate && !next) return null;\n      return next.getChannel(segments, doNotCreate);\n    }\n  }\n});\nRole('JooseX.Observable', {\n  /*PKGVERSION*/\n  VERSION: 0.04,\n  //    use : [ \n  //        'JooseX.Observable.Channel',    \n  //        'JooseX.Observable.Listener', \n  //        'JooseX.Observable.Event'    \n  //    ],\n  //    trait   : 'JooseX.Observable.Meta',\n  has: {\n    rootChannel: {\n      is: 'rw',\n      init: function init() {\n        return new JooseX.Observable.Channel();\n      }\n    },\n    suspendCounter: 0\n  },\n  methods: {\n    getBubbleTarget: function getBubbleTarget() {},\n    parseEventPath: function parseEventPath(path) {\n      var channels = path.split('/');\n      var eventName = channels.pop();\n      if (channels.length && !channels[0]) channels.shift();\n      return {\n        channels: channels,\n        eventName: eventName\n      };\n    },\n    on: function on(path, func, scope, options) {\n      if (!func) throw \"Not valid listener function provided when subsribing on event: \" + path;\n      var parsed = this.parseEventPath(path);\n      var channel = this.getRootChannel().getChannel(parsed.channels);\n      var listener = new JooseX.Observable.Listener(Joose.O.extend(options || {}, {\n        channel: channel,\n        eventName: parsed.eventName,\n        func: func,\n        scope: scope\n      }));\n      channel.addListener(listener);\n      return listener;\n    },\n    un: function un(path, func, scope) {\n      if (path instanceof JooseX.Observable.Listener) {\n        path.remove();\n        return;\n      }\n\n      var parsed = this.parseEventPath(path);\n      var channel = this.getRootChannel().getChannel(parsed.channels, true);\n      if (channel) channel.removeListenerByHandler(parsed.eventName, func, scope);\n    },\n    emit: function emit() {\n      return this.fireEvent.apply(this, arguments);\n    },\n    fireEvent: function fireEvent(path) {\n      if (this.suspendCounter) return;\n      var args = Array.prototype.slice.call(arguments, 1);\n      var event = new JooseX.Observable.Event({\n        name: path,\n        args: args,\n        source: this\n      });\n      return this.propagateEvent(event, path, args);\n    },\n    propagateEvent: function propagateEvent(event, path, args) {\n      if (this.suspendCounter) return;\n      var parsed = this.parseEventPath(path);\n      var eventName = parsed.eventName;\n      if (!eventName == '*' || eventName == '**') throw new Error(\"Can't fire an empty event or event with `*`, `**` names \");\n      var activators = [];\n      this.getRootChannel().getListenersFor(parsed.channels, eventName, activators);\n      var res = true;\n      event.current = this;\n      if (activators.length) Joose.A.each(activators, function (activator) {\n        event.splat = activator.splat;\n        res = activator.listener.activate(event, args) !== false && res;\n      });\n\n      if (event.bubbling) {\n        var further = this.getBubbleTarget();\n        if (further) res = further.propagateEvent(event, path, args) !== false && res;\n      }\n\n      return res;\n    },\n    hasListenerFor: function hasListenerFor(path) {\n      var parsed = this.parseEventPath(path);\n      return this.getRootChannel().hasListenerFor(parsed.channels, parsed.eventName);\n    },\n    purgeListeners: function purgeListeners() {\n      this.rootChannel.destroy();\n      this.rootChannel = new JooseX.Observable.Channel();\n    },\n    suspendEvents: function suspendEvents() {\n      this.suspendCounter++;\n    },\n    resumeEvents: function resumeEvents() {\n      this.suspendCounter--;\n      if (this.suspendCounter < 0) this.suspendCounter = 0;\n    }\n  }\n});\n;\n\nif (typeof bowser === \"undefined\") {\n  ;\n  /*!\n   * Bowser - a browser detector\n   * https://github.com/ded/bowser\n   * MIT License | (c) Dustin Diaz 2015\n   */\n\n  !function (root, name, definition) {\n    // SIESTA PATCH BEGIN\n    // if (typeof module != 'undefined' && module.exports) module.exports = definition()\n    // else if (typeof define == 'function' && define.amd) define(name, definition)\n    // else root[name] = definition()\n    var global = typeof window != 'undefined' ? window : root;\n    global[name] = definition(); // SIESTA PATCH END\n  }(this, 'bowser', function () {\n    /**\n      * See useragents.js for examples of navigator.userAgent\n      */\n    var t = true;\n\n    function detect(ua) {\n      function getFirstMatch(regex) {\n        var match = ua.match(regex);\n        return match && match.length > 1 && match[1] || '';\n      }\n\n      function getSecondMatch(regex) {\n        var match = ua.match(regex);\n        return match && match.length > 1 && match[2] || '';\n      }\n\n      var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),\n          likeAndroid = /like android/i.test(ua),\n          android = !likeAndroid && /android/i.test(ua),\n          nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua),\n          nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua),\n          chromeos = /CrOS/.test(ua),\n          silk = /silk/i.test(ua),\n          sailfish = /sailfish/i.test(ua),\n          tizen = /tizen/i.test(ua),\n          webos = /(web|hpw)os/i.test(ua),\n          windowsphone = /windows phone/i.test(ua),\n          samsungBrowser = /SamsungBrowser/i.test(ua),\n          windows = !windowsphone && /windows/i.test(ua),\n          mac = !iosdevice && !silk && /macintosh/i.test(ua),\n          linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua),\n          edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i),\n          versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i),\n          tablet = /tablet/i.test(ua),\n          mobile = !tablet && /[^-]mobi/i.test(ua),\n          xbox = /xbox/i.test(ua),\n          result; // SIESTA PATCH BEGIN\n\n      var m;\n\n      if (m = /Edg\\/(\\d+(\\.\\d+)*)/i.exec(ua)) {\n        //  a new Edge\n        result = {\n          name: 'Edge Chromium',\n          edge: t,\n          chrome: t,\n          version: m[1]\n        };\n      } else // SIESTA PATCH END\n        if (/opera/i.test(ua)) {\n          //  an old Opera\n          result = {\n            name: 'Opera',\n            opera: t,\n            version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/opr|opios/i.test(ua)) {\n          // a new Opera\n          result = {\n            name: 'Opera',\n            opera: t,\n            version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n          };\n        } else if (/SamsungBrowser/i.test(ua)) {\n          result = {\n            name: 'Samsung Internet for Android',\n            samsungBrowser: t,\n            version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/coast/i.test(ua)) {\n          result = {\n            name: 'Opera Coast',\n            coast: t,\n            version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/yabrowser/i.test(ua)) {\n          result = {\n            name: 'Yandex Browser',\n            yandexbrowser: t,\n            version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/ucbrowser/i.test(ua)) {\n          result = {\n            name: 'UC Browser',\n            ucbrowser: t,\n            version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n          };\n        } else if (/mxios/i.test(ua)) {\n          result = {\n            name: 'Maxthon',\n            maxthon: t,\n            version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n          };\n        } else if (/epiphany/i.test(ua)) {\n          result = {\n            name: 'Epiphany',\n            epiphany: t,\n            version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n          };\n        } else if (/puffin/i.test(ua)) {\n          result = {\n            name: 'Puffin',\n            puffin: t,\n            version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n          };\n        } else if (/sleipnir/i.test(ua)) {\n          result = {\n            name: 'Sleipnir',\n            sleipnir: t,\n            version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n          };\n        } else if (/k-meleon/i.test(ua)) {\n          result = {\n            name: 'K-Meleon',\n            kMeleon: t,\n            version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n          };\n        } else if (windowsphone) {\n          result = {\n            name: 'Windows Phone',\n            windowsphone: t\n          };\n\n          if (edgeVersion) {\n            result.msedge = t;\n            result.version = edgeVersion;\n          } else {\n            result.msie = t;\n            result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i);\n          }\n        } else if (/msie|trident/i.test(ua)) {\n          result = {\n            name: 'Internet Explorer',\n            msie: t,\n            version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (chromeos) {\n          result = {\n            name: 'Chrome',\n            chromeos: t,\n            chromeBook: t,\n            chrome: t,\n            version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/chrome.+? edge/i.test(ua)) {\n          result = {\n            name: 'Microsoft Edge',\n            msedge: t,\n            version: edgeVersion\n          };\n        } else if (/vivaldi/i.test(ua)) {\n          result = {\n            name: 'Vivaldi',\n            vivaldi: t,\n            version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n          };\n        } else if (sailfish) {\n          result = {\n            name: 'Sailfish',\n            sailfish: t,\n            version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/seamonkey\\//i.test(ua)) {\n          result = {\n            name: 'SeaMonkey',\n            seamonkey: t,\n            version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/firefox|iceweasel|fxios/i.test(ua)) {\n          result = {\n            name: 'Firefox',\n            firefox: t,\n            version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n          };\n\n          if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n            result.firefoxos = t;\n          }\n        } else if (silk) {\n          result = {\n            name: 'Amazon Silk',\n            silk: t,\n            version: getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/phantom/i.test(ua)) {\n          result = {\n            name: 'PhantomJS',\n            phantom: t,\n            version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/slimerjs/i.test(ua)) {\n          result = {\n            name: 'SlimerJS',\n            slimer: t,\n            version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n          result = {\n            name: 'BlackBerry',\n            blackberry: t,\n            version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (webos) {\n          result = {\n            name: 'WebOS',\n            webos: t,\n            version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n          };\n          /touchpad\\//i.test(ua) && (result.touchpad = t);\n        } else if (/bada/i.test(ua)) {\n          result = {\n            name: 'Bada',\n            bada: t,\n            version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (tizen) {\n          result = {\n            name: 'Tizen',\n            tizen: t,\n            version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n          };\n        } else if (/qupzilla/i.test(ua)) {\n          result = {\n            name: 'QupZilla',\n            qupzilla: t,\n            version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n          };\n        } else if (/chromium/i.test(ua)) {\n          result = {\n            name: 'Chromium',\n            chromium: t,\n            version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n          };\n        } else if (/chrome|crios|crmo/i.test(ua)) {\n          result = {\n            name: 'Chrome',\n            chrome: t,\n            version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n          };\n        } else if (android) {\n          result = {\n            name: 'Android',\n            version: versionIdentifier\n          };\n        } else if (/safari|applewebkit/i.test(ua)) {\n          result = {\n            name: 'Safari',\n            safari: t\n          };\n\n          if (versionIdentifier) {\n            result.version = versionIdentifier;\n          }\n        } else if (iosdevice) {\n          result = {\n            name: iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n          }; // WTF: version is not part of user agent in web apps\n\n          if (versionIdentifier) {\n            result.version = versionIdentifier;\n          }\n        } else if (/googlebot/i.test(ua)) {\n          result = {\n            name: 'Googlebot',\n            googlebot: t,\n            version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n          };\n        } else {\n          result = {\n            name: getFirstMatch(/^(.*)\\/(.*) /),\n            version: getSecondMatch(/^(.*)\\/(.*) /)\n          };\n        } // set webkit or gecko flag for browsers based on these engines\n\n\n      if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n        if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n          result.name = result.name || \"Blink\";\n          result.blink = t;\n        } else {\n          result.name = result.name || \"Webkit\";\n          result.webkit = t;\n        }\n\n        if (!result.version && versionIdentifier) {\n          result.version = versionIdentifier;\n        }\n      } else if (!result.opera && /gecko\\//i.test(ua)) {\n        result.name = result.name || \"Gecko\";\n        result.gecko = t;\n        result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i);\n      } // set OS flags for platforms that have multiple browsers\n\n\n      if (!result.windowsphone && !result.msedge && (android || result.silk)) {\n        result.android = t;\n      } else if (!result.windowsphone && !result.msedge && iosdevice) {\n        result[iosdevice] = t;\n        result.ios = t;\n      } else if (mac) {\n        result.mac = t;\n      } else if (xbox) {\n        result.xbox = t;\n      } else if (windows) {\n        result.windows = t;\n      } else if (linux) {\n        result.linux = t;\n      } // OS version extraction\n\n\n      var osVersion = '';\n\n      if (result.windowsphone) {\n        osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n      } else if (iosdevice) {\n        osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n        osVersion = osVersion.replace(/[_\\s]/g, '.');\n      } else if (android) {\n        osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n      } else if (result.webos) {\n        osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n      } else if (result.blackberry) {\n        osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n      } else if (result.bada) {\n        osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n      } else if (result.tizen) {\n        osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n      }\n\n      if (osVersion) {\n        result.osversion = osVersion;\n      } // device type extraction\n\n\n      var osMajorVersion = osVersion.split('.')[0];\n\n      if (tablet || nexusTablet || iosdevice == 'ipad' || android && (osMajorVersion == 3 || osMajorVersion >= 4 && !mobile) || result.silk) {\n        result.tablet = t;\n      } else if (mobile || iosdevice == 'iphone' || iosdevice == 'ipod' || android || nexusMobile || result.blackberry || result.webos || result.bada) {\n        result.mobile = t;\n      } // Graded Browser Support\n      // http://developer.yahoo.com/yui/articles/gbs\n\n\n      if (result.msedge || result.msie && result.version >= 10 || result.yandexbrowser && result.version >= 15 || result.vivaldi && result.version >= 1.0 || result.chrome && result.version >= 20 || result.samsungBrowser && result.version >= 4 || result.firefox && result.version >= 20.0 || result.safari && result.version >= 6 || result.opera && result.version >= 10.0 || result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6 || result.blackberry && result.version >= 10.1 || result.chromium && result.version >= 20) {\n        result.a = t;\n      } else if (result.msie && result.version < 10 || result.chrome && result.version < 20 || result.firefox && result.version < 20.0 || result.safari && result.version < 6 || result.opera && result.version < 10.0 || result.ios && result.osversion && result.osversion.split(\".\")[0] < 6 || result.chromium && result.version < 20) {\n        result.c = t;\n      } else result.x = t;\n\n      return result;\n    }\n\n    var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '');\n\n    bowser.test = function (browserList) {\n      for (var i = 0; i < browserList.length; ++i) {\n        var browserItem = browserList[i];\n\n        if (typeof browserItem === 'string') {\n          if (browserItem in bowser) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n    /**\n     * Get version precisions count\n     *\n     * @example\n     *   getVersionPrecision(\"1.10.3\") // 3\n     *\n     * @param  {string} version\n     * @return {number}\n     */\n\n\n    function getVersionPrecision(version) {\n      return version.split(\".\").length;\n    }\n    /**\n     * Array::map polyfill\n     *\n     * @param  {Array} arr\n     * @param  {Function} iterator\n     * @return {Array}\n     */\n\n\n    function map(arr, iterator) {\n      var result = [],\n          i;\n\n      if (Array.prototype.map) {\n        return Array.prototype.map.call(arr, iterator);\n      }\n\n      for (i = 0; i < arr.length; i++) {\n        result.push(iterator(arr[i]));\n      }\n\n      return result;\n    }\n    /**\n     * Calculate browser version weight\n     *\n     * @example\n     *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n     *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n     *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n     *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n     *\n     * @param  {Array<String>} versions versions to compare\n     * @return {Number} comparison result\n     */\n\n\n    function compareVersions(versions) {\n      // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n      var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n      var chunks = map(versions, function (version) {\n        var delta = precision - getVersionPrecision(version); // 2) \"9\" -> \"9.0\" (for precision = 2)\n\n        version = version + new Array(delta + 1).join(\".0\"); // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n\n        return map(version.split(\".\"), function (chunk) {\n          return new Array(20 - chunk.length).join(\"0\") + chunk;\n        }).reverse();\n      }); // iterate in reverse order by reversed chunks array\n\n      while (--precision >= 0) {\n        // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n        if (chunks[0][precision] > chunks[1][precision]) {\n          return 1;\n        } else if (chunks[0][precision] === chunks[1][precision]) {\n          if (precision === 0) {\n            // all version chunks are same\n            return 0;\n          }\n        } else {\n          return -1;\n        }\n      }\n    }\n    /**\n     * Check if browser is unsupported\n     *\n     * @example\n     *   bowser.isUnsupportedBrowser({\n     *     msie: \"10\",\n     *     firefox: \"23\",\n     *     chrome: \"29\",\n     *     safari: \"5.1\",\n     *     opera: \"16\",\n     *     phantom: \"534\"\n     *   });\n     *\n     * @param  {Object}  minVersions map of minimal version to browser\n     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n     * @param  {String}  [ua] user agent string\n     * @return {Boolean}\n     */\n\n\n    function isUnsupportedBrowser(minVersions, strictMode, ua) {\n      var _bowser = bowser; // make strictMode param optional with ua param usage\n\n      if (typeof strictMode === 'string') {\n        ua = strictMode;\n        strictMode = void 0;\n      }\n\n      if (strictMode === void 0) {\n        strictMode = false;\n      }\n\n      if (ua) {\n        _bowser = detect(ua);\n      }\n\n      var version = \"\" + _bowser.version;\n\n      for (var browser in minVersions) {\n        if (minVersions.hasOwnProperty(browser)) {\n          if (_bowser[browser]) {\n            if (typeof minVersions[browser] !== 'string') {\n              throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n            } // browser version and min supported version.\n\n\n            return compareVersions([version, minVersions[browser]]) < 0;\n          }\n        }\n      }\n\n      return strictMode; // not found\n    }\n    /**\n     * Check if browser is supported\n     *\n     * @param  {Object} minVersions map of minimal version to browser\n     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n     * @param  {String}  [ua] user agent string\n     * @return {Boolean}\n     */\n\n\n    function check(minVersions, strictMode, ua) {\n      return !isUnsupportedBrowser(minVersions, strictMode, ua);\n    }\n\n    bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n    bowser.compareVersions = compareVersions;\n    bowser.check = check;\n    /*\n     * Set our detect method to the main bowser object so we can\n     * reuse it to test other user agents.\n     * This is needed to implement future tests.\n     */\n\n    bowser._detect = detect;\n    return bowser;\n  });\n  ;\n}\n\n;\n/**\n@class Siesta.Test.UserAgent.KeyCodes\n@singleton\n\nThis is a singleton class, containing the mnemonical names for various advanced key codes. You can use this names in the {@link Siesta.Test.Browser#type} method, like this:\n\n    t.type(el, 'Foo bar[ENTER]', function () {\n        ...\n    })\n\nBelow is the full list:\n\n - `BACKSPACE`\n\n - `TAB`\n\n - `ENTER` (`RETURN`)\n - `SPACE`\n\n - `SHIFT`\n - `CTRL`\n - `ALT`\n\n - `PAUSE-BREAK`\n - `CAPS`\n - `ESCAPE` (`ESC`)\n - `NUM-LOCK`\n - `SCROLL-LOCK`\n - `PRINT`\n\n - `PAGE-UP`\n - `PAGE-DOWN`\n - `END`\n - `HOME`\n - `LEFT`\n - `UP`\n - `RIGHT`\n - `DOWN`\n - `INSERT`\n - `DELETE`\n\n\n - `NUM0`\n - `NUM1`\n - `NUM2`\n - `NUM3`\n - `NUM4`\n - `NUM5`\n - `NUM6`\n - `NUM7`\n - `NUM8`\n - `NUM9`\n\n - `F1`\n - `F2`\n - `F3`\n - `F4`\n - `F5`\n - `F6`\n - `F7`\n - `F8`\n - `F9`\n - `F10`\n - `F11`\n - `F12`\n\n */\n\nSingleton('Siesta.Test.UserAgent.KeyCodes', {\n  methods: {\n    isNav: function isNav(k) {\n      var keys = this.keys;\n      return k >= 33 && k <= 40 || k == keys.RETURN || k == keys.TAB || k == keys.ESCAPE;\n    },\n    isSpecial: function isSpecial(k) {\n      return k === this.keys.BACKSPACE || k >= 16 && k <= 20 || k >= 44 && k <= 46 || k >= 112 && k <= 123 || k === 91;\n    },\n    isModifier: function isModifier(k) {\n      return k === this.keys.SHIFT || k === this.keys.CTRL || k === this.keys.ALT || k === this.keys.CMD; // TODO add check to make sure it's a Mac?\n    },\n    fromCharCode: function fromCharCode(code, readableForm) {\n      var keys = this.keys;\n\n      for (var key in keys) {\n        if (keys[key] === code && (!readableForm || key.length > 1)) return key;\n      }\n    }\n  },\n  has: {\n    // FROM Syn library by JupiterJS, MIT License. www.jupiterjs.com\n    // key codes\n    keys: {\n      init: {\n        //backspace\n        '\\b': 8,\n        'BACKSPACE': 8,\n        //tab\n        '\\t': 9,\n        'TAB': 9,\n        //enter\n        '\\r': 13,\n        'RETURN': 13,\n        'ENTER': 13,\n        'SPACE': 32,\n        //special\n        'SHIFT': 16,\n        'CTRL': 17,\n        'ALT': 18,\n        'CMD': 91,\n        // Mac\n        //weird\n        'PAUSE-BREAK': 19,\n        'CAPS': 20,\n        'ESCAPE': 27,\n        'ESC': 27,\n        'NUM-LOCK': 144,\n        'SCROLL-LOCK': 145,\n        'PRINT': 44,\n        //navigation\n        'PAGE-UP': 33,\n        'PAGEUP': 33,\n        'PAGE-DOWN': 34,\n        'PAGEDOWN': 34,\n        'END': 35,\n        'HOME': 36,\n        'LEFT': 37,\n        'ARROWLEFT': 37,\n        'UP': 38,\n        'ARROWUP': 38,\n        'RIGHT': 39,\n        'ARROWRIGHT': 39,\n        'DOWN': 40,\n        'ARROWDOWN': 40,\n        'INSERT': 45,\n        'DELETE': 46,\n        //normal characters\n        ' ': 32,\n        '0': 48,\n        '1': 49,\n        '2': 50,\n        '3': 51,\n        '4': 52,\n        '5': 53,\n        '6': 54,\n        '7': 55,\n        '8': 56,\n        '9': 57,\n        'A': 65,\n        'B': 66,\n        'C': 67,\n        'D': 68,\n        'E': 69,\n        'F': 70,\n        'G': 71,\n        'H': 72,\n        'I': 73,\n        'J': 74,\n        'K': 75,\n        'L': 76,\n        'M': 77,\n        'N': 78,\n        'O': 79,\n        'P': 80,\n        'Q': 81,\n        'R': 82,\n        'S': 83,\n        'T': 84,\n        'U': 85,\n        'V': 86,\n        'W': 87,\n        'X': 88,\n        'Y': 89,\n        'Z': 90,\n        //NORMAL-CHARACTERS, NUMPAD\n        'NUM0': 96,\n        'NUM1': 97,\n        'NUM2': 98,\n        'NUM3': 99,\n        'NUM4': 100,\n        'NUM5': 101,\n        'NUM6': 102,\n        'NUM7': 103,\n        'NUM8': 104,\n        'NUM9': 105,\n        '*': 106,\n        '+': 107,\n        //normal-characters, others\n        ';': 186,\n        '=': 187,\n        ',': 188,\n        '-': 189,\n        '.': 190,\n        '/': 191,\n        '`': 192,\n        '[': 219,\n        '\\\\': 220,\n        ']': 221,\n        \"'\": 222,\n        'F1': 112,\n        'F2': 113,\n        'F3': 114,\n        'F4': 115,\n        'F5': 116,\n        'F6': 117,\n        'F7': 118,\n        'F8': 119,\n        'F9': 120,\n        'F10': 121,\n        'F11': 122,\n        'F12': 123\n      }\n    },\n    // eof key codes\n    // key names // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n    keyNameMap: {\n      init: {\n        //backspace\n        '8': 'Backspace',\n        '9': 'Tab',\n        //enter\n        '13': 'Enter',\n        //space\n        '32': 'Space',\n        //special\n        '16': 'Shift',\n        '17': 'Control',\n        '18': 'Alt',\n        '91': 'Meta',\n        // Mac Cmd\n        '20': 'CapsLock',\n        '27': 'Escape',\n        '144': 'NumLock',\n        '145': 'ScrollLock',\n        '44': 'Print',\n        //navigation\n        '33': 'PageUp',\n        '34': 'PageDown',\n        '35': 'End',\n        '36': 'Home',\n        '37': 'ArrowLeft',\n        '38': 'ArrowUp',\n        '39': 'ArrowRight',\n        '40': 'ArrowDown',\n        '45': 'Insert',\n        '46': 'Delete',\n        '106': 'Multiply',\n        '107': 'Add',\n        '112': 'F1',\n        '113': 'F2',\n        '114': 'F3',\n        '115': 'F4',\n        '116': 'F5',\n        '117': 'F6',\n        '118': 'F7',\n        '119': 'F8',\n        '120': 'F9',\n        '121': 'F10',\n        '122': 'F11',\n        '123': 'F12'\n      }\n    } // eof key names\n\n  } // eof has\n\n});\n;\n!function () {\n  /* header */\n  var id = 1;\n  Role('Siesta.Util.Role.HasUniqueGeneratedId', {\n    has: {\n      id: {\n        is: 'ro',\n        init: function init() {\n          return id++;\n        }\n      }\n    }\n  });\n  /* footer */\n}();\n/*!\n * Sizzle CSS Selector Engine v2.3.4-pre\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-08-15\n */\n\n(function (window) {\n  var i,\n      support,\n      Expr,\n      getText,\n      isXML,\n      tokenize,\n      compile,\n      select,\n      outermostContext,\n      sortInput,\n      hasDuplicate,\n      // Local document vars\n  setDocument,\n      document,\n      docElem,\n      documentIsHTML,\n      rbuggyQSA,\n      rbuggyMatches,\n      matches,\n      contains,\n      // Instance-specific data\n  expando = \"sizzle\" + 1 * new Date(),\n      preferredDoc = window.document,\n      dirruns = 0,\n      done = 0,\n      classCache = createCache(),\n      tokenCache = createCache(),\n      compilerCache = createCache(),\n      sortOrder = function sortOrder(a, b) {\n    if (a === b) {\n      hasDuplicate = true;\n    }\n\n    return 0;\n  },\n      // Instance methods\n  hasOwn = {}.hasOwnProperty,\n      arr = [],\n      pop = arr.pop,\n      push_native = arr.push,\n      push = arr.push,\n      slice = arr.slice,\n      // Use a stripped-down indexOf as it's faster than native\n  // https://jsperf.com/thor-indexof-vs-for/5\n  indexOf = function indexOf(list, elem) {\n    var i = 0,\n        len = list.length;\n\n    for (; i < len; i++) {\n      if (list[i] === elem) {\n        return i;\n      }\n    }\n\n    return -1;\n  },\n      booleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n      // Regular expressions\n  // http://www.w3.org/TR/css3-selectors/#whitespace\n  whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n      // http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n  identifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n      // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n  attributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace + // Operator (capture 2)\n  \"*([*^$|!~]?=)\" + whitespace + // \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n  \"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace + \"*\\\\]\",\n      pseudos = \":(\" + identifier + \")(?:\\\\((\" + // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n  // 1. quoted (capture 3; capture 4 or capture 5)\n  \"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" + // 2. simple (capture 6)\n  \"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" + // 3. anything else (capture 2)\n  \".*\" + \")\\\\)|)\",\n      // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n  rwhitespace = new RegExp(whitespace + \"+\", \"g\"),\n      rtrim = new RegExp(\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\"),\n      rcomma = new RegExp(\"^\" + whitespace + \"*,\" + whitespace + \"*\"),\n      rcombinators = new RegExp(\"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\"),\n      rattributeQuotes = new RegExp(\"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\"),\n      rpseudo = new RegExp(pseudos),\n      ridentifier = new RegExp(\"^\" + identifier + \"$\"),\n      matchExpr = {\n    \"ID\": new RegExp(\"^#(\" + identifier + \")\"),\n    \"CLASS\": new RegExp(\"^\\\\.(\" + identifier + \")\"),\n    \"TAG\": new RegExp(\"^(\" + identifier + \"|[*])\"),\n    \"ATTR\": new RegExp(\"^\" + attributes),\n    \"PSEUDO\": new RegExp(\"^\" + pseudos),\n    \"CHILD\": new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\"),\n    \"bool\": new RegExp(\"^(?:\" + booleans + \")$\", \"i\"),\n    // For use in libraries implementing .is()\n    // We use this for POS matching in `select`\n    \"needsContext\": new RegExp(\"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\")\n  },\n      rinputs = /^(?:input|select|textarea|button)$/i,\n      rheader = /^h\\d$/i,\n      rnative = /^[^{]+\\{\\s*\\[native \\w/,\n      // Easily-parseable/retrievable ID or TAG or CLASS selectors\n  rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n      rsibling = /[+~]/,\n      // CSS escapes\n  // http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n  runescape = new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\"),\n      funescape = function funescape(_, escaped, escapedWhitespace) {\n    var high = \"0x\" + escaped - 0x10000; // NaN means non-codepoint\n    // Support: Firefox<24\n    // Workaround erroneous numeric interpretation of +\"0x\"\n\n    return high !== high || escapedWhitespace ? escaped : high < 0 ? // BMP codepoint\n    String.fromCharCode(high + 0x10000) : // Supplemental Plane codepoint (surrogate pair)\n    String.fromCharCode(high >> 10 | 0xD800, high & 0x3FF | 0xDC00);\n  },\n      // CSS string/identifier serialization\n  // https://drafts.csswg.org/cssom/#common-serializing-idioms\n  rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n      fcssescape = function fcssescape(ch, asCodePoint) {\n    if (asCodePoint) {\n      // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n      if (ch === \"\\0\") {\n        return \"\\uFFFD\";\n      } // Control characters and (dependent upon position) numbers get escaped as code points\n\n\n      return ch.slice(0, -1) + \"\\\\\" + ch.charCodeAt(ch.length - 1).toString(16) + \" \";\n    } // Other potentially-special ASCII characters get backslash-escaped\n\n\n    return \"\\\\\" + ch;\n  },\n      // Used for iframes\n  // See setDocument()\n  // Removing the function wrapper causes a \"Permission Denied\"\n  // error in IE\n  unloadHandler = function unloadHandler() {\n    setDocument();\n  },\n      inDisabledFieldset = addCombinator(function (elem) {\n    return elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\n  }, {\n    dir: \"parentNode\",\n    next: \"legend\"\n  }); // Optimize for push.apply( _, NodeList )\n\n\n  try {\n    push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes); // Support: Android<4.0\n    // Detect silently failing push.apply\n\n    arr[preferredDoc.childNodes.length].nodeType;\n  } catch (e) {\n    push = {\n      apply: arr.length ? // Leverage slice if possible\n      function (target, els) {\n        push_native.apply(target, slice.call(els));\n      } : // Support: IE<9\n      // Otherwise append directly\n      function (target, els) {\n        var j = target.length,\n            i = 0; // Can't trust NodeList.length\n\n        while (target[j++] = els[i++]) {}\n\n        target.length = j - 1;\n      }\n    };\n  } // SIESTA PATCH BEGIN\n\n\n  function unwrap(proxy) {\n    return proxy && proxy.__proxyTarget || proxy;\n  }\n\n  var hasProxy = typeof Proxy !== 'undefined'; // SIESTA PATCH END\n\n  function Sizzle(selector, context, results, seed) {\n    // SIESTA PATCH BEGIN\n    if (hasProxy) {\n      context = context && new Proxy(context, {\n        get: function get(obj, prop) {\n          var value;\n\n          if (prop === '__proxyTarget') {\n            value = obj;\n          } else if (prop === 'querySelectorAll' && obj.nodeType !== 11) {\n            if (obj.nodeType === 11) {\n              value = DocumentFragment.prototype.querySelectorAll;\n            } else if (obj.nodeType === 9) {\n              value = Document.prototype.querySelectorAll;\n            } else {\n              value = Element.prototype.querySelectorAll;\n            }\n          } else {\n            value = obj[prop];\n          }\n\n          if (typeof value === 'function') {\n            value = value.bind(obj);\n          }\n\n          return value;\n        }\n      });\n    } // SIESTA PATCH END\n\n\n    var m,\n        i,\n        elem,\n        nid,\n        match,\n        groups,\n        newSelector,\n        newContext = context && context.ownerDocument,\n        // nodeType defaults to 9, since context defaults to document\n    nodeType = context ? context.nodeType : 9;\n    results = results || []; // Return early from calls with invalid selector or context\n\n    if (typeof selector !== \"string\" || !selector || nodeType !== 1 && nodeType !== 9 && nodeType !== 11) {\n      return results;\n    } // Try to shortcut find operations (as opposed to filters) in HTML documents\n\n\n    if (!seed) {\n      // SIESTA PATCH BEGIN\n      if ((context ? context.ownerDocument || context : preferredDoc) !== unwrap(document)) {\n        setDocument(context);\n      } // SIESTA PATCH END\n\n\n      context = context || document;\n\n      if (documentIsHTML) {\n        // If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n        // (excepting DocumentFragment context, where the methods don't exist)\n        if (nodeType !== 11 && (match = rquickExpr.exec(selector))) {\n          // ID selector\n          if (m = match[1]) {\n            // Document context\n            if (nodeType === 9) {\n              if (elem = context.getElementById(m)) {\n                // Support: IE, Opera, Webkit\n                // TODO: identify versions\n                // getElementById can match elements by name instead of ID\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              } // Element context\n\n            } else {\n              // Support: IE, Opera, Webkit\n              // TODO: identify versions\n              // getElementById can match elements by name instead of ID\n              if (newContext && (elem = newContext.getElementById(m)) && contains(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            } // Type selector\n\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results; // Class selector\n          } else if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        } // Take advantage of querySelectorAll\n\n\n        if (support.qsa && !compilerCache[selector + \" \"] && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          if (nodeType !== 1) {\n            newContext = context;\n            newSelector = selector; // qSA looks outside Element context, which is not what we want\n            // Thanks to Andrew Dupont for this workaround technique\n            // Support: IE <=8\n            // Exclude object elements\n          } else if (context.nodeName.toLowerCase() !== \"object\") {\n            // Capture the context ID, setting it first if necessary\n            if (nid = context.getAttribute(\"id\")) {\n              nid = nid.replace(rcssescape, fcssescape);\n            } else {\n              context.setAttribute(\"id\", nid = expando);\n            } // Prefix every selector in the list\n\n\n            groups = tokenize(selector);\n            i = groups.length;\n\n            while (i--) {\n              groups[i] = \"#\" + nid + \" \" + toSelector(groups[i]);\n            }\n\n            newSelector = groups.join(\",\"); // Expand context for sibling selectors\n\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n          }\n\n          if (newSelector) {\n            try {\n              // SIESTA PATCH BEGIN\n              if (!(bowser.msie || bowser.msedge) || !/:nth-of-type\\(\\d/i.test(newSelector)) {\n                // SIESTA PATCH END\n                push.apply(results, newContext.querySelectorAll(newSelector));\n                return results; // SIESTA PATCH BEGIN\n              } // SIESTA PATCH END\n\n            } catch (qsaError) {} finally {\n              if (nid === expando) {\n                context.removeAttribute(\"id\");\n              }\n            }\n          }\n        }\n      }\n    } // All others\n\n\n    return select(selector.replace(rtrim, \"$1\"), context, results, seed);\n  }\n  /**\n   * Create key-value caches of limited size\n   * @returns {function(string, object)} Returns the Object data after storing it on itself with\n   *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n   *\tdeleting the oldest entry\n   */\n\n\n  function createCache() {\n    var keys = [];\n\n    function cache(key, value) {\n      // Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n      if (keys.push(key + \" \") > Expr.cacheLength) {\n        // Only keep the most recent entries\n        delete cache[keys.shift()];\n      }\n\n      return cache[key + \" \"] = value;\n    }\n\n    return cache;\n  }\n  /**\n   * Mark a function for special use by Sizzle\n   * @param {Function} fn The function to mark\n   */\n\n\n  function markFunction(fn) {\n    fn[expando] = true;\n    return fn;\n  }\n  /**\n   * Support testing using an element\n   * @param {Function} fn Passed the created element and returns a boolean result\n   */\n\n\n  function assert(fn) {\n    var el = document.createElement(\"fieldset\");\n\n    try {\n      return !!fn(el);\n    } catch (e) {\n      return false;\n    } finally {\n      // Remove from its parent by default\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      } // release memory in IE\n\n\n      el = null;\n    }\n  }\n  /**\n   * Adds the same handler for all of the specified attrs\n   * @param {String} attrs Pipe-separated list of attributes\n   * @param {Function} handler The method that will be applied\n   */\n\n\n  function addHandle(attrs, handler) {\n    var arr = attrs.split(\"|\"),\n        i = arr.length;\n\n    while (i--) {\n      Expr.attrHandle[arr[i]] = handler;\n    }\n  }\n  /**\n   * Checks document order of two siblings\n   * @param {Element} a\n   * @param {Element} b\n   * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n   */\n\n\n  function siblingCheck(a, b) {\n    var cur = b && a,\n        diff = cur && a.nodeType === 1 && b.nodeType === 1 && a.sourceIndex - b.sourceIndex; // Use IE sourceIndex if available on both nodes\n\n    if (diff) {\n      return diff;\n    } // Check if b follows a\n\n\n    if (cur) {\n      while (cur = cur.nextSibling) {\n        if (cur === b) {\n          return -1;\n        }\n      }\n    }\n\n    return a ? 1 : -1;\n  }\n  /**\n   * Returns a function to use in pseudos for input types\n   * @param {String} type\n   */\n\n\n  function createInputPseudo(type) {\n    return function (elem) {\n      var name = elem.nodeName.toLowerCase();\n      return name === \"input\" && elem.type === type;\n    };\n  }\n  /**\n   * Returns a function to use in pseudos for buttons\n   * @param {String} type\n   */\n\n\n  function createButtonPseudo(type) {\n    return function (elem) {\n      var name = elem.nodeName.toLowerCase();\n      return (name === \"input\" || name === \"button\") && elem.type === type;\n    };\n  }\n  /**\n   * Returns a function to use in pseudos for :enabled/:disabled\n   * @param {Boolean} disabled true for :disabled; false for :enabled\n   */\n\n\n  function createDisabledPseudo(disabled) {\n    // Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n    return function (elem) {\n      // Only certain elements can match :enabled or :disabled\n      // https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n      // https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n      if (\"form\" in elem) {\n        // Check for inherited disabledness on relevant non-disabled elements:\n        // * listed form-associated elements in a disabled fieldset\n        //   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n        //   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n        // * option elements in a disabled optgroup\n        //   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n        // All such elements have a \"form\" property.\n        if (elem.parentNode && elem.disabled === false) {\n          // Option elements defer to a parent optgroup if present\n          if (\"label\" in elem) {\n            if (\"label\" in elem.parentNode) {\n              return elem.parentNode.disabled === disabled;\n            } else {\n              return elem.disabled === disabled;\n            }\n          } // Support: IE 6 - 11\n          // Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\n\n          return elem.isDisabled === disabled || // Where there is no isDisabled, check manually\n\n          /* jshint -W018 */\n          elem.isDisabled !== !disabled && inDisabledFieldset(elem) === disabled;\n        }\n\n        return elem.disabled === disabled; // Try to winnow out elements that can't be disabled before trusting the disabled property.\n        // Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n        // even exist on them, let alone have a boolean value.\n      } else if (\"label\" in elem) {\n        return elem.disabled === disabled;\n      } // Remaining elements are neither :enabled nor :disabled\n\n\n      return false;\n    };\n  }\n  /**\n   * Returns a function to use in pseudos for positionals\n   * @param {Function} fn\n   */\n\n\n  function createPositionalPseudo(fn) {\n    return markFunction(function (argument) {\n      argument = +argument;\n      return markFunction(function (seed, matches) {\n        var j,\n            matchIndexes = fn([], seed.length, argument),\n            i = matchIndexes.length; // Match elements found at the specified indexes\n\n        while (i--) {\n          if (seed[j = matchIndexes[i]]) {\n            seed[j] = !(matches[j] = seed[j]);\n          }\n        }\n      });\n    });\n  }\n  /**\n   * Checks a node for validity as a Sizzle context\n   * @param {Element|Object=} context\n   * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n   */\n\n\n  function testContext(context) {\n    return context && typeof context.getElementsByTagName !== \"undefined\" && context;\n  } // Expose support vars for convenience\n\n\n  support = Sizzle.support = {};\n  /**\n   * Detects XML nodes\n   * @param {Element|Object} elem An element or a document\n   * @returns {Boolean} True iff elem is a non-HTML XML node\n   */\n\n  isXML = Sizzle.isXML = function (elem) {\n    // documentElement is verified for cases where it doesn't yet exist\n    // (such as loading iframes in IE - #4833)\n    var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n    return documentElement ? documentElement.nodeName !== \"HTML\" : false;\n  };\n  /**\n   * Sets document-related variables once based on the current document\n   * @param {Element|Object} [doc] An element or document object to use to set the document\n   * @returns {Object} Returns the current document\n   */\n\n\n  setDocument = Sizzle.setDocument = function (node) {\n    var hasCompare,\n        subWindow,\n        doc = node ? node.ownerDocument || node : preferredDoc; // Return early if doc is invalid or already selected\n\n    if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n      return document;\n    } // Update global variables\n\n\n    document = doc;\n    docElem = document.documentElement;\n    documentIsHTML = !isXML(document); // Support: IE 9-11, Edge\n    // Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\n    if (preferredDoc !== document && (subWindow = document.defaultView) && subWindow.top !== subWindow) {\n      // Support: IE 11, Edge\n      if (subWindow.addEventListener) {\n        subWindow.addEventListener(\"unload\", unloadHandler, false); // Support: IE 9 - 10 only\n      } else if (subWindow.attachEvent) {\n        subWindow.attachEvent(\"onunload\", unloadHandler);\n      }\n    }\n    /* Attributes\n    ---------------------------------------------------------------------- */\n    // Support: IE<8\n    // Verify that getAttribute really returns attributes and not properties\n    // (excepting IE8 booleans)\n\n\n    support.attributes = assert(function (el) {\n      el.className = \"i\";\n      return !el.getAttribute(\"className\");\n    });\n    /* getElement(s)By*\n    ---------------------------------------------------------------------- */\n    // Check if getElementsByTagName(\"*\") returns only elements\n\n    support.getElementsByTagName = assert(function (el) {\n      el.appendChild(document.createComment(\"\"));\n      return !el.getElementsByTagName(\"*\").length;\n    }); // Support: IE<9\n\n    support.getElementsByClassName = rnative.test(document.getElementsByClassName); // Support: IE<10\n    // Check if getElementById returns elements by name\n    // The broken getElementById methods don't pick up programmatically-set names,\n    // so use a roundabout getElementsByName test\n\n    support.getById = assert(function (el) {\n      docElem.appendChild(el).id = expando;\n      return !document.getElementsByName || !document.getElementsByName(expando).length;\n    }); // ID filter and find\n\n    if (support.getById) {\n      Expr.filter[\"ID\"] = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute(\"id\") === attrId;\n        };\n      };\n\n      Expr.find[\"ID\"] = function (id, context) {\n        if (typeof context.getElementById !== \"undefined\" && documentIsHTML) {\n          var elem = context.getElementById(id);\n          return elem ? [elem] : [];\n        }\n      };\n    } else {\n      Expr.filter[\"ID\"] = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          var node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");\n          return node && node.value === attrId;\n        };\n      }; // Support: IE 6 - 7 only\n      // getElementById is not reliable as a find shortcut\n\n\n      Expr.find[\"ID\"] = function (id, context) {\n        if (typeof context.getElementById !== \"undefined\" && documentIsHTML) {\n          var node,\n              i,\n              elems,\n              elem = context.getElementById(id);\n\n          if (elem) {\n            // Verify the id attribute\n            node = elem.getAttributeNode(\"id\");\n\n            if (node && node.value === id) {\n              return [elem];\n            } // Fall back on getElementsByName\n\n\n            elems = context.getElementsByName(id);\n            i = 0;\n\n            while (elem = elems[i++]) {\n              node = elem.getAttributeNode(\"id\");\n\n              if (node && node.value === id) {\n                return [elem];\n              }\n            }\n          }\n\n          return [];\n        }\n      };\n    } // Tag\n\n\n    Expr.find[\"TAG\"] = support.getElementsByTagName ? function (tag, context) {\n      if (typeof context.getElementsByTagName !== \"undefined\") {\n        return context.getElementsByTagName(tag); // DocumentFragment nodes don't have gEBTN\n      } else if (support.qsa) {\n        return context.querySelectorAll(tag);\n      }\n    } : function (tag, context) {\n      var elem,\n          tmp = [],\n          i = 0,\n          // By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n      results = context.getElementsByTagName(tag); // Filter out possible comments\n\n      if (tag === \"*\") {\n        while (elem = results[i++]) {\n          if (elem.nodeType === 1) {\n            tmp.push(elem);\n          }\n        }\n\n        return tmp;\n      }\n\n      return results;\n    }; // Class\n\n    Expr.find[\"CLASS\"] = support.getElementsByClassName && function (className, context) {\n      if (typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML) {\n        return context.getElementsByClassName(className);\n      }\n    };\n    /* QSA/matchesSelector\n    ---------------------------------------------------------------------- */\n    // QSA and matchesSelector support\n    // matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\n\n    rbuggyMatches = []; // qSa(:focus) reports false when true (Chrome 21)\n    // We allow this because of a bug in IE8/9 that throws an error\n    // whenever `document.activeElement` is accessed on an iframe\n    // So, we allow :focus to pass through QSA all the time to avoid the IE error\n    // See https://bugs.jquery.com/ticket/13378\n\n    rbuggyQSA = [];\n\n    if (support.qsa = rnative.test(document.querySelectorAll)) {\n      // Build QSA regex\n      // Regex strategy adopted from Diego Perini\n      assert(function (el) {\n        // Select is set to empty string on purpose\n        // This is to test IE's treatment of not explicitly\n        // setting a boolean content attribute,\n        // since its presence should be enough\n        // https://bugs.jquery.com/ticket/12359\n        docElem.appendChild(el).innerHTML = \"<a id='\" + expando + \"'></a>\" + \"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" + \"<option selected=''></option></select>\"; // Support: IE8, Opera 11-12.16\n        // Nothing should be selected when empty strings follow ^= or $= or *=\n        // The test attribute must be unknown in Opera but \"safe\" for WinRT\n        // https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\n        if (el.querySelectorAll(\"[msallowcapture^='']\").length) {\n          rbuggyQSA.push(\"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\");\n        } // Support: IE8\n        // Boolean attributes and \"value\" are not treated correctly\n\n\n        if (!el.querySelectorAll(\"[selected]\").length) {\n          rbuggyQSA.push(\"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\");\n        } // Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\n\n        if (!el.querySelectorAll(\"[id~=\" + expando + \"-]\").length) {\n          rbuggyQSA.push(\"~=\");\n        } // Webkit/Opera - :checked should return selected option elements\n        // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n        // IE8 throws error here and will not see later tests\n\n\n        if (!el.querySelectorAll(\":checked\").length) {\n          rbuggyQSA.push(\":checked\");\n        } // Support: Safari 8+, iOS 8+\n        // https://bugs.webkit.org/show_bug.cgi?id=136851\n        // In-page `selector#id sibling-combinator selector` fails\n\n\n        if (!el.querySelectorAll(\"a#\" + expando + \"+*\").length) {\n          rbuggyQSA.push(\".#.+[+~]\");\n        }\n      });\n      assert(function (el) {\n        el.innerHTML = \"<a href='' disabled='disabled'></a>\" + \"<select disabled='disabled'><option/></select>\"; // Support: Windows 8 Native Apps\n        // The type and name attributes are restricted during .innerHTML assignment\n\n        var input = document.createElement(\"input\");\n        input.setAttribute(\"type\", \"hidden\");\n        el.appendChild(input).setAttribute(\"name\", \"D\"); // Support: IE8\n        // Enforce case-sensitivity of name attribute\n\n        if (el.querySelectorAll(\"[name=d]\").length) {\n          rbuggyQSA.push(\"name\" + whitespace + \"*[*^$|!~]?=\");\n        } // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n        // IE8 throws error here and will not see later tests\n\n\n        if (el.querySelectorAll(\":enabled\").length !== 2) {\n          rbuggyQSA.push(\":enabled\", \":disabled\");\n        } // Support: IE9-11+\n        // IE's :disabled selector does not pick up the children of disabled fieldsets\n\n\n        docElem.appendChild(el).disabled = true;\n\n        if (el.querySelectorAll(\":disabled\").length !== 2) {\n          rbuggyQSA.push(\":enabled\", \":disabled\");\n        } // Opera 10-11 does not throw on post-comma invalid pseudos\n\n\n        el.querySelectorAll(\"*,:x\");\n        rbuggyQSA.push(\",.*:\");\n      });\n    }\n\n    if (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) {\n      assert(function (el) {\n        // Check to see if it's possible to do matchesSelector\n        // on a disconnected node (IE 9)\n        support.disconnectedMatch = matches.call(el, \"*\"); // This should fail with an exception\n        // Gecko does not error, returns false instead\n\n        matches.call(el, \"[s!='']:x\");\n        rbuggyMatches.push(\"!=\", pseudos);\n      });\n    }\n\n    rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join(\"|\"));\n    rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join(\"|\"));\n    /* Contains\n    ---------------------------------------------------------------------- */\n\n    hasCompare = rnative.test(docElem.compareDocumentPosition); // Element contains another\n    // Purposefully self-exclusive\n    // As in, an element does not contain itself\n\n    contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n      var adown = a.nodeType === 9 ? a.documentElement : a,\n          bup = b && b.parentNode;\n      return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n    } : function (a, b) {\n      if (b) {\n        while (b = b.parentNode) {\n          if (b === a) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n    /* Sorting\n    ---------------------------------------------------------------------- */\n    // Document order sorting\n\n    sortOrder = hasCompare ? function (a, b) {\n      // Flag for duplicate removal\n      if (a === b) {\n        hasDuplicate = true;\n        return 0;\n      } // Sort on method existence if only one input has compareDocumentPosition\n\n\n      var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\n      if (compare) {\n        return compare;\n      } // Calculate position if both inputs belong to the same document\n\n\n      compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : // Otherwise we know they are disconnected\n      1; // Disconnected nodes\n\n      if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n        // Choose the first element that is related to our preferred document\n        if (a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {\n          return -1;\n        }\n\n        if (b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {\n          return 1;\n        } // Maintain original order\n\n\n        return sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;\n      }\n\n      return compare & 4 ? -1 : 1;\n    } : function (a, b) {\n      // Exit early if the nodes are identical\n      if (a === b) {\n        hasDuplicate = true;\n        return 0;\n      }\n\n      var cur,\n          i = 0,\n          aup = a.parentNode,\n          bup = b.parentNode,\n          ap = [a],\n          bp = [b]; // Parentless nodes are either documents or disconnected\n\n      if (!aup || !bup) {\n        return a === document ? -1 : b === document ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0; // If the nodes are siblings, we can do a quick check\n      } else if (aup === bup) {\n        return siblingCheck(a, b);\n      } // Otherwise we need full lists of their ancestors for comparison\n\n\n      cur = a;\n\n      while (cur = cur.parentNode) {\n        ap.unshift(cur);\n      }\n\n      cur = b;\n\n      while (cur = cur.parentNode) {\n        bp.unshift(cur);\n      } // Walk down the tree looking for a discrepancy\n\n\n      while (ap[i] === bp[i]) {\n        i++;\n      }\n\n      return i ? // Do a sibling check if the nodes have a common ancestor\n      siblingCheck(ap[i], bp[i]) : // Otherwise nodes in our document sort first\n      ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n    };\n    return document;\n  };\n\n  Sizzle.matches = function (expr, elements) {\n    return Sizzle(expr, null, null, elements);\n  };\n\n  Sizzle.matchesSelector = function (elem, expr) {\n    // Set document vars if needed\n    if ((elem.ownerDocument || elem) !== document) {\n      setDocument(elem);\n    } // Make sure that attribute selectors are quoted\n\n\n    expr = expr.replace(rattributeQuotes, \"='$1']\");\n\n    if (support.matchesSelector && documentIsHTML && !compilerCache[expr + \" \"] && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n      try {\n        var ret = matches.call(elem, expr); // IE 9's matchesSelector returns false on disconnected nodes\n\n        if (ret || support.disconnectedMatch || // As well, disconnected nodes are said to be in a document\n        // fragment in IE 9\n        elem.document && elem.document.nodeType !== 11) {\n          return ret;\n        }\n      } catch (e) {}\n    }\n\n    return Sizzle(expr, document, null, [elem]).length > 0;\n  };\n\n  Sizzle.contains = function (context, elem) {\n    // Set document vars if needed\n    if ((context.ownerDocument || context) !== document) {\n      setDocument(context);\n    }\n\n    return contains(context, elem);\n  };\n\n  Sizzle.attr = function (elem, name) {\n    // Set document vars if needed\n    if ((elem.ownerDocument || elem) !== document) {\n      setDocument(elem);\n    }\n\n    var fn = Expr.attrHandle[name.toLowerCase()],\n        // Don't get fooled by Object.prototype properties (jQuery #13807)\n    val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n    return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n  };\n\n  Sizzle.escape = function (sel) {\n    return (sel + \"\").replace(rcssescape, fcssescape);\n  }; // SIESTA PATCH BEGIN\n\n\n  Sizzle.unescape = function (sel) {\n    return (sel + \"\").replace(runescape, funescape);\n  }; // SIESTA PATCH END\n\n\n  Sizzle.error = function (msg) {\n    throw new Error(\"Syntax error, unrecognized expression: \" + msg);\n  };\n  /**\n   * Document sorting and removing duplicates\n   * @param {ArrayLike} results\n   */\n\n\n  Sizzle.uniqueSort = function (results) {\n    var elem,\n        duplicates = [],\n        j = 0,\n        i = 0; // Unless we *know* we can detect duplicates, assume their presence\n\n    hasDuplicate = !support.detectDuplicates;\n    sortInput = !support.sortStable && results.slice(0);\n    results.sort(sortOrder);\n\n    if (hasDuplicate) {\n      while (elem = results[i++]) {\n        if (elem === results[i]) {\n          j = duplicates.push(i);\n        }\n      }\n\n      while (j--) {\n        results.splice(duplicates[j], 1);\n      }\n    } // Clear input after sorting to release objects\n    // See https://github.com/jquery/sizzle/pull/225\n\n\n    sortInput = null;\n    return results;\n  };\n  /**\n   * Utility function for retrieving the text value of an array of DOM nodes\n   * @param {Array|Element} elem\n   */\n\n\n  getText = Sizzle.getText = function (elem) {\n    var node,\n        ret = \"\",\n        i = 0,\n        nodeType = elem.nodeType;\n\n    if (!nodeType) {\n      // If no nodeType, this is expected to be an array\n      while (node = elem[i++]) {\n        // Do not traverse comment nodes\n        ret += getText(node);\n      }\n    } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n      // Use textContent for elements\n      // innerText usage removed for consistency of new lines (jQuery #11153)\n      if (typeof elem.textContent === \"string\") {\n        return elem.textContent;\n      } else {\n        // Traverse its children\n        for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n          ret += getText(elem);\n        }\n      }\n    } else if (nodeType === 3 || nodeType === 4) {\n      return elem.nodeValue;\n    } // Do not include comment or processing instruction nodes\n\n\n    return ret;\n  };\n\n  Expr = Sizzle.selectors = {\n    // Can be adjusted by the user\n    cacheLength: 50,\n    createPseudo: markFunction,\n    match: matchExpr,\n    attrHandle: {},\n    find: {},\n    relative: {\n      \">\": {\n        dir: \"parentNode\",\n        first: true\n      },\n      \" \": {\n        dir: \"parentNode\"\n      },\n      \"+\": {\n        dir: \"previousSibling\",\n        first: true\n      },\n      \"~\": {\n        dir: \"previousSibling\"\n      }\n    },\n    preFilter: {\n      \"ATTR\": function ATTR(match) {\n        match[1] = match[1].replace(runescape, funescape); // Move the given value to match[3] whether quoted or unquoted\n\n        match[3] = (match[3] || match[4] || match[5] || \"\").replace(runescape, funescape);\n\n        if (match[2] === \"~=\") {\n          match[3] = \" \" + match[3] + \" \";\n        }\n\n        return match.slice(0, 4);\n      },\n      \"CHILD\": function CHILD(match) {\n        /* matches from matchExpr[\"CHILD\"]\n        \t1 type (only|nth|...)\n        \t2 what (child|of-type)\n        \t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n        \t4 xn-component of xn+y argument ([+-]?\\d*n|)\n        \t5 sign of xn-component\n        \t6 x of xn-component\n        \t7 sign of y-component\n        \t8 y of y-component\n        */\n        match[1] = match[1].toLowerCase();\n\n        if (match[1].slice(0, 3) === \"nth\") {\n          // nth-* requires argument\n          if (!match[3]) {\n            Sizzle.error(match[0]);\n          } // numeric x and y parameters for Expr.filter.CHILD\n          // remember that false/true cast respectively to 0/1\n\n\n          match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === \"even\" || match[3] === \"odd\"));\n          match[5] = +(match[7] + match[8] || match[3] === \"odd\"); // other types prohibit arguments\n        } else if (match[3]) {\n          Sizzle.error(match[0]);\n        }\n\n        return match;\n      },\n      \"PSEUDO\": function PSEUDO(match) {\n        var excess,\n            unquoted = !match[6] && match[2];\n\n        if (matchExpr[\"CHILD\"].test(match[0])) {\n          return null;\n        } // Accept quoted arguments as-is\n\n\n        if (match[3]) {\n          match[2] = match[4] || match[5] || \"\"; // Strip excess characters from unquoted arguments\n        } else if (unquoted && rpseudo.test(unquoted) && ( // Get excess from tokenize (recursively)\n        excess = tokenize(unquoted, true)) && ( // advance to the next closing parenthesis\n        excess = unquoted.indexOf(\")\", unquoted.length - excess) - unquoted.length)) {\n          // excess is a negative index\n          match[0] = match[0].slice(0, excess);\n          match[2] = unquoted.slice(0, excess);\n        } // Return only captures needed by the pseudo filter method (type and argument)\n\n\n        return match.slice(0, 3);\n      }\n    },\n    filter: {\n      \"TAG\": function TAG(nodeNameSelector) {\n        var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n        return nodeNameSelector === \"*\" ? function () {\n          return true;\n        } : function (elem) {\n          return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n        };\n      },\n      \"CLASS\": function CLASS(className) {\n        var pattern = classCache[className + \" \"];\n        return pattern || (pattern = new RegExp(\"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\")) && classCache(className, function (elem) {\n          return pattern.test(typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\");\n        });\n      },\n      \"ATTR\": function ATTR(name, operator, check) {\n        return function (elem) {\n          var result = Sizzle.attr(elem, name);\n\n          if (result == null) {\n            return operator === \"!=\";\n          }\n\n          if (!operator) {\n            return true;\n          }\n\n          result += \"\";\n          return operator === \"=\" ? result === check : operator === \"!=\" ? result !== check : operator === \"^=\" ? check && result.indexOf(check) === 0 : operator === \"*=\" ? check && result.indexOf(check) > -1 : operator === \"$=\" ? check && result.slice(-check.length) === check : operator === \"~=\" ? (\" \" + result.replace(rwhitespace, \" \") + \" \").indexOf(check) > -1 : operator === \"|=\" ? result === check || result.slice(0, check.length + 1) === check + \"-\" : false;\n        };\n      },\n      \"CHILD\": function CHILD(type, what, argument, first, last) {\n        var simple = type.slice(0, 3) !== \"nth\",\n            forward = type.slice(-4) !== \"last\",\n            ofType = what === \"of-type\";\n        return first === 1 && last === 0 ? // Shortcut for :nth-*(n)\n        function (elem) {\n          return !!elem.parentNode;\n        } : function (elem, context, xml) {\n          var cache,\n              uniqueCache,\n              outerCache,\n              node,\n              nodeIndex,\n              start,\n              dir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n              parent = elem.parentNode,\n              name = ofType && elem.nodeName.toLowerCase(),\n              useCache = !xml && !ofType,\n              diff = false;\n\n          if (parent) {\n            // :(first|last|only)-(child|of-type)\n            if (simple) {\n              while (dir) {\n                node = elem;\n\n                while (node = node[dir]) {\n                  if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                    return false;\n                  }\n                } // Reverse direction for :only-* (if we haven't yet done so)\n\n\n                start = dir = type === \"only\" && !start && \"nextSibling\";\n              }\n\n              return true;\n            }\n\n            start = [forward ? parent.firstChild : parent.lastChild]; // non-xml :nth-child(...) stores cache data on `parent`\n\n            if (forward && useCache) {\n              // Seek `elem` from a previously-cached index\n              // ...in a gzip-friendly way\n              node = parent;\n              outerCache = node[expando] || (node[expando] = {}); // Support: IE <9 only\n              // Defend against cloned attroperties (jQuery gh-1709)\n\n              uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});\n              cache = uniqueCache[type] || [];\n              nodeIndex = cache[0] === dirruns && cache[1];\n              diff = nodeIndex && cache[2];\n              node = nodeIndex && parent.childNodes[nodeIndex];\n\n              while (node = ++nodeIndex && node && node[dir] || ( // Fallback to seeking `elem` from the start\n              diff = nodeIndex = 0) || start.pop()) {\n                // When found, cache indexes on `parent` and break\n                if (node.nodeType === 1 && ++diff && node === elem) {\n                  uniqueCache[type] = [dirruns, nodeIndex, diff];\n                  break;\n                }\n              }\n            } else {\n              // Use previously-cached element index if available\n              if (useCache) {\n                // ...in a gzip-friendly way\n                node = elem;\n                outerCache = node[expando] || (node[expando] = {}); // Support: IE <9 only\n                // Defend against cloned attroperties (jQuery gh-1709)\n\n                uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});\n                cache = uniqueCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = nodeIndex;\n              } // xml :nth-child(...)\n              // or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\n\n              if (diff === false) {\n                // Use the same loop as above to seek `elem` from the start\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    // Cache the index of each encountered element\n                    if (useCache) {\n                      outerCache = node[expando] || (node[expando] = {}); // Support: IE <9 only\n                      // Defend against cloned attroperties (jQuery gh-1709)\n\n                      uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});\n                      uniqueCache[type] = [dirruns, diff];\n                    }\n\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n            } // Incorporate the offset, then check against cycle size\n\n\n            diff -= last;\n            return diff === first || diff % first === 0 && diff / first >= 0;\n          }\n        };\n      },\n      \"PSEUDO\": function PSEUDO(pseudo, argument) {\n        // pseudo-class names are case-insensitive\n        // http://www.w3.org/TR/selectors/#pseudo-classes\n        // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n        // Remember that setFilters inherits from pseudos\n        var args,\n            fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error(\"unsupported pseudo: \" + pseudo); // The user may use createPseudo to indicate that\n        // arguments are needed to create the filter function\n        // just as Sizzle does\n\n        if (fn[expando]) {\n          return fn(argument);\n        } // But maintain support for old signatures\n\n\n        if (fn.length > 1) {\n          args = [pseudo, pseudo, \"\", argument];\n          return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n            var idx,\n                matched = fn(seed, argument),\n                i = matched.length;\n\n            while (i--) {\n              idx = indexOf(seed, matched[i]);\n              seed[idx] = !(matches[idx] = matched[i]);\n            }\n          }) : function (elem) {\n            return fn(elem, 0, args);\n          };\n        }\n\n        return fn;\n      }\n    },\n    pseudos: {\n      // Potentially complex pseudos\n      \"not\": markFunction(function (selector) {\n        // Trim the selector passed to compile\n        // to avoid treating leading and trailing\n        // spaces as combinators\n        var input = [],\n            results = [],\n            matcher = compile(selector.replace(rtrim, \"$1\"));\n        return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n          var elem,\n              unmatched = matcher(seed, null, xml, []),\n              i = seed.length; // Match elements unmatched by `matcher`\n\n          while (i--) {\n            if (elem = unmatched[i]) {\n              seed[i] = !(matches[i] = elem);\n            }\n          }\n        }) : function (elem, context, xml) {\n          input[0] = elem;\n          matcher(input, null, xml, results); // Don't keep the element (issue #299)\n\n          input[0] = null;\n          return !results.pop();\n        };\n      }),\n      \"has\": markFunction(function (selector) {\n        return function (elem) {\n          return Sizzle(selector, elem).length > 0;\n        };\n      }),\n      \"contains\": markFunction(function (text) {\n        text = text.replace(runescape, funescape);\n        return function (elem) {\n          return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n        };\n      }),\n      // \"Whether an element is represented by a :lang() selector\n      // is based solely on the element's language value\n      // being equal to the identifier C,\n      // or beginning with the identifier C immediately followed by \"-\".\n      // The matching of C against the element's language value is performed case-insensitively.\n      // The identifier C does not have to be a valid language name.\"\n      // http://www.w3.org/TR/selectors/#lang-pseudo\n      \"lang\": markFunction(function (lang) {\n        // lang value must be a valid identifier\n        if (!ridentifier.test(lang || \"\")) {\n          Sizzle.error(\"unsupported lang: \" + lang);\n        }\n\n        lang = lang.replace(runescape, funescape).toLowerCase();\n        return function (elem) {\n          var elemLang;\n\n          do {\n            if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) {\n              elemLang = elemLang.toLowerCase();\n              return elemLang === lang || elemLang.indexOf(lang + \"-\") === 0;\n            }\n          } while ((elem = elem.parentNode) && elem.nodeType === 1);\n\n          return false;\n        };\n      }),\n      // Miscellaneous\n      \"target\": function target(elem) {\n        var hash = window.location && window.location.hash;\n        return hash && hash.slice(1) === elem.id;\n      },\n      \"root\": function root(elem) {\n        return elem === docElem;\n      },\n      \"focus\": function focus(elem) {\n        return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n      },\n      // Boolean properties\n      \"enabled\": createDisabledPseudo(false),\n      \"disabled\": createDisabledPseudo(true),\n      \"checked\": function checked(elem) {\n        // In CSS3, :checked should return both checked and selected elements\n        // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n        var nodeName = elem.nodeName.toLowerCase();\n        return nodeName === \"input\" && !!elem.checked || nodeName === \"option\" && !!elem.selected;\n      },\n      \"selected\": function selected(elem) {\n        // Accessing this property makes selected-by-default\n        // options in Safari work properly\n        if (elem.parentNode) {\n          elem.parentNode.selectedIndex;\n        }\n\n        return elem.selected === true;\n      },\n      // Contents\n      \"empty\": function empty(elem) {\n        // http://www.w3.org/TR/selectors/#empty-pseudo\n        // :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n        //   but not by others (comment: 8; processing instruction: 7; etc.)\n        // nodeType < 6 works because attributes (2) do not appear as children\n        for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n          if (elem.nodeType < 6) {\n            return false;\n          }\n        }\n\n        return true;\n      },\n      \"parent\": function parent(elem) {\n        return !Expr.pseudos[\"empty\"](elem);\n      },\n      // Element/input types\n      \"header\": function header(elem) {\n        return rheader.test(elem.nodeName);\n      },\n      \"input\": function input(elem) {\n        return rinputs.test(elem.nodeName);\n      },\n      \"button\": function button(elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === \"input\" && elem.type === \"button\" || name === \"button\";\n      },\n      \"text\": function text(elem) {\n        var attr;\n        return elem.nodeName.toLowerCase() === \"input\" && elem.type === \"text\" && ( // Support: IE<8\n        // New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n        (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\");\n      },\n      // Position-in-collection\n      \"first\": createPositionalPseudo(function () {\n        return [0];\n      }),\n      \"last\": createPositionalPseudo(function (matchIndexes, length) {\n        return [length - 1];\n      }),\n      \"eq\": createPositionalPseudo(function (matchIndexes, length, argument) {\n        return [argument < 0 ? argument + length : argument];\n      }),\n      \"even\": createPositionalPseudo(function (matchIndexes, length) {\n        var i = 0;\n\n        for (; i < length; i += 2) {\n          matchIndexes.push(i);\n        }\n\n        return matchIndexes;\n      }),\n      \"odd\": createPositionalPseudo(function (matchIndexes, length) {\n        var i = 1;\n\n        for (; i < length; i += 2) {\n          matchIndexes.push(i);\n        }\n\n        return matchIndexes;\n      }),\n      \"lt\": createPositionalPseudo(function (matchIndexes, length, argument) {\n        var i = argument < 0 ? argument + length : argument;\n\n        for (; --i >= 0;) {\n          matchIndexes.push(i);\n        }\n\n        return matchIndexes;\n      }),\n      \"gt\": createPositionalPseudo(function (matchIndexes, length, argument) {\n        var i = argument < 0 ? argument + length : argument;\n\n        for (; ++i < length;) {\n          matchIndexes.push(i);\n        }\n\n        return matchIndexes;\n      })\n    }\n  };\n  Expr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"]; // Add button/input type pseudos\n\n  for (i in {\n    radio: true,\n    checkbox: true,\n    file: true,\n    password: true,\n    image: true\n  }) {\n    Expr.pseudos[i] = createInputPseudo(i);\n  }\n\n  for (i in {\n    submit: true,\n    reset: true\n  }) {\n    Expr.pseudos[i] = createButtonPseudo(i);\n  } // Easy API for creating new setFilters\n\n\n  function setFilters() {}\n\n  setFilters.prototype = Expr.filters = Expr.pseudos;\n  Expr.setFilters = new setFilters();\n\n  tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n    var matched,\n        match,\n        tokens,\n        type,\n        soFar,\n        groups,\n        preFilters,\n        cached = tokenCache[selector + \" \"];\n\n    if (cached) {\n      return parseOnly ? 0 : cached.slice(0);\n    }\n\n    soFar = selector;\n    groups = [];\n    preFilters = Expr.preFilter;\n\n    while (soFar) {\n      // Comma and first run\n      if (!matched || (match = rcomma.exec(soFar))) {\n        if (match) {\n          // Don't consume trailing commas as valid\n          soFar = soFar.slice(match[0].length) || soFar;\n        }\n\n        groups.push(tokens = []);\n      }\n\n      matched = false; // Combinators\n\n      if (match = rcombinators.exec(soFar)) {\n        matched = match.shift();\n        tokens.push({\n          value: matched,\n          // Cast descendant combinators to space\n          type: match[0].replace(rtrim, \" \")\n        });\n        soFar = soFar.slice(matched.length);\n      } // Filters\n\n\n      for (type in Expr.filter) {\n        if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: type,\n            matches: match\n          });\n          soFar = soFar.slice(matched.length);\n        }\n      }\n\n      if (!matched) {\n        break;\n      }\n    } // Return the length of the invalid excess\n    // if we're just parsing\n    // Otherwise, throw an error or return tokens\n\n\n    return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : // Cache the tokens\n    tokenCache(selector, groups).slice(0);\n  };\n\n  function toSelector(tokens) {\n    var i = 0,\n        len = tokens.length,\n        selector = \"\";\n\n    for (; i < len; i++) {\n      selector += tokens[i].value;\n    }\n\n    return selector;\n  }\n\n  function addCombinator(matcher, combinator, base) {\n    var dir = combinator.dir,\n        skip = combinator.next,\n        key = skip || dir,\n        checkNonElements = base && key === \"parentNode\",\n        doneName = done++;\n    return combinator.first ? // Check against closest ancestor/preceding element\n    function (elem, context, xml) {\n      while (elem = elem[dir]) {\n        if (elem.nodeType === 1 || checkNonElements) {\n          return matcher(elem, context, xml);\n        }\n      }\n\n      return false;\n    } : // Check against all ancestor/preceding elements\n    function (elem, context, xml) {\n      var oldCache,\n          uniqueCache,\n          outerCache,\n          newCache = [dirruns, doneName]; // We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\n      if (xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            if (matcher(elem, context, xml)) {\n              return true;\n            }\n          }\n        }\n      } else {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            outerCache = elem[expando] || (elem[expando] = {}); // Support: IE <9 only\n            // Defend against cloned attroperties (jQuery gh-1709)\n\n            uniqueCache = outerCache[elem.uniqueID] || (outerCache[elem.uniqueID] = {});\n\n            if (skip && skip === elem.nodeName.toLowerCase()) {\n              elem = elem[dir] || elem;\n            } else if ((oldCache = uniqueCache[key]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n              // Assign to newCache so results back-propagate to previous elements\n              return newCache[2] = oldCache[2];\n            } else {\n              // Reuse newcache so results back-propagate to previous elements\n              uniqueCache[key] = newCache; // A match means we're done; a fail means we have to keep checking\n\n              if (newCache[2] = matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        }\n      }\n\n      return false;\n    };\n  }\n\n  function elementMatcher(matchers) {\n    return matchers.length > 1 ? function (elem, context, xml) {\n      var i = matchers.length;\n\n      while (i--) {\n        if (!matchers[i](elem, context, xml)) {\n          return false;\n        }\n      }\n\n      return true;\n    } : matchers[0];\n  }\n\n  function multipleContexts(selector, contexts, results) {\n    var i = 0,\n        len = contexts.length;\n\n    for (; i < len; i++) {\n      Sizzle(selector, contexts[i], results);\n    }\n\n    return results;\n  }\n\n  function condense(unmatched, map, filter, context, xml) {\n    var elem,\n        newUnmatched = [],\n        i = 0,\n        len = unmatched.length,\n        mapped = map != null;\n\n    for (; i < len; i++) {\n      if (elem = unmatched[i]) {\n        if (!filter || filter(elem, context, xml)) {\n          newUnmatched.push(elem);\n\n          if (mapped) {\n            map.push(i);\n          }\n        }\n      }\n    }\n\n    return newUnmatched;\n  }\n\n  function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n    if (postFilter && !postFilter[expando]) {\n      postFilter = setMatcher(postFilter);\n    }\n\n    if (postFinder && !postFinder[expando]) {\n      postFinder = setMatcher(postFinder, postSelector);\n    }\n\n    return markFunction(function (seed, results, context, xml) {\n      var temp,\n          i,\n          elem,\n          preMap = [],\n          postMap = [],\n          preexisting = results.length,\n          // Get initial elements from seed or context\n      elems = seed || multipleContexts(selector || \"*\", context.nodeType ? [context] : context, []),\n          // Prefilter to get matcher input, preserving a map for seed-results synchronization\n      matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems,\n          matcherOut = matcher ? // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n      postFinder || (seed ? preFilter : preexisting || postFilter) ? // ...intermediate processing is necessary\n      [] : // ...otherwise use results directly\n      results : matcherIn; // Find primary matches\n\n      if (matcher) {\n        matcher(matcherIn, matcherOut, context, xml);\n      } // Apply postFilter\n\n\n      if (postFilter) {\n        temp = condense(matcherOut, postMap);\n        postFilter(temp, [], context, xml); // Un-match failing elements by moving them back to matcherIn\n\n        i = temp.length;\n\n        while (i--) {\n          if (elem = temp[i]) {\n            matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n          }\n        }\n      }\n\n      if (seed) {\n        if (postFinder || preFilter) {\n          if (postFinder) {\n            // Get the final matcherOut by condensing this intermediate into postFinder contexts\n            temp = [];\n            i = matcherOut.length;\n\n            while (i--) {\n              if (elem = matcherOut[i]) {\n                // Restore matcherIn since elem is not yet a final match\n                temp.push(matcherIn[i] = elem);\n              }\n            }\n\n            postFinder(null, matcherOut = [], temp, xml);\n          } // Move matched elements from seed to results to keep them synchronized\n\n\n          i = matcherOut.length;\n\n          while (i--) {\n            if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1) {\n              seed[temp] = !(results[temp] = elem);\n            }\n          }\n        } // Add elements to results, through postFinder if defined\n\n      } else {\n        matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n\n        if (postFinder) {\n          postFinder(null, results, matcherOut, xml);\n        } else {\n          push.apply(results, matcherOut);\n        }\n      }\n    });\n  }\n\n  function matcherFromTokens(tokens) {\n    var checkContext,\n        matcher,\n        j,\n        len = tokens.length,\n        leadingRelative = Expr.relative[tokens[0].type],\n        implicitRelative = leadingRelative || Expr.relative[\" \"],\n        i = leadingRelative ? 1 : 0,\n        // The foundational matcher ensures that elements are reachable from top-level context(s)\n    matchContext = addCombinator(function (elem) {\n      return unwrap(elem) === unwrap(checkContext);\n    }, implicitRelative, true),\n        matchAnyContext = addCombinator(function (elem) {\n      return indexOf(checkContext, elem) > -1;\n    }, implicitRelative, true),\n        matchers = [function (elem, context, xml) {\n      var ret = !leadingRelative && (xml || unwrap(context) !== unwrap(outermostContext)) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml)); // Avoid hanging onto element (issue #299)\n\n      checkContext = null;\n      return ret;\n    }];\n\n    for (; i < len; i++) {\n      if (matcher = Expr.relative[tokens[i].type]) {\n        matchers = [addCombinator(elementMatcher(matchers), matcher)];\n      } else {\n        matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches); // Return special upon seeing a positional matcher\n\n        if (matcher[expando]) {\n          // Find the next relative operator (if any) for proper handling\n          j = ++i;\n\n          for (; j < len; j++) {\n            if (Expr.relative[tokens[j].type]) {\n              break;\n            }\n          }\n\n          return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector( // If the preceding token was a descendant combinator, insert an implicit any-element `*`\n          tokens.slice(0, i - 1).concat({\n            value: tokens[i - 2].type === \" \" ? \"*\" : \"\"\n          })).replace(rtrim, \"$1\"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n        }\n\n        matchers.push(matcher);\n      }\n    }\n\n    return elementMatcher(matchers);\n  }\n\n  function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n    var bySet = setMatchers.length > 0,\n        byElement = elementMatchers.length > 0,\n        superMatcher = function superMatcher(seed, context, xml, results, outermost) {\n      var elem,\n          j,\n          matcher,\n          matchedCount = 0,\n          i = \"0\",\n          unmatched = seed && [],\n          setMatched = [],\n          contextBackup = outermostContext,\n          // We must always have either seed elements or outermost context\n      elems = seed || byElement && Expr.find[\"TAG\"](\"*\", outermost),\n          // Use integer dirruns iff this is the outermost matcher\n      dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1,\n          len = elems.length;\n\n      if (outermost) {\n        // SIESTA PATCH BEGIN\n        outermostContext = unwrap(context) === unwrap(document) || context || outermost; // SIESTA PATCH END\n      } // Add elements passing elementMatchers directly to results\n      // Support: IE<9, Safari\n      // Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\n\n      for (; i !== len && (elem = elems[i]) != null; i++) {\n        if (byElement && elem) {\n          j = 0;\n\n          if (!context && elem.ownerDocument !== document) {\n            setDocument(elem);\n            xml = !documentIsHTML;\n          }\n\n          while (matcher = elementMatchers[j++]) {\n            if (matcher(elem, context || document, xml)) {\n              results.push(elem);\n              break;\n            }\n          }\n\n          if (outermost) {\n            dirruns = dirrunsUnique;\n          }\n        } // Track unmatched elements for set filters\n\n\n        if (bySet) {\n          // They will have gone through all possible matchers\n          if (elem = !matcher && elem) {\n            matchedCount--;\n          } // Lengthen the array for every element, matched or not\n\n\n          if (seed) {\n            unmatched.push(elem);\n          }\n        }\n      } // `i` is now the count of elements visited above, and adding it to `matchedCount`\n      // makes the latter nonnegative.\n\n\n      matchedCount += i; // Apply set filters to unmatched elements\n      // NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n      // equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n      // no element matchers and no seed.\n      // Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n      // case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n      // numerically zero.\n\n      if (bySet && i !== matchedCount) {\n        j = 0;\n\n        while (matcher = setMatchers[j++]) {\n          matcher(unmatched, setMatched, context, xml);\n        }\n\n        if (seed) {\n          // Reintegrate element matches to eliminate the need for sorting\n          if (matchedCount > 0) {\n            while (i--) {\n              if (!(unmatched[i] || setMatched[i])) {\n                setMatched[i] = pop.call(results);\n              }\n            }\n          } // Discard index placeholder values to get only actual matches\n\n\n          setMatched = condense(setMatched);\n        } // Add matches to results\n\n\n        push.apply(results, setMatched); // Seedless set matches succeeding multiple successful matchers stipulate sorting\n\n        if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n          Sizzle.uniqueSort(results);\n        }\n      } // Override manipulation of globals by nested matchers\n\n\n      if (outermost) {\n        dirruns = dirrunsUnique;\n        outermostContext = contextBackup;\n      }\n\n      return unmatched;\n    };\n\n    return bySet ? markFunction(superMatcher) : superMatcher;\n  }\n\n  compile = Sizzle.compile = function (selector, match\n  /* Internal Use Only */\n  ) {\n    var i,\n        setMatchers = [],\n        elementMatchers = [],\n        cached = compilerCache[selector + \" \"];\n\n    if (!cached) {\n      // Generate a function of recursive functions that can be used to check each element\n      if (!match) {\n        match = tokenize(selector);\n      }\n\n      i = match.length;\n\n      while (i--) {\n        cached = matcherFromTokens(match[i]);\n\n        if (cached[expando]) {\n          setMatchers.push(cached);\n        } else {\n          elementMatchers.push(cached);\n        }\n      } // Cache the compiled function\n\n\n      cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers)); // Save selector and tokenization\n\n      cached.selector = selector;\n    }\n\n    return cached;\n  };\n  /**\n   * A low-level selection function that works with Sizzle's compiled\n   *  selector functions\n   * @param {String|Function} selector A selector or a pre-compiled\n   *  selector function built with Sizzle.compile\n   * @param {Element} context\n   * @param {Array} [results]\n   * @param {Array} [seed] A set of elements to match against\n   */\n\n\n  select = Sizzle.select = function (selector, context, results, seed) {\n    var i,\n        tokens,\n        token,\n        type,\n        find,\n        compiled = typeof selector === \"function\" && selector,\n        match = !seed && tokenize(selector = compiled.selector || selector);\n    results = results || []; // Try to minimize operations if there is only one selector in the list and no seed\n    // (the latter of which guarantees us context)\n\n    if (match.length === 1) {\n      // Reduce context if the leading compound selector is an ID\n      tokens = match[0] = match[0].slice(0);\n\n      if (tokens.length > 2 && (token = tokens[0]).type === \"ID\" && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n        context = (Expr.find[\"ID\"](token.matches[0].replace(runescape, funescape), context) || [])[0];\n\n        if (!context) {\n          return results; // Precompiled matchers will still verify ancestry, so step up a level\n        } else if (compiled) {\n          context = context.parentNode;\n        }\n\n        selector = selector.slice(tokens.shift().value.length);\n      } // Fetch a seed set for right-to-left matching\n\n\n      i = matchExpr[\"needsContext\"].test(selector) ? 0 : tokens.length;\n\n      while (i--) {\n        token = tokens[i]; // Abort if we hit a combinator\n\n        if (Expr.relative[type = token.type]) {\n          break;\n        }\n\n        if (find = Expr.find[type]) {\n          // Search, expanding context for leading sibling combinators\n          if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n            // If seed is empty or no tokens remain, we can return early\n            tokens.splice(i, 1);\n            selector = seed.length && toSelector(tokens);\n\n            if (!selector) {\n              push.apply(results, seed);\n              return results;\n            }\n\n            break;\n          }\n        }\n      }\n    } // Compile and execute a filtering function if one is not provided\n    // Provide `match` to avoid retokenization if we modified the selector above\n\n\n    (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, !context || rsibling.test(selector) && testContext(context.parentNode) || context);\n    return results;\n  }; // One-time assignments\n  // Sort stability\n\n\n  support.sortStable = expando.split(\"\").sort(sortOrder).join(\"\") === expando; // Support: Chrome 14-35+\n  // Always assume duplicates if they aren't passed to the comparison function\n\n  support.detectDuplicates = !!hasDuplicate; // Initialize against the default document\n\n  setDocument(); // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n  // Detached nodes confoundingly follow *each other*\n\n  support.sortDetached = assert(function (el) {\n    // Should return 1, but returns 4 (following)\n    return el.compareDocumentPosition(document.createElement(\"fieldset\")) & 1;\n  }); // Support: IE<8\n  // Prevent attribute/property \"interpolation\"\n  // https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\n\n  if (!assert(function (el) {\n    el.innerHTML = \"<a href='#'></a>\";\n    return el.firstChild.getAttribute(\"href\") === \"#\";\n  })) {\n    addHandle(\"type|href|height|width\", function (elem, name, isXML) {\n      if (!isXML) {\n        return elem.getAttribute(name, name.toLowerCase() === \"type\" ? 1 : 2);\n      }\n    });\n  } // Support: IE<9\n  // Use defaultValue in place of getAttribute(\"value\")\n\n\n  if (!support.attributes || !assert(function (el) {\n    el.innerHTML = \"<input/>\";\n    el.firstChild.setAttribute(\"value\", \"\");\n    return el.firstChild.getAttribute(\"value\") === \"\";\n  })) {\n    addHandle(\"value\", function (elem, name, isXML) {\n      if (!isXML && elem.nodeName.toLowerCase() === \"input\") {\n        return elem.defaultValue;\n      }\n    });\n  } // Support: IE<9\n  // Use getAttributeNode to fetch booleans when getAttribute lies\n\n\n  if (!assert(function (el) {\n    return el.getAttribute(\"disabled\") == null;\n  })) {\n    addHandle(booleans, function (elem, name, isXML) {\n      var val;\n\n      if (!isXML) {\n        return elem[name] === true ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n      }\n    });\n  } // EXPOSE\n\n\n  var _sizzle = window.Sizzle;\n\n  Sizzle.noConflict = function () {\n    if (window.Sizzle === Sizzle) {\n      window.Sizzle = _sizzle;\n    }\n\n    return Sizzle;\n  };\n\n  if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return Sizzle;\n    }); // Sizzle requires that there be a global window in Common-JS like environments\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = Sizzle;\n  } else {\n    window.Sizzle = Sizzle;\n  } // EXPOSE\n  // SIESTA PATCH BEGIN\n  // We rely on Sizzle symbol always being present, Sizzle doesn't always expose it\n\n\n  window.Sizzle = Sizzle; // mark this copy of Sizzle as being used by Siesta\n\n  Sizzle.siesta = true; // Add \"textEquals\" pseudo - exact text matching selector\n\n  Sizzle.selectors.pseudos.textEquals = function (el, i, m) {\n    var searchText = Sizzle.unescape(m[3]);\n    return Sizzle.getText([el]).replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '') === searchText;\n  }; // patch jQuery (only if it exists and its a Siesta's jQuery) to use this copy of Sizzle\n  // instead of the built-ine one\n\n\n  if (window.jQuery && window.jQuery.siesta) {\n    var oldExpr = jQuery.expr;\n    jQuery.find = Sizzle;\n    jQuery.expr = Sizzle.selectors;\n    jQuery.expr[\":\"] = jQuery.expr.filters;\n    jQuery.unique = Sizzle.uniqueSort;\n    jQuery.text = Sizzle.getText;\n    jQuery.isXMLDoc = Sizzle.isXML;\n    jQuery.contains = Sizzle.contains;\n    jQuery.expr.filters.hidden = oldExpr.filters.hidden;\n    jQuery.expr.filters.visible = oldExpr.filters.visible;\n  } // SIESTA PATCH END\n\n})(window);\n\n;\nSiesta.Sizzle = Sizzle;\nSizzle.noConflict();\n;\n;\nClass('Siesta.Util.Throttler', {\n  has: {\n    lastActivationTime: null,\n    func: {\n      required: true\n    },\n    scope: {\n      required: true\n    },\n    // activate only after this amount of time after last tick (ignoring any preceding ticks)\n    buffer: null,\n    // activate at least every `throttle` time \n    throttle: null,\n    bufferTimeoutId: null,\n    args: null\n  },\n  methods: {\n    tick: function tick() {\n      var now = new Date() - 0;\n      this.args = arguments;\n\n      if (this.throttle != null) {\n        if (!this.lastActivationTime) this.lastActivationTime = now;\n        var timeAfterLastActivation = now - this.lastActivationTime;\n        if (timeAfterLastActivation > this.throttle) this.activate();\n      }\n\n      if (this.buffer != null) {\n        var me = this;\n        if (this.bufferTimeoutId) clearTimeout(this.bufferTimeoutId);\n        this.bufferTimeoutId = setTimeout(function () {\n          me.activate();\n        }, this.buffer);\n      }\n    },\n    activate: function activate() {\n      this.lastActivationTime = new Date() - 0;\n      if (this.bufferTimeoutId) clearTimeout(this.bufferTimeoutId);\n      this.bufferTimeoutId = null;\n      var args = this.args;\n      this.args = null;\n      this.func.apply(this.scope, args);\n    },\n    cancel: function cancel() {\n      if (this.bufferTimeoutId) clearTimeout(this.bufferTimeoutId);\n      this.bufferTimeoutId = null;\n      this.args = null;\n    },\n    flush: function flush() {\n      if (this.bufferTimeoutId != null) this.activate();\n    }\n  }\n});\nRole('Siesta.Util.Role.CanCalculatePageScroll', {\n  // also recognizes the \"global\" attribute\n  methods: {\n    getElForPageScroll: function getElForPageScroll(win) {\n      win = win || this.global;\n      var doc = win.document;\n      return doc.scrollingElement || (bowser.webkit || bowser.blink || bowser.msedge ? doc.body : doc.documentElement);\n    },\n    getPageScrollX: function getPageScrollX(win) {\n      win = win || this.global;\n      if (win.pageXOffset != null) return win.pageXOffset;\n      var scrollEl = this.getElForPageScroll();\n      return scrollEl ? scrollEl.scrollLeft : 0;\n    },\n    getPageScrollY: function getPageScrollY(win) {\n      win = win || this.global;\n      if (win.pageYOffset != null) return win.pageYOffset;\n      var scrollEl = this.getElForPageScroll();\n      return scrollEl ? scrollEl.scrollTop : 0;\n    },\n    viewportXtoPageX: function viewportXtoPageX(x, win) {\n      win = win || this.global;\n      var docEl = win.document.documentElement; // seems the \"docEl.clientLeft\" thing is copied from jQuery, not sure what kind of\n      // edge case it is supposed to solve\n\n      return x + this.getPageScrollX(win) - docEl.clientLeft;\n    },\n    viewportYtoPageY: function viewportYtoPageY(y, win) {\n      win = win || this.global;\n      var docEl = win.document.documentElement; // seems the \"docEl.clientLeft\" thing is copied from jQuery, not sure what kind of\n      // edge case it is supposed to solve\n\n      return y + this.getPageScrollY(win) - docEl.clientTop;\n    },\n    pageXtoViewportX: function pageXtoViewportX(x, win) {\n      win = win || this.global;\n      var docEl = win.document.documentElement; // seems the \"docEl.clientLeft\" thing is copied from jQuery, not sure what kind of\n      // edge case it is supposed to solve\n\n      return x - this.getPageScrollX(win) + docEl.clientLeft;\n    },\n    pageYtoViewportY: function pageYtoViewportY(y, win) {\n      win = win || this.global;\n      var docEl = win.document.documentElement; // seems the \"docEl.clientLeft\" thing is copied from jQuery, not sure what kind of\n      // edge case it is supposed to solve\n\n      return y - this.getPageScrollY(win) + docEl.clientTop;\n    },\n    // this method is only actual, when Siesta UI is embedded inside the iframe of the parent window\n    // in this case we don't want the scrolling position of the parent window to change in reaction\n    // to the Siesta tests launches / progress\n    maintainScrollPositionDuring: function maintainScrollPositionDuring(func, scope) {\n      var parent = window.parent;\n      var isEmbedded = Boolean(parent);\n      var scrollLeftBefore = isEmbedded && this.getPageScrollX(parent);\n      var scrollTopBefore = isEmbedded && this.getPageScrollY(parent);\n      func.call(scope || this); // prevent scroll position change in the parent window, if Siesta UI is embedded\n\n      if (isEmbedded) {\n        var scrollEl = this.getElForPageScroll(parent);\n        if (scrollLeftBefore !== this.getPageScrollX(parent)) scrollEl.scrollLeft = scrollLeftBefore;\n        if (scrollTopBefore !== this.getPageScrollY(parent)) scrollEl.scrollTop = scrollTopBefore;\n      }\n    }\n  }\n});\nRole('Siesta.Util.Role.Dom', {\n  does: [Siesta.Util.Role.CanCalculatePageScroll],\n  has: {\n    doesNotIncludeMarginInBodyOffset: false\n  },\n  methods: {\n    // Returns document or shadowRoot for a child element of a nested context (iframe / web component) which provides API for querySelector and elementFromPoint\n    getQueryableContainer: function getQueryableContainer(el) {\n      return el ? el.getRootNode ? el.getRootNode() : el.ownerDocument : this.global.document;\n    },\n    // Returns the queryable root of an iframe or web component\n    getQueryableContainerForNestedContext: function getQueryableContainerForNestedContext(el) {\n      return el.shadowRoot || el.contentWindow.document;\n    },\n    // Returns the root element of an element, the document (<HTML>) node or a shadowroot\n    getRootElement: function getRootElement(el) {\n      if (el.getRootNode) {\n        var rootNode = el.getRootNode();\n\n        if (rootNode.constructor.name === 'ShadowRoot' || rootNode.nodeType === 11) {\n          return rootNode;\n        }\n      }\n\n      return el.ownerDocument.documentElement;\n    },\n    // Returns top most parent node of the visible DOM of an element, the body (<BODY>) node for non-web components\n    getBodyElement: function getBodyElement(el) {\n      var doc = this.getQueryableContainer(el);\n\n      if (doc.constructor.name === 'ShadowRoot' || doc.nodeType === 11) {\n        return doc;\n      }\n\n      return doc.body;\n    },\n    isCrossOriginWindow: function isCrossOriginWindow(win) {\n      try {\n        var doc = win.document;\n      } catch (e) {\n        return true;\n      } // Safari doesn't throw exception when trying to access x-domain frames\n\n\n      return !doc;\n    },\n    closest: function closest(elem, selector, maxLevels) {\n      maxLevels = maxLevels || Number.MAX_VALUE;\n      var rootEl = this.getRootElement(elem); // Get closest match\n\n      for (var i = 0; i < maxLevels && elem && elem !== rootEl; elem = elem.parentNode) {\n        if (Siesta.Sizzle.matchesSelector(elem, selector)) {\n          return elem;\n        }\n\n        i++;\n      }\n\n      return false;\n    },\n    contains: function contains(parentEl, childEl) {\n      if (!parentEl) return false;\n      if (parentEl.contains) return parentEl.contains(childEl); // SVG elements in IE does not have \"contains\" method\n\n      if (parentEl.compareDocumentPosition) return parentEl === childEl || Boolean(parentEl.compareDocumentPosition(childEl) & 16);\n      throw new Error(\"Can't determine `contains` status\");\n    },\n    matches: function matches(node, selector) {\n      return Siesta.Sizzle.matchesSelector(node, selector);\n    },\n    // returns { left : Number, top : Number } object in page coordinates\n    offset: function offset(elem) {\n      if (!elem) return null;\n      var doc = elem.ownerDocument;\n      if (!doc) return null;\n      if (elem === doc.body) return this.bodyOffset(elem);\n      var box = this.getBoundingClientRect(elem);\n      var win = doc.defaultView || doc.parentWindow;\n      return box ? {\n        left: this.viewportXtoPageX(Math.floor(box.left), win),\n        top: this.viewportYtoPageY(Math.floor(box.top), win)\n      } : {\n        left: 0,\n        top: 0\n      };\n    },\n    bodyOffset: function bodyOffset(body) {\n      var top = body.offsetTop,\n          left = body.offsetLeft;\n      this.initializeOffset();\n\n      if (this.doesNotIncludeMarginInBodyOffset) {\n        var style = getComputedStyle(body);\n        top += parseFloat(style.marginTop) || 0;\n        left += parseFloat(style.marginLeft) || 0;\n      }\n\n      return {\n        top: top,\n        left: left\n      };\n    },\n    initializeOffset: function initializeOffset() {\n      var body = document.body,\n          container = document.createElement(\"div\"),\n          bodyMarginTop = parseFloat(getComputedStyle(body).marginTop) || 0,\n          html = \"<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>\";\n      var styles = {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        margin: 0,\n        border: 0,\n        width: \"1px\",\n        height: \"1px\",\n        visibility: \"hidden\"\n      };\n\n      for (var o in styles) {\n        container.style[o] = styles[o];\n      }\n\n      container.innerHTML = html;\n      body.insertBefore(container, body.firstChild);\n      var innerDiv = container.firstChild;\n      var checkDiv = innerDiv.firstChild;\n      var td = innerDiv.nextSibling.firstChild.firstChild;\n      checkDiv.style.position = \"fixed\";\n      checkDiv.style.top = \"20px\";\n      checkDiv.style.position = checkDiv.style.top = \"\";\n      innerDiv.style.overflow = \"hidden\";\n      innerDiv.style.position = \"relative\";\n      this.doesNotIncludeMarginInBodyOffset = body.offsetTop !== bodyMarginTop;\n      body.removeChild(container);\n\n      this.initializeOffset = function () {};\n    },\n    getElementWidth: function getElementWidth(el) {\n      return this.getBoundingClientRect(el).width;\n    },\n    getElementHeight: function getElementHeight(el) {\n      return this.getBoundingClientRect(el).height;\n    },\n    getWindowSize: function getWindowSize(win) {\n      var doc = win.document;\n      return {\n        width: win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth,\n        height: win.innerHeight || doc.documentElement.clientHeight || doc.body.clientHeight\n      };\n    },\n    isPointWithinElement: function isPointWithinElement(x, y, el) {\n      var rect = this.getBoundingClientRect(el);\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    },\n    isElementReachableAt: function isElementReachableAt(el, pageX, pageY, allowChild) {\n      allowChild = allowChild !== false;\n      var doc = el.ownerDocument;\n      var win = doc.defaultView || doc.parentWindow;\n      var foundEl = this.getQueryableContainer(el).elementFromPoint(this.pageXtoViewportX(pageX, win), this.pageYtoViewportY(pageY, win));\n      return foundEl && (foundEl === el || allowChild && this.contains(el, foundEl));\n    },\n    isElementReachableAtCenter: function isElementReachableAtCenter(el, allowChild) {\n      allowChild = allowChild !== false;\n      var offsets = this.offset(el);\n      return this.isElementReachableAt(el, offsets.left + this.getElementWidth(el) / 2, offsets.top + this.getElementHeight(el) / 2, allowChild);\n    },\n    // patched version to support SVG in IE11/Edge\n    getBoundingClientRect: function getBoundingClientRect(el) {\n      var svgEl = el.ownerSVGElement;\n\n      if (svgEl && (bowser.msie || bowser.msedge || bowser.gecko)) {\n        var elBox = el.getBBox(),\n            svgRect = svgEl.getBoundingClientRect(),\n            left = svgRect.left + elBox.x,\n            top = svgRect.top + elBox.y,\n            right = left + elBox.width,\n            bottom = top + elBox.height;\n        return {\n          x: left,\n          y: top,\n          left: left,\n          top: top,\n          bottom: bottom,\n          height: elBox.height,\n          width: elBox.width\n        };\n      } else {\n        return el.getBoundingClientRect();\n      }\n    },\n    nodeIsUnloaded: function nodeIsUnloaded(el) {\n      try {\n        // throws if accessed when element belonged to an iframe that's no longer in DOM\n        el && el.tagName;\n        var doc = el.ownerDocument;\n        var win = doc && (doc.defaultView || doc.parentWindow);\n        return !Boolean(win);\n      } catch (e) {\n        // exception here probably means the \"lastOverEl\" is from freed context (unloaded page)\n        // access to such elements throws exceptions in IE\n        el = null;\n        return true;\n      }\n    },\n    nodeIsOrphan: function nodeIsOrphan(el) {\n      if (el.constructor.name === 'ShadowRoot' || el.nodeType === 11) {\n        el = el.host;\n      }\n\n      var docOrHtmlFragment = this.getRootElement(el); // Detached doc fragment ?\n\n      if (docOrHtmlFragment && docOrHtmlFragment.nodeType === 11) {\n        return !docOrHtmlFragment.isConnected;\n      }\n\n      return !docOrHtmlFragment || !docOrHtmlFragment.contains(el);\n    },\n    getNodeParents: function getNodeParents(node) {\n      var nodes = [];\n\n      for (; node && node.parentNode; node = node.parentNode) {\n        nodes.unshift(node);\n      }\n\n      return nodes;\n    },\n    getCommonAncestor: function getCommonAncestor(node1, node2) {\n      var parents1 = this.getNodeParents(node1);\n      var parents2 = this.getNodeParents(node2); // Make sure both nodes are part of same DOM tree\n\n      if (parents1[0] != parents2[0]) return null;\n\n      for (var i = 0; i < parents1.length; i++) {\n        if (parents1[i] !== parents2[i]) {\n          return parents1[i - 1];\n        }\n      }\n    }\n  }\n});\nRole('Siesta.Util.Role.CanParseOs', {\n  methods: {\n    parseOS: function parseOS(platform) {\n      if (/Win/i.test(platform)) return \"Windows\";\n      if (/Mac/.test(platform) || /darwin/i.test(platform)) return \"MacOS\";\n      if (/Linux/i.test(platform)) return \"Linux\";\n      return \"unknown\";\n    }\n  }\n});\n;\nRole('Siesta.Util.Role.CanGetType', {\n  methods: {\n    /**\n     * This method returns a result of `Object.prototype.toString` applied to the passed argument. The `[object` and trailing `]` are trimmed.\n     *\n     * @param {Mixed} object\n     * @return {String} The name of the \"type\" for this object.\n     */\n    typeOf: function typeOf(object) {\n      return Object.prototype.toString.call(object).slice(8, -1);\n    }\n  }\n});\nRole('Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy', {\n  methods: {\n    mergeArrayAttributeFromClassHierarchy: function mergeArrayAttributeFromClassHierarchy(name, cfg) {\n      var arrays = [];\n\n      for (var meta = this.meta; meta.hasAttribute(name); meta = meta.superClass.meta) {\n        arrays.push(meta.getAttribute(name).init());\n      }\n\n      if (cfg.hasOwnProperty(name) && this[name]) arrays.unshift(this[name]);\n      var result = [];\n      arrays.forEach(function (array) {\n        result.push.apply(result, array);\n      });\n      return result;\n    }\n  }\n});\n;\nRole('Siesta.Recorder.Role.CanSwallowException', {\n  does: [JooseX.Observable],\n  has: {\n    swallowExceptions: false\n  },\n  methods: {\n    safeBind: function safeBind(func, scope) {\n      var me = this;\n      scope = scope || me; // extra protection from the exceptions from the recorder itself\n\n      if (me.swallowExceptions) {\n        return function () {\n          try {\n            return func.apply(scope, arguments);\n          } catch (e) {\n            me.fireEvent('exception', e);\n          }\n        };\n      } else {\n        return func.bind(scope);\n      }\n    }\n  } // eof methods\n\n});\n;\nClass('Siesta.Recorder.Target', {\n  has: {\n    targets: Joose.I.Array,\n    activeTarget: null\n  },\n  methods: {\n    initialize: function initialize() {\n      if (!this.targets) this.targets = [];\n      var firstTarget = this.targets[0];\n      if (firstTarget && !this.activeTarget) this.activeTarget = firstTarget.type;\n    },\n    clear: function clear() {\n      this.targets = [];\n    },\n    getTargets: function getTargets() {\n      var target = this.getTarget();\n      return target && target.targets || null;\n    },\n    // returns \"query-able\" target\n    getTargetAsQueryString: function getTargetAsQueryString() {\n      var target = this.getTarget();\n      if (target.type == 'xy') return target.target;\n      return (target.type == 'cq' ? '>>' : '') + target.target;\n    },\n    // `getActiveTarget`\n    getTarget: function getTarget() {\n      return this.getTargetByType(this.activeTarget);\n    },\n    clearOffset: function clearOffset() {\n      this.setOffset(null);\n    },\n    setOffset: function setOffset(value) {\n      var target = this.getTarget();\n      if (target) if (value) target.offset = value;else delete target.offset;\n    },\n    getOffset: function getOffset() {\n      var target = this.getTarget();\n      if (target) return target.offset;\n    },\n    getTargetByType: function getTargetByType(type) {\n      var targetByType;\n      Joose.A.each(this.targets, function (target) {\n        if (target.type == type) {\n          targetByType = target;\n          return false;\n        }\n      });\n      return targetByType;\n    },\n    setUserTarget: function setUserTarget(value, offset) {\n      var userTarget = this.getTargetByType('user');\n\n      if (!userTarget) {\n        var target = {\n          type: 'user',\n          target: value\n        };\n        if (offset) target.offset = offset;\n        this.targets.unshift(target);\n      } else {\n        userTarget.target = value;\n        if (offset) userTarget.offset = offset;else delete userTarget.offset;\n      }\n\n      this.activeTarget = 'user';\n    },\n    // some old crap with unclear semantic - need to get rid of it\n    // returns `true` if targeting the coordinates on the screen or <body> (which is the same thing)\n    isTooGeneric: function isTooGeneric() {\n      var targets = this.targets;\n      if (!targets || targets.length === 0) return true;\n      if (targets.length === 1 && targets[0].type == 'xy') return true;\n\n      if (targets.length === 2) {\n        var xy = this.getTargetByType('xy');\n        var css = this.getTargetByType('css');\n        if (xy && css && css.target == 'body') return true;\n      }\n\n      return false;\n    }\n  }\n});\n;\n!function () {\n  var ID = 1;\n  Class('Siesta.Recorder.Event', {\n    has: {\n      id: function id() {\n        return ID++;\n      },\n      type: null,\n      // Use now instead of event timestamp Firefox / Chrome doesn't have same or\n      // stable timeStamp implementation (switched to DOMHighResTimeStamp in FF 39, Chrome 49)\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1186218\n      // https://googlechrome.github.io/samples/event-timestamp/index.html\n      timestamp: function timestamp() {\n        return Date.now();\n      },\n      // Alt, ctrl, meta, shift keys\n      options: null,\n      // pageX and pageY - page coordinates\n      x: null,\n      y: null,\n      target: null,\n      charCode: null,\n      keyCode: null,\n      button: null,\n      deltaX: null,\n      deltaY: null,\n      deltaZ: null,\n      rawEvent: null\n    },\n    methods: {},\n    my: {\n      has: {\n        HOST: null\n      },\n      methods: {\n        fromDomEvent: function fromDomEvent(e) {\n          var options = {};\n          ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].forEach(function (id) {\n            if (e[id]) options[id] = true;\n          });\n          var target = e.target;\n          var config = {\n            type: e.type,\n            target: target,\n            options: options,\n            rawEvent: e\n          };\n\n          if (e.type === 'wheel') {\n            config.deltaX = e.deltaX;\n            config.deltaY = e.deltaY;\n            config.deltaZ = e.deltaZ;\n          }\n\n          if (e.type.match(/^key/)) {\n            config.charCode = e.charCode || e.keyCode;\n            config.keyCode = e.keyCode;\n          } else if (typeof e.clientX === 'number') {\n            var ownerDoc = target && target.ownerDocument; // Overcomplicated due to IE9\n\n            var docEl = ownerDoc && ownerDoc.documentElement;\n            var bodyEl = ownerDoc && ownerDoc.body; //Chrome              Firefox\n\n            var pageX = bodyEl ? e.clientX + (bodyEl.scrollLeft || docEl.scrollLeft) : e.pageX;\n            var pageY = bodyEl ? e.clientY + (bodyEl.scrollTop || docEl.scrollTop) : e.pageY;\n            config.x = pageX;\n            config.y = pageY;\n            config.button = e.button;\n          }\n\n          return new this.HOST(config);\n        }\n      }\n    }\n  });\n}();\n;\n!function () {\n  var ID = 1;\n  Class('Siesta.Recorder.Action', {\n    has: {\n      id: function id() {\n        return ID++;\n      },\n      action: null,\n      value: null,\n\n      /*\n          Possible type of targets:\n          - 'xy'      XY coordinates\n          - 'css'     css selector\n          - 'cq'      component query\n          - 'csq'     composite query\n          - 'user'    user-provided text\n      */\n      target: null,\n      // used by \"dragTo\"\n      toTarget: null,\n      by: null,\n      waitForPageLoad: false,\n      options: null,\n      // Should be a Siesta.Recorder.Event\n      sourceEvent: null,\n      sourceEventTargetReachableAtCenter: false,\n      timestamp: function timestamp() {\n        return new Date().getTime();\n      }\n    },\n    methods: {\n      initialize: function initialize() {\n        var target = this.target;\n\n        if (target && !(target instanceof Siesta.Recorder.Target)) {\n          this.target = new Siesta.Recorder.Target({\n            targets: target\n          });\n        }\n\n        var toTarget = this.toTarget;\n        if (toTarget && !(toTarget instanceof Siesta.Recorder.Target)) this.toTarget = new Siesta.Recorder.Target({\n          targets: toTarget\n        });\n      },\n      setAction: function setAction(newAction) {\n        this.action = newAction;\n\n        if (!this.hasTarget()) {\n          this.target && this.target.clear();\n          this.toTarget && this.toTarget.clear();\n        }\n      },\n      hasTarget: function hasTarget() {\n        var action = this.action || '';\n        return this.isMouseAction() || action == 'selectText';\n      },\n      getTarget: function getTarget(asInstance) {\n        var target = this.target;\n        return asInstance ? target : target && target.getTarget();\n      },\n      getTimestamp: function getTimestamp() {\n        return this.sourceEvent && this.sourceEvent.timestamp || this.timestamp;\n      },\n      isMouseAction: function isMouseAction() {\n        return (this.action || '').toLowerCase() in {\n          click: 1,\n          contextmenu: 1,\n          dblclick: 1,\n          drag: 1,\n          mousedown: 1,\n          mouseup: 1,\n          movecursorto: 1,\n          wheel: 1\n        };\n      },\n      resetValues: function resetValues() {\n        this.target = null;\n        this.value = null;\n        this.toTarget = null;\n        this.by = null;\n        this.options = null;\n        this.sourceEvent = null;\n        this.waitForPageLoad = false;\n      },\n      parseOffset: function parseOffset(offsetString) {\n        var values = offsetString.split(',');\n        if (values.length < 2) return;\n\n        if (!values[0].match('%')) {\n          values[0] = parseInt(values[0], 10);\n          if (isNaN(values[0])) return;\n        }\n\n        if (!values[1].match('%')) {\n          values[1] = parseInt(values[1], 10);\n          if (isNaN(values[1])) return;\n        }\n\n        return values;\n      },\n      clearTargetOffset: function clearTargetOffset(keepOld) {\n        this.setTargetOffset(null, keepOld);\n      },\n      restoreTargetOffset: function restoreTargetOffset() {\n        var target = this.target;\n\n        if (target && target.__SAVED_OFFSET__) {\n          target.setOffset(target.__SAVED_OFFSET__);\n          delete target.__SAVED_OFFSET__;\n        }\n      },\n      setTargetOffset: function setTargetOffset(value, keepOld) {\n        var target = this.target;\n\n        if (target) {\n          if (keepOld) {\n            var targetDesc = target.getTarget();\n            target.__SAVED_OFFSET__ = targetDesc.offset;\n          }\n\n          target.setOffset(value);\n        }\n      },\n      getTargetOffset: function getTargetOffset() {\n        var target = this.target;\n        if (target) return target.getOffset();\n      },\n      objectToSource: function objectToSource(obj) {\n        var me = this;\n        var result = '';\n        var prependComma;\n\n        var convertFn = function convertFn(key, value) {\n          value = value || obj[key];\n\n          if (value instanceof Array) {\n            return key + ' : ' + JSON.stringify(value);\n          } else if (value && _typeof(value) === 'object') {\n            return key + ' : ' + me.objectToSource(value);\n          } else {\n            return key + ' : ' + (typeof value === 'string' ? '\"' + value + '\"' : value);\n          }\n        };\n\n        if (obj.action == 'type') {\n          result = convertFn('type', obj.text);\n          prependComma = true;\n          delete obj.action;\n          delete obj.text;\n        } else if (obj.target) {\n          // Use brief action description, do this manually to make sure action + target is\n          // the first item in the object descriptor\n          result = convertFn(obj.action, obj.target);\n          prependComma = true;\n          delete obj.target;\n          delete obj.action;\n        }\n\n        var keys = Object.keys(obj);\n\n        if (keys.length > 0) {\n          result = result + (prependComma ? ', ' : '') + keys.map(function (key) {\n            return convertFn(key);\n          }).join(', ');\n        }\n\n        return '{ ' + result + ' }';\n      },\n      asCode: function asCode() {\n        var step = this.asStep();\n        if (!step) return null;\n        return typeof step == 'function' ? step : this.objectToSource(step);\n      },\n      asStep: function asStep(test) {\n        var actionName = this.action;\n        if (!actionName) return null;\n        var step = {\n          action: this.action\n        };\n        var target = this.getTarget();\n        var value = this.value;\n        var hasTarget = this.hasTarget();\n\n        if (hasTarget || actionName == 'type' || actionName == 'scrollTo') {\n          if (!target) {\n            // If target is required but not filled in, just leave it blank\n            step.target = '';\n          } else if (target.type == 'cq') {\n            var splitPos = target.target.indexOf('->');\n            step.target = splitPos > 0 ? target.target.split('->').splice(1, 0, '>>').join() : '>>' + target.target;\n          } else {\n            step.target = target.target;\n          }\n\n          if (target && target.offset) step.offset = target.offset.slice();\n        }\n\n        if (this.options && !Joose.O.isEmpty(this.options)) {\n          step.options = this.options;\n        }\n\n        if (actionName.match(/^waitFor/)) {\n          switch (actionName) {\n            case 'waitForFn':\n              // After this statement, t will be available in the evaled function below just as a regular local variable\n              if (test) var t = test;\n              return {\n                waitFor: eval(\"(function() {\\n        \" + value.replace(/\\n/g, \"\\n        \") + \"\\n    })\")\n              };\n\n            case 'waitForMs':\n              var val = parseInt(value, 10);\n              return {\n                waitForMs: val\n              };\n\n            default:\n              var obj = {};\n              obj[actionName] = value || [];\n              return obj;\n          }\n        } else {\n          switch (actionName) {\n            case 'click':\n            case 'dblclick':\n            case 'contextmenu':\n            case 'mousedown':\n            case 'mouseup':\n            case 'moveCursorTo':\n            case 'wheel':\n              break;\n\n            case 'scrollTo':\n              return {\n                scrollTo: [step.target, value[0], value[1]]\n              };\n\n            case 'moveCursorAlongPath':\n            case 'moveMouseAlongPath':\n              var step = {};\n              step[actionName] = [value];\n              return step;\n\n            case 'screenshot':\n              step = {\n                screenshot: value\n              };\n              break;\n\n            case 'moveCursorBy':\n              var by = this.value.split(',');\n              by[0] = parseInt(by[0], 10);\n              by[1] = parseInt(by[1], 10);\n              step = {\n                action: 'moveCursor',\n                by: by\n              };\n              break;\n\n            case 'type':\n              step.text = value;\n              break;\n\n            case 'drag':\n              var toTarget = this.toTarget;\n\n              if (toTarget && !toTarget.isTooGeneric()) {\n                step.to = toTarget.target;\n                if (toTarget.offset) step.toOffset = toTarget.offset;\n                break;\n              }\n\n              step.by = this.by;\n              break;\n\n            case 'fn':\n              // After this statement, t will be available in the evaled function below just as a regular local variable\n              if (test) var t = test;\n              return eval(\"(function(next) {\\n        \" + value.replace(/\\n/g, \"\\n        \") + \"\\n        next();\\n    })\");\n\n            default:\n              var step = {};\n              step[actionName] = value;\n              return step;\n          }\n        }\n\n        return this.waitForPageLoad ? {\n          waitForPageLoad: [],\n          trigger: step\n        } : step;\n      } // eof `asStep`\n\n    }\n  });\n}();\n;\nRole('Ariadne.QueryFinder.TreeWalker', {\n  methods: {\n    getParent: function getParent(el) {\n      throw new Error(\"Abstract method called: `getParent`\");\n    },\n    contains: function contains(parentEl, childEl) {\n      throw new Error(\"Abstract method called: `contains`\");\n    }\n  }\n});\n;\nClass('Ariadne.QueryFinder.Identifier', {\n  does: Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,\n  has: {\n    finder: {\n      required: true\n    },\n    priority: 100\n  },\n  methods: {\n    /**\n        Should returns a single \"segment\" or an array of segments, or null\n        \n        A segment:\n        \n        - a string with query - will be assigned default weight of 1000\n        \n        - an object:\n            {\n                query           : String,\n                weight          : Number, // optional, default is 1000\n                \n                // indicates that segment should be the 1st one in the query component\n                leading         : Boolean, // optional\n                \n                // indicates that query component with this segment should be combined \n                // with previous one using '>'\n                child           : Boolean\n            }\n      */\n    identify: function identify(target, root, maze) {\n      return [];\n    }\n  }\n});\n;\nClass('Ariadne.QueryFinder.Combinator', {\n  has: {\n    elements: {\n      required: true\n    },\n    currentCombLen: null,\n    combination: null\n  },\n  methods: {\n    forAllCombinations: function forAllCombinations(func) {\n      var elements = this.elements;\n      var elemLength = elements.length;\n      var combination = this.combination;\n\n      for (var combLen = combination ? combination.length : 1; combLen <= elemLength; combLen++) {\n        combination = this.forAllCombinationsOfLength(combLen, func, combination);\n        this.combination = combination;\n        if (combination) return false;\n      }\n    },\n    forAllCombinationsOfLength: function forAllCombinationsOfLength(combLen, func, combination) {\n      var elements = this.elements;\n      var elemLength = elements.length;\n      if (combLen > elemLength) return;\n\n      if (!combination) {\n        combination = new Array(combLen);\n\n        for (var i = 0; i < combLen; i++) {\n          combination[i] = {\n            current: i,\n            max: elemLength - combLen + i\n          };\n        }\n      }\n\n      if (combination.length != combLen) throw new Error(\"Wrong combination state\");\n      var shouldStop;\n\n      do {\n        var collected = [];\n\n        for (var k = 0; k < combLen; k++) {\n          collected.push(elements[combination[k].current]);\n        }\n\n        if (func(collected) === false) return combination;\n        shouldStop = true;\n\n        for (var i = combLen - 1; i >= 0; i--) {\n          var combAt = combination[i];\n\n          if (combAt.current < combAt.max) {\n            combAt.current++;\n            shouldStop = false;\n\n            for (var j = i + 1; j < combLen; j++) {\n              combination[j].current = combination[j - 1].current + 1;\n            }\n\n            break;\n          }\n        }\n      } while (!shouldStop);\n    }\n  }\n});\n;\nRole('Ariadne.QueryFinder.PathFinder', {\n  has: {\n    // array of objects: \n    // { weight : Number, minFromEdgesById : Object }\n    // \"minFromEdgesById\" sample object: { edgeId : edge }\n    weightOptions: Joose.I.Array,\n    weightOptionsByWeight: Joose.I.Object\n  },\n  methods: {\n    // paths - array of paths (path is object like: { segmentsById : {}, hash : '', weight : 0, ids : [] } )\n    // variants - array of segments array (from edge)\n    // returns new array of paths or empty array, if variants does not contain any new segment\n    extendPathVariants: function extendPathVariants(pathVariants, variants, onlyWithIndex) {\n      if (pathVariants.length == 0) {\n        pathVariants = [{\n          segmentsById: {},\n          hash: '',\n          weight: 0,\n          ids: []\n        }];\n      }\n\n      var pathLen = pathVariants.length;\n      var varLen = variants.length;\n      var extendedPaths = [];\n      var pathsHashes = {};\n\n      for (var i = 0; i < pathLen; i++) {\n        var pathVariant = pathVariants[i];\n\n        for (var v = 0; v < varLen; v++) {\n          var variant = variants[v];\n          if (onlyWithIndex != null && !variant.indicies[onlyWithIndex]) continue;\n          var segments = variant.variant;\n          var newPathVariant = pathVariant;\n          var hasNewSegment = false;\n\n          for (var s = 0; s < segments.length; s++) {\n            var segment = segments[s];\n\n            if (!newPathVariant.segmentsById[segment.id]) {\n              // lazily clone the pathVariant variant, when we've discovered some new segment\n              if (!hasNewSegment) {\n                hasNewSegment = true;\n                newPathVariant = this.clonePathVariant(pathVariant);\n              }\n\n              newPathVariant.segmentsById[segment.id] = segment;\n              newPathVariant.weight += segment.weight;\n              newPathVariant.ids.push(segment.id);\n            }\n          }\n\n          if (hasNewSegment) {\n            newPathVariant.ids.sort(function (a, b) {\n              return a - b;\n            });\n            newPathVariant.hash = newPathVariant.ids.join('');\n          }\n\n          if (!pathsHashes[newPathVariant.hash]) {\n            pathsHashes[newPathVariant.hash] = true;\n            extendedPaths.push(newPathVariant);\n          }\n        }\n      }\n\n      return extendedPaths;\n    },\n    clonePathVariant: function clonePathVariant(pathVariant) {\n      //            CLONECOUNTER            = window.CLONECOUNTER || 0\n      //            CLONECOUNTER++\n      var clone = Object.assign ? Object.assign({}, pathVariant) : Joose.O.copy(pathVariant);\n      clone.segmentsById = Object.assign ? Object.assign({}, clone.segmentsById) : Joose.O.copy(clone.segmentsById);\n      clone.ids = clone.ids.slice();\n      return clone;\n    },\n    collectAllSimplePathsOfWeight: function collectAllSimplePathsOfWeight(weight, paths, isDirectChild) {\n      if (!paths) paths = [''];else paths = paths.slice();\n      var pathsLen = paths.length;\n\n      for (var i = 0; i < pathsLen; i++) {\n        paths[i] += (isDirectChild ? '_+' : '_') + this.index;\n      }\n\n      var weightOption = this.weightOptionsByWeight[weight];\n      if (!weightOption) throw new Error(\"Incorrect path weight\");\n      var minFromEdgesById = weightOption.minFromEdgesById;\n      if (Joose.O.isEmpty(minFromEdgesById)) return paths;else {\n        var allPaths = [];\n\n        for (var id in minFromEdgesById) {\n          var edge = minFromEdgesById[id];\n          allPaths.push.apply(allPaths, edge.fromNode.collectAllSimplePathsOfWeight(weight - edge.weight, paths, edge.isDirectChild));\n        }\n\n        return allPaths;\n      }\n    },\n    collectFullSimplePathCollection: function collectFullSimplePathCollection() {\n      var simplePaths = [];\n\n      for (var i = 0; i < this.weightOptions.length; i++) {\n        var weightOption = this.weightOptions[i];\n        simplePaths.push({\n          weight: weightOption.weight,\n          simplePaths: this.collectAllSimplePathsOfWeight(weightOption.weight)\n        });\n      }\n\n      return simplePaths;\n    }\n  }\n});\n;\nClass('Ariadne.QueryFinder.Edge', {\n  does: Siesta.Util.Role.HasUniqueGeneratedId,\n  has: {\n    finder: {\n      required: true\n    },\n    maze: {\n      required: true\n    },\n    fromNode: {\n      required: true\n    },\n    toNode: {\n      required: true\n    },\n    // Array of { variant : segments, hash : hash, indicies : Object }\n    segmentVariants: Joose.I.Array,\n    segmentVariantsHashes: Joose.I.Object,\n    isDirectChild: false,\n    weight: Infinity\n  },\n  methods: {\n    register: function register() {\n      var fromNode = this.fromNode;\n      var toNode = this.toNode;\n      if (fromNode.edgesToByIndex[toNode.index]) throw new Error(\"Edge already exists\");\n      if (toNode.edgesFromByIndex[fromNode.index]) throw new Error(\"Edge already exists\");\n      fromNode.edgesToByIndex[toNode.index] = this;\n      toNode.edgesFromByIndex[fromNode.index] = this;\n    },\n    consumeVariant: function consumeVariant(segments, segmentsCombInfo) {\n      // TUNE\n      //            FOUNDEDGECOUNTER        = window.FOUNDEDGECOUNTER || 0\n      //            FOUNDEDGECOUNTER++\n      if (arguments.length == 1) {\n        segmentsCombInfo = this.finder.combineSegments(segments);\n      }\n\n      var weight = segmentsCombInfo.weight;\n      var hash = segmentsCombInfo.hash;\n\n      if (this.weight > weight) {\n        //                if (this.weight < Infinity) console.log(\"REDEFINED: \" + this.segmentVariants.length)\n        this.weight = weight;\n        this.segmentVariants = [];\n        this.segmentVariantsHashes = {};\n      } //            if (this.segmentVariantsHashes[ hash ]) {\n      //                console.log(\"REPEATED\")\n      //            }\n\n\n      if (this.weight == weight && !this.segmentVariantsHashes[hash]) {\n        // TUNE\n        //                console.log(\"Found edge from: \" + this.   fromNode.index + \"[\" + this.fromNode.el.tagName + \"] to \" + this.toNode.index + \"[\" + this.toNode.el.tagName + \"] query: \" + segmentsCombInfo.query)\n        // TUNE\n        //                FOUNDEDGECOUNTER        = window.FOUNDEDGECOUNTER || 0\n        //                FOUNDEDGECOUNTER++\n        var indicies = {}; // should collect all indicies (in the \"combineSegments\"?)\n\n        indicies[segments[0].index] = true;\n        this.segmentVariantsHashes[hash] = true;\n        this.segmentVariants.push({\n          variant: segments,\n          hash: hash,\n          indicies: indicies\n        }); // indicates that something has changed\n\n        return true;\n      }\n    },\n    relax: function relax() {\n      var fromNode = this.fromNode;\n      var toNode = this.toNode;\n\n      if (fromNode.isReachedWithDirectChildEdge()) {\n        var index = fromNode.index;\n        var segmentVariants = this.segmentVariants;\n        var hasVariantWithOwnSegments = false;\n\n        for (var i = 0; i < segmentVariants.length; i++) {\n          if (segmentVariants[i].indicies[index]) {\n            hasVariantWithOwnSegments = true;\n            break;\n          }\n        }\n\n        if (!hasVariantWithOwnSegments) return false;\n      }\n\n      var possibleWeight = this.weight + fromNode.weightOptions[0].weight;\n      var existingWeightOption = toNode.weightOptionsByWeight[possibleWeight];\n\n      if (existingWeightOption && !existingWeightOption.minFromEdgesById[this.id]) {\n        existingWeightOption.minFromEdgesById[this.id] = this;\n        return true;\n      }\n\n      if (!existingWeightOption) {\n        var minFromEdgesById = {};\n        minFromEdgesById[this.id] = this;\n        var weightOption = {\n          weight: possibleWeight,\n          minFromEdgesById: minFromEdgesById\n        };\n        toNode.weightOptionsByWeight[possibleWeight] = weightOption;\n        var weightOptions = toNode.weightOptions;\n\n        for (var i = 0; i < weightOptions.length; i++) {\n          if (possibleWeight < weightOptions[i].weight) {\n            weightOptions.splice(i, 0, weightOption);\n            return true;\n          }\n        }\n\n        weightOptions.push(weightOption);\n        return true;\n      }\n    }\n  }\n});\n;\nClass('Ariadne.QueryFinder.Node', {\n  does: [Siesta.Util.Role.HasUniqueGeneratedId, Ariadne.QueryFinder.PathFinder],\n  has: {\n    finder: {\n      required: true\n    },\n    maze: {\n      required: true\n    },\n    el: {\n      required: true\n    },\n    index: null,\n    segments: null,\n    combinator: null,\n    upNode: null,\n    downNode: null,\n    queryCache: Joose.I.Object,\n    edgesToByIndex: Joose.I.Object,\n    edgesFromByIndex: Joose.I.Object,\n    directChildUpEdge: null\n  },\n  methods: {\n    contains: function contains(node) {\n      return this.finder.contains(this.el, node.el);\n    },\n    setSegments: function setSegments(value) {\n      var me = this;\n      value.sort(function (s1, s2) {\n        return s1.weight - s2.weight;\n      });\n      value.forEach(function (segment) {\n        me.adoptSegment(segment);\n      });\n      this.segments = value;\n      this.combinator = new Ariadne.QueryFinder.Combinator({\n        elements: value\n      });\n    },\n    adoptSegment: function adoptSegment(segment) {\n      segment.index = this.index;\n      segment.id = this.maze.segmentsIdGen++;\n    },\n    isReachedWithDirectChildEdge: function isReachedWithDirectChildEdge() {\n      var minWeightOption = this.weightOptions[0];\n      var minFromEdgesById = minWeightOption.minFromEdgesById;\n\n      for (var id in minFromEdgesById) {\n        var edge = minFromEdgesById[id];\n        if (edge.isDirectChild) return true;\n      }\n\n      return false;\n    },\n    addEdgeTo: function addEdgeTo(toNode, segments, segmentsCombInfo) {\n      if (arguments.length == 2) {\n        segmentsCombInfo = this.finder.combineSegments(segments);\n      }\n\n      var edge = this.edgesToByIndex[toNode.index];\n\n      if (!edge) {\n        edge = new Ariadne.QueryFinder.Edge({\n          finder: this.finder,\n          maze: this.maze,\n          fromNode: this,\n          toNode: toNode\n        });\n        edge.register();\n      }\n\n      if (edge.weight >= segmentsCombInfo.weight) return edge.consumeVariant(segments, segmentsCombInfo);\n    },\n    addAllEdgesTo: function addAllEdgesTo(toNode, segments, segmentsCombInfo) {\n      if (toNode == this || this.contains(toNode)) throw new Error(\"Invalid nodes for edge\");\n\n      if (arguments.length == 2) {\n        segmentsCombInfo = this.finder.combineSegments(segments);\n      }\n\n      for (var from = this; from && from != toNode; from = from.upNode) {\n        for (var to = from.upNode; to && to != toNode.upNode; to = to.upNode) {\n          from.addEdgeTo(to, segments, segmentsCombInfo);\n        }\n      }\n    },\n    buildEdges3: function buildEdges3(maxSegments) {\n      var me = this;\n      var el = this.el;\n      var finder = this.finder;\n      var maze = this.maze;\n      var root = maze.getRoot();\n      var foundUniqueId = false; //            var updatedNodes    = {}\n      //            this.combinator.forAllCombinations(function (segments) {\n\n      this.combinator.forAllCombinationsOfLength(maxSegments, function (segments) {\n        //                COMBCOUNT           = window.COMBCOUNT || 0\n        //                COMBCOUNT++\n        var segmentsCombInfo = finder.combineSegments(segments);\n        if (!segmentsCombInfo) return;\n        var query = segmentsCombInfo.query;\n        var rootNode = root;\n\n        while (rootNode && rootNode != me) {\n          var existingEdge = me.edgesToByIndex[rootNode.index];\n\n          if (existingEdge) {\n            if (segmentsCombInfo.weight > existingEdge.weight) {\n              rootNode = rootNode.downNode;\n              continue;\n            }\n          }\n\n          var queryRes = maze.doQuery(query, rootNode);\n\n          if (queryRes.length == 1 && queryRes[0] == el) {\n            me.addAllEdgesTo(rootNode, segments, segmentsCombInfo);\n\n            if (rootNode == root && segmentsCombInfo.hasId) {\n              foundUniqueId = true;\n              return false;\n            }\n\n            break;\n          } else if (queryRes.length > 0) {\n            var commonContainer = rootNode.downNode;\n            var lowestCommonContainer = null; //                            var ignoreElsOnTheAxis      = {}\n\n            while (commonContainer && commonContainer != me) {\n              var containsAll = true;\n\n              for (var i = 0; i < queryRes.length; i++) {\n                //                                    in theory we can ignore query results that belongs to axe, except\n                //                                    when those comes from the query of the target node\n                //                                    if (ignoreElsOnTheAxis[ i ] && me.index !== 0) continue\n                //                                    if (commonContainer.el == queryRes[ i ]) ignoreElsOnTheAxis[ i ] = true\n                //                                    if (!finder.contains(commonContainer.el, queryRes[ i ])) {\n                if (commonContainer.el == queryRes[i] || !finder.contains(commonContainer.el, queryRes[i])) {\n                  containsAll = false;\n                  break;\n                }\n              }\n\n              if (containsAll) {\n                lowestCommonContainer = commonContainer;\n              } else break;\n\n              commonContainer = commonContainer.downNode;\n            }\n\n            if (lowestCommonContainer) {\n              lowestCommonContainer.addAllEdgesTo(rootNode, segments, segmentsCombInfo);\n              rootNode = lowestCommonContainer;\n            }\n          }\n\n          rootNode = rootNode.downNode;\n        }\n      });\n      return !foundUniqueId; //            return updatedNodes\n    } // eof buildEdges3\n\n  } // eof methods\n\n});\n;\nClass('Ariadne.QueryFinder.Maze', {\n  does: [Siesta.Util.Role.CanGetType],\n  has: {\n    finder: {\n      required: true\n    },\n    nodes: Joose.I.Array,\n    segmentsIdGen: 1,\n    encounteredMandatoryId: false\n  },\n  methods: {\n    getRoot: function getRoot() {\n      return this.nodes[this.nodes.length - 1];\n    },\n    doQuery: function doQuery(query, rootNode) {\n      var queryCache = rootNode.queryCache; // TUNE\n      //            if (queryCache[ query ]) console.log(\"CACHE HIT!\")\n\n      if (queryCache[query]) return queryCache[query]; //            // TUNE\n      //            QUERYCOUNTER        = window.QUERYCOUNTER || 0\n      //            QUERYCOUNTER++\n      //            console.log(\"QUERY from:\", rootNode.index, \" query: \", query)\n\n      return queryCache[query] = this.finder.doQuery(query, rootNode.el);\n    },\n    buildVertices: function buildVertices(target, root) {\n      //            console.time('buildVertices')\n      var nodes = this.nodes = [];\n      var currentEl = target;\n      var prevNode;\n      var finder = this.finder;\n      var identifiers = finder.identifiers;\n      var directChildIdentifier = finder.directChildIdentifier;\n\n      while (currentEl) {\n        var node = new Ariadne.QueryFinder.Node({\n          finder: finder,\n          maze: this,\n          el: currentEl,\n          index: nodes.length\n        });\n\n        if (prevNode) {\n          prevNode.upNode = node;\n          node.downNode = prevNode;\n\n          if (directChildIdentifier) {\n            var segment = directChildIdentifier.identify(prevNode.el, root, this);\n\n            if (segment) {\n              segment = this.normalizeIdentifierResult(segment)[0];\n              var directChildUpEdge = new Ariadne.QueryFinder.Edge({\n                finder: finder,\n                maze: this,\n                isDirectChild: true,\n                fromNode: prevNode,\n                toNode: node\n              });\n              prevNode.directChildUpEdge = directChildUpEdge;\n              prevNode.adoptSegment(segment);\n              directChildUpEdge.consumeVariant([segment], finder.combineSegments([segment], true));\n            }\n          }\n        }\n\n        prevNode = node;\n        nodes.push(node); // exit a bit earlier for root node - segments won't be set for it\n\n        if (currentEl == root) break;\n        var segments = [];\n\n        for (var j = 0; j < identifiers.length; j++) {\n          var compSegments = identifiers[j].identify(currentEl, root, this);\n\n          if (compSegments) {\n            segments.push.apply(segments, this.normalizeIdentifierResult(compSegments));\n          }\n        }\n\n        node.setSegments(segments);\n        currentEl = finder.getParent(currentEl);\n      }\n\n      nodes[0].weightOptions = [{\n        weight: 0,\n        minFromEdgesById: {}\n      }];\n      nodes[0].weightOptionsByWeight[0] = nodes[0].weightOptions[0]; //            console.timeEnd('buildVertices')\n    },\n    normalizeIdentifierResult: function normalizeIdentifierResult(segments) {\n      var me = this;\n      if (this.typeOf(segments) != 'Array') segments = [segments];\n      return segments.map(function (segment) {\n        if (me.typeOf(segment) == 'String') return {\n          query: segment,\n          weight: 1000\n        };else {\n          if (!segment.hasOwnProperty('weight')) segment.weight = 1000;\n          return segment;\n        }\n      });\n    },\n    computePath: function computePath(prevUpdatedNodes) {\n      var nodes = this.nodes;\n      var root = this.getRoot();\n      var iteration = 0;\n\n      if (!prevUpdatedNodes) {\n        prevUpdatedNodes = {};\n        prevUpdatedNodes[nodes[0].id] = nodes[0];\n      }\n\n      do {\n        iteration++;\n        var updatedNodes = {};\n        var somethingUpdated = false;\n\n        for (var id in prevUpdatedNodes) {\n          var fromNode = prevUpdatedNodes[id];\n          if (fromNode.weightOptions.length === 0) continue;\n\n          for (var toIndex in fromNode.edgesToByIndex) {\n            var edge = fromNode.edgesToByIndex[toIndex];\n            var toNode = edge.toNode;\n\n            if (edge.relax()) {\n              updatedNodes[toNode.id] = toNode;\n              somethingUpdated = true;\n            }\n          }\n\n          var directChildUpEdge = fromNode.directChildUpEdge;\n\n          if (directChildUpEdge && directChildUpEdge.relax()) {\n            var toNode = directChildUpEdge.toNode;\n            updatedNodes[toNode.id] = toNode;\n            somethingUpdated = true;\n          }\n        }\n\n        prevUpdatedNodes = updatedNodes;\n      } while (somethingUpdated && iteration < nodes.length);\n    },\n    buildEdges: function buildEdges() {\n      //            console.time('buildEdges')\n      var recognizers = this.finder.recognizers;\n\n      for (var j = 0; j < recognizers.length; j++) {\n        recognizers[j].recognize(this);\n      }\n\n      var nodes = this.nodes;\n\n      for (var i = 0; i < nodes.length - 1; i++) {\n        // early exit, as soon as we found identifying edge\n        // by definition, we aren't interested in edges above it\n        if (nodes[i].buildEdges3(1) === false) break;\n        nodes[i].buildEdges3(2);\n        nodes[i].buildEdges3(3);\n      } //            console.timeEnd('buildEdges')\n\n    },\n    expandSimplePaths: function expandSimplePaths(paths) {\n      var nodes = this.nodes;\n      var pathsHashes = {};\n      var pathVariants = [];\n\n      for (var i = 0; i < paths.length; i++) {\n        var path = paths[i].split('_');\n        var variants = [];\n        var prevIndex;\n\n        for (var j = path.length - 1; j > 1; j--) {\n          var isDirectChildEdge = path[j][0] == '+';\n          var onlyWithOwnIndex = j < path.length - 1 && path[j + 1][0] == '+';\n          var fromNode = nodes[Number(path[j])];\n          var edge = isDirectChildEdge ? fromNode.directChildUpEdge : fromNode.edgesToByIndex[Number(path[j - 1])];\n          variants = fromNode.extendPathVariants(variants, edge.segmentVariants, onlyWithOwnIndex ? fromNode.index : null);\n        }\n\n        for (var k = 0; k < variants.length; k++) {\n          var pathVariant = variants[k];\n\n          if (!pathsHashes[pathVariant.hash]) {\n            pathVariants.push(pathVariant);\n            pathsHashes[pathVariant.hash] = true;\n          }\n        }\n      }\n\n      pathVariants.sort(function (a, b) {\n        return a.weight - b.weight;\n      });\n      return pathVariants;\n    },\n    findAllPaths: function findAllPaths(options) {\n      //            console.time('computePath')\n      this.computePath(); //            console.timeEnd('computePath')\n\n      var me = this;\n      var root = this.getRoot(); //            console.time('collectAllPaths')\n\n      var simplePathsCollection = root.collectFullSimplePathCollection(); //            console.timeEnd('collectAllPaths')\n      //            console.log(\"Simple paths: \", simplePathsCollection)\n\n      for (var i = 0; i < simplePathsCollection.length; i++) {\n        var simplePaths = simplePathsCollection[i].simplePaths;\n        var queryInfos = this.verifySimplePathGroup(simplePaths, options);\n\n        if (queryInfos.length) {\n          if (options && options.detailed) {\n            return queryInfos;\n          } else return queryInfos.map(function (queryInfo) {\n            return queryInfo.query;\n          });\n        }\n      }\n\n      return [];\n    },\n    verifySimplePathGroup: function verifySimplePathGroup(simplePaths, options) {\n      var root = this.getRoot();\n      var finder = this.finder; //            console.time('expandAllPaths')\n\n      var pathVariants = this.expandSimplePaths(simplePaths); //            console.timeEnd('expandAllPaths')\n      //            console.time('verifyAllPaths')\n\n      var queryInfos = [];\n      var targetEl = this.nodes[0].el;\n      var rootEl = root.el;\n\n      for (var i = 0; i < pathVariants.length; i++) {\n        var variant = pathVariants[i];\n        var segments = [];\n\n        for (var id in variant.segmentsById) {\n          segments.push(variant.segmentsById[id]);\n        } // query can potentially not be constructed because of clash between leading segments\n\n\n        var queryInfo = finder.combineSegments(segments);\n\n        if (queryInfo) {\n          if (finder.verifyQuery(queryInfo.query, targetEl, rootEl)) {\n            queryInfos.push(queryInfo);\n            if (options && options.singleOnly) return queryInfos;\n          } else {// console.log(\"WRONG QUERY: \" + queryInfo.query)\n          }\n        }\n      } //            console.timeEnd('verifyAllPaths')\n\n\n      return queryInfos;\n    },\n    // DEBUG METHOD\n    countEdges: function countEdges(log) {\n      var counter = 0;\n      this.nodes.forEach(function (node) {\n        for (var index in node.edgesToByIndex) {\n          var edge = node.edgesToByIndex[index];\n          counter += edge.segmentVariants.length;\n\n          if (log) {\n            edge.segmentVariants.forEach(function (variant) {\n              console.log(\"Edge from: \" + edge.fromNode.index + \"[\" + edge.fromNode.el.tagName + \"] to \" + edge.toNode.index + \"[\" + edge.toNode.el.tagName + \"] query: \" + edge.finder.combineSegments(variant.variant).query);\n            });\n          }\n        }\n      });\n      return counter;\n    }\n  }\n});\n;\nClass('Ariadne.QueryFinder', {\n  does: [Ariadne.QueryFinder.TreeWalker],\n  has: {\n    recognizers: Joose.I.Array,\n    identifiers: Joose.I.Array,\n    directChildIdentifier: null,\n    // `true` to always include an #id segment of the 1st parent node with #id in the query\n    // even if its not required\n    // idea is that since some parent has #id, element \"belongs\" to that parent, and the query\n    // will be more robust\n    // note, that id's of the following parents won't be included\n    enableMandatoryId: true\n  },\n  methods: {\n    initialize: function initialize() {\n      this.initRecognizers();\n      this.initIdentifiers();\n      this.recognizers.sort(function (r1, r2) {\n        return r2.priority - r1.priority;\n      });\n      this.identifiers.sort(function (r1, r2) {\n        return r2.priority - r1.priority;\n      });\n    },\n    addRecognizer: function addRecognizer(instance) {\n      this.recognizers.push(instance);\n      return instance;\n    },\n    addIdentifier: function addIdentifier(instance) {\n      this.identifiers.push(instance);\n      return instance;\n    },\n    initRecognizers: function initRecognizers() {},\n    initIdentifiers: function initIdentifiers() {},\n    findQuery: function findQuery(target, root) {\n      return this.findQueries(target, root, {\n        singleOnly: true\n      })[0];\n    },\n    findQueries: function findQueries(target, root, options) {\n      // TUNE\n      //            console.time('TOTAL')\n      if (!target) throw new Error(\"No target\");\n      if (!root) throw new Error(\"No root\");\n      if (target == root) throw new Error(\"Can't find query - target and root are the same\");\n      if (this.contains(target, root)) throw new Error(\"Can't find query - root is contained within target, need to swap the arguments?\");\n      var maze =\n      /*MAZE = */\n      new Ariadne.QueryFinder.Maze({\n        finder: this\n      });\n      maze.buildVertices(target, root);\n      maze.buildEdges();\n      var res = maze.findAllPaths(options); // TUNE\n      //            console.timeEnd('TOTAL')\n\n      return res;\n    },\n    forAllCombinations: function forAllCombinations(segments, func) {\n      var combinator = new Ariadne.QueryFinder.Combinator({\n        elements: segments\n      });\n      return combinator.forAllCombinations(func);\n    },\n    bisect: function bisect(leftIndex, rightIndex, func) {\n      while (leftIndex <= rightIndex) {\n        var middleIndex = Math.round((leftIndex + rightIndex) / 2);\n        var res = func(middleIndex);\n        if (res === false) return false;\n        if (leftIndex == rightIndex) return;\n        if (res == null) throw new Error(\"Unknown bisect direction\");\n        if (res < 0) rightIndex = middleIndex - 1;\n        if (res > 0) leftIndex = middleIndex + 1;\n      }\n    },\n    combineSegments: function combineSegments(segments, allowDanglingDirectChild) {\n      var queryComponents = [];\n      var totalWeight = 0;\n      var ids = [];\n      var processed = {};\n      var hasId = false;\n\n      for (var i = 0; i < segments.length; i++) {\n        var segment = segments[i];\n        var segmentId = segment.id;\n        if (processed[segmentId]) continue;\n        processed[segmentId] = true;\n        ids.push(segmentId);\n        var index = segment.index;\n        var queryComponent = queryComponents[index];\n\n        if (!queryComponent) {\n          queryComponent = queryComponents[index] = {\n            segments: [],\n            hasLeading: false,\n            child: false\n          };\n        }\n\n        totalWeight += segment.weight;\n        if (segment.leading) {\n          if (queryComponent.hasLeading) return null;else {\n            queryComponent.hasLeading = true;\n            queryComponent.segments.unshift(segment.query);\n          }\n        } else queryComponent.segments.push(segment.query);\n        if (segment.child) queryComponent.child = true;\n        if (segment.isId) hasId = true;\n      }\n\n      var query = '';\n\n      for (var i = queryComponents.length - 1; i >= 0; i--) {\n        var queryComponent = queryComponents[i];\n\n        if (queryComponent) {\n          if (!allowDanglingDirectChild && queryComponent.child && (i == queryComponents.length - 1 || !queryComponents[i + 1])) throw new Error(\"Invalid direct child component\");\n          var component = queryComponent.segments.join('');\n          if (!query) query = component;else query += (queryComponent.child ? ' > ' : ' ') + component;\n        }\n      }\n\n      ids.sort(function (a, b) {\n        return a - b;\n      });\n      return {\n        query: query,\n        weight: totalWeight,\n        hasId: hasId,\n        hash: ids.join('')\n      };\n    },\n    doQuery: function doQuery(query, root) {\n      throw new Error(\"Abstract method called: `doQuery`\");\n    },\n    verifyQuery: function verifyQuery(query, target, root) {\n      var queryRes = this.doQuery(query, root);\n      return queryRes.length == 1 && queryRes[0] == target;\n    }\n  }\n});\n;\n;\nRole('Ariadne.DomQueryFinder.Role.DomHelper', {\n  does: [Siesta.Util.Role.CanGetType],\n  methods: {\n    ignoreCssClass: function ignoreCssClass(cls, dom) {\n      return false;\n    },\n    getCssClasses: function getCssClasses(dom) {\n      // `className` will be a \"[object SVGAnimatedString]\" value for SVG elements\n      var classes = this.typeOf(dom.className) == 'String' ? dom.className.trim() : '';\n      var significantClasses = [];\n      var index = {};\n      classes = classes && classes.split(/\\s+/) || [];\n\n      for (var i = 0; i < classes.length; i++) {\n        var cssClass = classes[i];\n\n        if (!index[cssClass]) {\n          if (!this.ignoreCssClass(cssClass, dom)) significantClasses.push(cssClass);\n          index[cssClass] = true;\n        }\n      }\n\n      return significantClasses;\n    },\n    escapeDomSelector: function escapeDomSelector(selector, asId) {\n      if (asId) return Siesta.Sizzle.escape(selector);\n      return Siesta.Sizzle.escape(\"L\" + selector).substring(1).replace(/\\\\ /g, ' ');\n    },\n    unEscapeDomSelector: function unEscapeDomSelector(selector) {\n      return Siesta.Sizzle.unescape(selector);\n    }\n  }\n});\n;\nRole('Ariadne.DomQueryFinder.TreeWalker', {\n  methods: {\n    getParent: function getParent(el) {\n      return el.parentNode;\n    },\n    contains: function contains(parentEl, childEl) {\n      if (parentEl.contains) return parentEl.contains(childEl); // SVG elements in IE does not have \"contains\" method\n\n      if (parentEl.compareDocumentPosition) return parentEl === childEl || Boolean(parentEl.compareDocumentPosition(childEl) & 16);\n      throw new Error(\"Can't determine `contains` status\");\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.AttributeValue', {\n  isa: Ariadne.QueryFinder.Identifier,\n  does: Ariadne.DomQueryFinder.Role.DomHelper,\n  has: {\n    // an array of attribute names, which can be used for matching\n    attributes: function attributes() {\n      return ['name', 'title'];\n    }\n  },\n  methods: {\n    initialize: function initialize(cfg) {\n      this.attributes = this.mergeArrayAttributeFromClassHierarchy('attributes', cfg);\n    },\n    ignoreAttribute: function ignoreAttribute(target, attributeName) {\n      return false;\n    },\n    identify: function identify(target, root, maze) {\n      var attributes = this.attributes;\n      var segments = [];\n\n      for (var i = 0; i < attributes.length; i++) {\n        var attribute = attributes[i];\n        if (target.hasAttribute(attribute) && !this.ignoreAttribute(target, attribute)) segments.push(\"[\" + attribute + \"='\" + this.escapeDomSelector(target.getAttribute(attribute)) + \"']\");\n      }\n\n      return segments;\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.TagName', {\n  isa: Ariadne.QueryFinder.Identifier,\n  does: Ariadne.DomQueryFinder.Role.DomHelper,\n  methods: {\n    identify: function identify(target, root, maze) {\n      var doc = target.ownerDocument; // this is a special case when target is <body> or <html> itself\n\n      var isUnique = (!maze.nodes.length || target == maze.nodes[0].el) && (target == doc.body || target == doc.documentElement);\n      return {\n        query: this.escapeDomSelector(target.tagName.toLowerCase()),\n        leading: true,\n        weight: isUnique ? 900 : 1000\n      };\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.Contains', {\n  isa: Ariadne.QueryFinder.Identifier,\n  does: Ariadne.DomQueryFinder.Role.DomHelper,\n  has: {\n    maxCharsForContainsSelector: 30\n  },\n  methods: {\n    identify: function identify(target, root, maze) {\n      var attributes = this.attributes;\n      var segments = []; // SVG elements in IE does not have \".children\"\n\n      var children = target.children || target.childNodes;\n\n      if (children.length == 0 || children.length == 1 && !children[0].innerHTML) {\n        var text = target.textContent.trim();\n        if (text.length > 1) if (text.length <= this.maxCharsForContainsSelector) return {\n          query: ':textEquals(' + this.escapeDomSelector(text) + ')'\n        };else return {\n          query: ':contains(' + this.escapeDomSelector(text.substr(0, this.maxCharsForContainsSelector)) + ')'\n        };\n      }\n\n      return null;\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.CssClass', {\n  isa: Ariadne.QueryFinder.Identifier,\n  does: Ariadne.DomQueryFinder.Role.DomHelper,\n  has: {\n    // an array of strings, which will be join with \"|\" and converted to RegExp\n    // values from the class definition will be combined with the values provided to the instance\n    ignoreCssClasses: function ignoreCssClasses() {\n      return ['^null$', '^undefined$'];\n    },\n    ignoreCssClassesRegExp: null\n  },\n  methods: {\n    initialize: function initialize(cfg) {\n      var ignoreCssClasses = this.mergeArrayAttributeFromClassHierarchy('ignoreCssClasses', cfg);\n      this.ignoreCssClassesRegExp = ignoreCssClasses.length ? new RegExp(ignoreCssClasses.join('|')) : /\\0/;\n    },\n    identify: function identify(target, root, maze) {\n      var classes = this.processCssClasses(this.getCssClasses(target), target);\n      var segments = [];\n\n      for (var i = 0; i < classes.length; i++) {\n        // use object notation for segment, so subclasses can call SUPER and assign custom weights\n        segments.push({\n          query: '.' + this.escapeDomSelector(classes[i], true),\n          weight: this.getWeightForCssClass(classes[i], target)\n        });\n      }\n\n      return segments;\n    },\n    getWeightForCssClass: function getWeightForCssClass(cls, target) {\n      return 1000;\n    },\n    ignoreCssClass: function ignoreCssClass(cls, dom) {\n      return this.ignoreCssClassesRegExp.test(cls);\n    },\n    processCssClasses: function processCssClasses(classes, target) {\n      return classes;\n    }\n  } // eof methods\n\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.Id', {\n  isa: Ariadne.QueryFinder.Identifier,\n  does: Ariadne.DomQueryFinder.Role.DomHelper,\n  has: {\n    uniqueDomNodeProperty: null,\n    shouldIgnoreDomElementId: null\n  },\n  methods: {\n    identify: function identify(target, root, maze) {\n      var idProperty = this.uniqueDomNodeProperty || 'id';\n      var id = target.getAttribute(idProperty);\n      var shouldIgnoreDomElementId = this.shouldIgnoreDomElementId;\n\n      if (id && !this.ignoreDomId(id, target) && (!shouldIgnoreDomElementId || !shouldIgnoreDomElementId(id, target))) {\n        // the 1st encountered id will be assigned with weight -100000 in case of `enableMandatoryId`\n        // it should be guaranteed that this id will belong to lowest parent with id (currently this holds)\n        var weight = maze.encounteredMandatoryId || !this.finder.enableMandatoryId ? 1000 : -100000;\n        maze.encounteredMandatoryId = true;\n        var query = idProperty == 'id' ? '#' + this.escapeDomSelector(id, true) : \"[\" + idProperty + \"='\" + this.escapeDomSelector(id) + \"']\";\n        return {\n          query: query,\n          weight: weight,\n          isId: true\n        };\n      } else return null;\n    },\n    ignoreDomId: function ignoreDomId() {\n      return false;\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.NthOfType', {\n  isa: Ariadne.QueryFinder.Identifier,\n  methods: {\n    identify: function identify(target, root, maze) {\n      var parentElement = target.parentElement;\n      if (!parentElement) return null; // SVG elements in IE does not have \".children\"\n\n      var siblings = parentElement.children || parentElement.childNodes;\n      var counter = 0;\n      var tagName = target.tagName.toLowerCase();\n\n      for (var i = 0; i < siblings.length; i++) {\n        if (siblings[i].tagName.toLowerCase() == tagName) {\n          counter++;\n          if (siblings[i] == target) break;\n        }\n      }\n\n      return {\n        query: ':nth-of-type(' + counter + ')',\n        weight: 1e6\n      };\n    }\n  }\n});\n;\nClass('Ariadne.DomQueryFinder.Identifier.DirectChild', {\n  isa: Ariadne.DomQueryFinder.Identifier.NthOfType,\n  methods: {\n    identify: function identify(target, root, maze) {\n      if (!target.parentElement || target.parentElement == root) return null;\n      var segment = this.SUPERARG(arguments);\n      segment.query = target.tagName.toLowerCase() + segment.query;\n      segment.leading = true;\n      segment.child = true;\n      segment.weight *= 10;\n      return segment;\n    }\n  }\n});\n;\n/**\n\n\n*/\n\nClass('Ariadne.DomQueryFinder', {\n  isa: Ariadne.QueryFinder,\n  does: Ariadne.DomQueryFinder.TreeWalker,\n  has: {\n    uniqueDomNodeProperty: null,\n    shouldIgnoreDomElementId: null,\n    ignoreCssClasses: null\n  },\n  methods: {\n    initRecognizers: function initRecognizers() {},\n    initIdentifiers: function initIdentifiers() {\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Id({\n        uniqueDomNodeProperty: this.uniqueDomNodeProperty,\n        shouldIgnoreDomElementId: this.shouldIgnoreDomElementId,\n        finder: this,\n        priority: 10000\n      }));\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.CssClass({\n        ignoreCssClasses: this.ignoreCssClasses,\n        finder: this,\n        priority: 1000\n      }));\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Contains({\n        finder: this,\n        priority: 1000\n      }));\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.AttributeValue({\n        finder: this,\n        priority: 1000\n      }));\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.TagName({\n        finder: this,\n        priority: 100\n      }));\n      this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.NthOfType({\n        finder: this,\n        priority: 10\n      }));\n      this.directChildIdentifier = new Ariadne.DomQueryFinder.Identifier.DirectChild({\n        finder: this\n      });\n    },\n    doQuery: function doQuery(query, root) {\n      if (/:contains\\(/.test(query) || /:textEquals\\(/.test(query) || /:nth-of-type\\(\\d/.test(query)) return Siesta.Sizzle(query, root);else return (root || document).querySelectorAll(query);\n    },\n    findQueries: function findQueries(target, root, options) {\n      if (!target) throw new Error(\"No target\");\n      if (!root) root = target.ownerDocument;\n      return this.SUPER(target, root, options);\n    }\n  }\n});\n;\n;\n/**\n\n@class Siesta.Recorder.TargetExtractor\n\nThe type of target, possible options:\n\n- 'css'     css selector\n- 'xy'      XY coordinates\n\n*/\n\nClass('Siesta.Recorder.TargetExtractor', {\n  does: [Siesta.Util.Role.Dom, Siesta.Recorder.Role.CanSwallowException],\n  has: {\n    ariadneDomFinder: null,\n    shouldIgnoreDomElementId: null,\n    ignoreCssClasses: null,\n    uniqueDomNodeProperty: 'id',\n    // optional, used as a bubble target for `exception` event\n    recorder: null\n  },\n  methods: {\n    initialize: function initialize() {\n      this.ariadneDomFinder = new Ariadne.DomQueryFinder({\n        uniqueDomNodeProperty: this.uniqueDomNodeProperty,\n        shouldIgnoreDomElementId: this.shouldIgnoreDomElementId,\n        ignoreCssClasses: this.ignoreCssClasses\n      });\n      if (this.swallowExceptions) this.findDomQueryFor = this.safeBind(this.findDomQueryFor);\n    },\n    getBubbleTarget: function getBubbleTarget() {\n      return this.recorder;\n    },\n    findOffset: function findOffset(pageX, pageY, relativeTo) {\n      var offset = this.offset(relativeTo);\n      offset.left = offset.left;\n      offset.top = offset.top;\n      var relativeOffset = [pageX - offset.left, pageY - offset.top];\n      return relativeOffset;\n    },\n    findDomQueryFor: function findDomQueryFor(target, root) {\n      return this.ariadneDomFinder.findQuery(target, root);\n    },\n    getTargets: function getTargets(event, saveOffset, targetOverride, onlyXY) {\n      var result = [];\n      var cssQuery;\n      var target = targetOverride || event.target;\n      var hasCoordinates = event.x != null && event.y != null;\n      if (onlyXY && !hasCoordinates) return result;\n\n      if (!onlyXY && (target != target.ownerDocument.body || !hasCoordinates)) {\n        cssQuery = this.findDomQueryFor(target);\n\n        if (cssQuery) {\n          var data = {\n            type: 'css',\n            target: cssQuery\n          };\n\n          if (hasCoordinates && (saveOffset || !this.isElementReachableAtCenter(target, false))) {\n            data.offset = this.findOffset(event.x, event.y, target);\n          }\n\n          result.push(data);\n        }\n      }\n\n      hasCoordinates && result.push({\n        type: 'xy',\n        target: [event.x, event.y]\n      });\n      return result;\n    } //        something old, not used, and wrong (as Sizzle is not re-scope), remove after some time\n    //-        resolveTarget : function (target) {\n    //-            if (target.type == 'css') {\n    //-                return Siesta.Sizzle(target.target)[ 0 ]\n    //-            }\n    //-        },\n\n  }\n});\n;\nRole('Siesta.Recorder.Role.CanRecordMouseMove', {\n  does: [Siesta.Util.Role.CanCalculatePageScroll, Siesta.Recorder.Role.CanSwallowException],\n  has: {\n    recordMouseMove: true,\n    // used by RootCause, position in page coordinates\n    cursorPosition: Joose.I.Array,\n    // used by RootCause (probably not needed anymore)\n    lastMoveTimestamp: null,\n    // used by RootCause\n    lastMouseMoveEvent: null\n  },\n  override: {\n    initialize: function initialize() {\n      this.SUPERARG(arguments);\n      this.onBodyMouseMove = this.safeBind(this.onBodyMouseMove);\n      this.onBodyMouseOver = this.safeBind(this.onBodyMouseOver);\n      this.onBodyMouseOut = this.safeBind(this.onBodyMouseOut);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n      var body = doc.body;\n\n      if (this.recordMouseMove) {\n        // Need to also observe `mouseover` since it's fired before `mousemove` in case there is a crash\n        // in `mousemove` handler we need to know the exact cursor position\n        body.addEventListener('mouseover', this.onBodyMouseOver, true);\n        body.addEventListener('mouseout', this.onBodyMouseOut, true);\n        body.addEventListener('mousemove', this.onBodyMouseMove, true);\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n      var body = doc.body;\n\n      if (this.recordMouseMove) {\n        body.removeEventListener('mouseover', this.onBodyMouseOver, true);\n        body.removeEventListener('mouseout', this.onBodyMouseOut, true);\n        body.removeEventListener('mousemove', this.onBodyMouseMove, true);\n        this.lastMouseMoveEvent = null;\n      }\n    }\n  },\n  methods: {\n    saveMouseMoveData: function saveMouseMoveData(event) {\n      var me = this;\n      me.lastMoveTimestamp = new Date() - 0;\n      me.cursorPosition[0] = me.viewportXtoPageX(event.clientX, me.window);\n      me.cursorPosition[1] = me.viewportYtoPageY(event.clientY, me.window);\n      me.lastMouseMoveEvent = event;\n    },\n    onBodyMouseMove: function onBodyMouseMove(e) {\n      // Skip test playback events and mouse moves in frames\n      if (this.ignoreSynthetic && e.synthetic || e.target.ownerDocument !== this.window.document) return;\n      this.saveMouseMoveData(e);\n      this.processBodyMouseMove(e);\n    },\n    processBodyMouseMove: function processBodyMouseMove(e) {},\n    onBodyMouseOver: function onBodyMouseOver(e) {\n      // Skip test playback events and mouse moves in frames\n      if (this.ignoreSynthetic && e.synthetic || e.target.ownerDocument !== this.window.document) return;\n      this.saveMouseMoveData(e);\n      this.processBodyMouseOver(e);\n    },\n    processBodyMouseOver: function processBodyMouseOver(e) {},\n    onBodyMouseOut: function onBodyMouseOut(e) {\n      // Skip test playback events and mouse moves in frames\n      if (this.ignoreSynthetic && e.synthetic || e.target.ownerDocument !== this.window.document) return;\n      this.saveMouseMoveData(e);\n      this.processBodyMouseOut(e);\n    },\n    processBodyMouseOut: function processBodyMouseOut(e) {},\n    targetToPathPoint: function targetToPathPoint(target) {\n      var pathPoint = [target.getTargetAsQueryString()];\n      if (target.getTarget().offset) pathPoint.push.apply(pathPoint, target.getTarget().offset);\n      pathPoint.xy = target.getTargetByType('xy').target;\n      return pathPoint;\n    },\n    addPathPoint: function addPathPoint(pathPoints, newPathPoint) {\n      // early exit, in case new path point is query-based\n      if (newPathPoint.length === 3) {\n        pathPoints.push(newPathPoint);\n        return;\n      }\n\n      var lastPathPoint = pathPoints[pathPoints.length - 1]; // if new path point is a absolute point (which will be the case for the `useXY` arg\n      // of `addMoveCursorAction` enabled then covert it to relative\n\n      if (newPathPoint.length === 1 && this.typeOf(newPathPoint[0]) == 'Array') {\n        var relativePoint = [newPathPoint[0][0] - lastPathPoint.xy[0], newPathPoint[0][1] - lastPathPoint.xy[1]]; // do nothing\n\n        if (relativePoint[0] === 0 && relativePoint[1] === 0) return;\n        relativePoint.xy = newPathPoint[0];\n        pathPoints.push(relativePoint);\n      } else pathPoints.push(newPathPoint);\n    },\n    // this method merges several consequent calls to it to `moveCursorAlongPath` action\n    addMoveCursorAction: function addMoveCursorAction(event, targetOverride, useXY) {\n      if (!(event instanceof Siesta.Recorder.Event)) event = Siesta.Recorder.Event.fromDomEvent(event);\n      var lastAction = this.getLastAction();\n      var isMouseMove = lastAction && (lastAction.action === 'moveCursorTo' || lastAction.action === 'moveCursorAlongPath');\n\n      if (!lastAction || !isMouseMove || !this.recordMouseMovePath) {\n        // defensive coding because of unknown: `lastAction.target` is undefined exception\n        if (lastAction && lastAction.hasTarget() && lastAction.target) {\n          var xy = lastAction.target.getTargetByType('xy');\n\n          if (xy) {\n            xy = xy.target; // do nothing if we already have an action with the same target point\n            // this might happen during our own tests, where we use `drag` command, which\n            // issues \"mouseover\" for initial and last points\n\n            if (event.x == xy[0] && event.y == xy[1]) return;\n          }\n        }\n\n        var targetOptions = this.getPossibleTargets(event, true, targetOverride, useXY);\n\n        if (this.lastActionPosition.length === 0 || this.lastActionPosition[0] !== event.rawEvent.clientX || this.lastActionPosition[1] !== event.rawEvent.clientY) {\n          this.addAction({\n            action: 'moveCursorTo',\n            target: targetOptions,\n            sourceEvent: event,\n            options: event.options\n          });\n        }\n      } else {\n        var target = new Siesta.Recorder.Target({\n          targets: this.getPossibleTargets(event, true, targetOverride, useXY)\n        });\n\n        if (lastAction.action === 'moveCursorTo') {\n          lastAction.action = 'moveCursorAlongPath';\n          lastAction.value = [this.targetToPathPoint(lastAction.target)];\n          lastAction.target = null;\n        }\n\n        this.addPathPoint(lastAction.value, this.targetToPathPoint(target));\n        this.fireEvent('actionupdate', lastAction);\n      }\n    }\n  } // eof `override`\n\n});\n;\n/**\n@class Siesta.Recorder.Role.CanRecordMouseMoveOnIdle\n\nA mixin, providing the feature of recording the \"moveCursorTo\" action, when mouse is idle\nat some point for {@link #idleTimeout} time.\n\nThis feature can be enabled/disabled with the {@link recordMouseMoveOnIdle} config option.\n\n*/\n\nRole('Siesta.Recorder.Role.CanRecordMouseMoveOnIdle', {\n  has: {\n    /**\n     * @cfg {Boolean} idleTimeout The amount of time for mouse cursor to be idle, after which the\n     * `moveCursorTo` action will be recorded with the target of current cursor position.\n     */\n    idleTimeout: 3000,\n\n    /**\n     * @cfg {Boolean} recordMouseMoveOnIdle Set this option to `true` to enable recording of `moveCursorTo`\n     * action, when mouse is idle at some point for certain amount of time ({@link #idleTimeout}) \n     */\n    recordMouseMoveOnIdle: true,\n    idleMouseMoveThrottler: null\n  },\n  override: {\n    initialize: function initialize() {\n      if (this.recordMouseMoveOnIdle) this.recordMouseMove = true;\n      this.SUPERARG(arguments);\n\n      if (this.recordMouseMoveOnIdle) {\n        this.idleMouseMoveThrottler = new Siesta.Util.Throttler({\n          func: this.onBodyMouseMoveIdle,\n          scope: this,\n          buffer: this.idleTimeout\n        });\n        this.resetMouseMoveListener = this.resetMouseMoveListener.bind(this);\n      }\n    },\n    onDomEvent: function onDomEvent(e) {\n      this.SUPERARG(arguments); // this \"reset\" will ensure that \"onBodyMouseMove\" handler will be called after \"idleTimeout\"\n      // after any other dom event\n\n      this.resetMouseMoveListener();\n    },\n    clear: function clear() {\n      if (this.recordMouseMoveOnIdle) {\n        this.resetMouseMoveListener();\n      }\n\n      this.SUPERARG(arguments);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n      var body = doc.body;\n\n      if (this.recordMouseMoveOnIdle) {\n        body.addEventListener('mouseleave', this.resetMouseMoveListener);\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n      var body = doc.body;\n\n      if (this.recordMouseMoveOnIdle) {\n        body.removeEventListener('mouseleave', this.resetMouseMoveListener);\n        this.resetMouseMoveListener();\n      }\n    },\n    processBodyMouseMove: function processBodyMouseMove(e) {\n      this.SUPERARG(arguments);\n\n      if (this.recordMouseMoveOnIdle) {\n        this.idleMouseMoveThrottler.tick(e);\n      }\n    }\n  },\n  // eof `override`\n  methods: {\n    resetMouseMoveListener: function resetMouseMoveListener() {\n      this.idleMouseMoveThrottler && this.idleMouseMoveThrottler.cancel();\n    },\n    onBodyMouseMoveIdle: function onBodyMouseMoveIdle(e) {\n      this.addMoveCursorAction(e);\n    }\n  }\n});\n;\n/**\n@class Siesta.Recorder.Role.CanRecordPointOfInterest\n\nA mixin, providing the feature of recording the \"moveCursorTo\" event, when cursor is moved over certain\n\"point of interest\", which can be specified as an array of CSS selectors: {@link #moveCursorToSelectors}.\n\nThis feature ensures that cursor is following the same path, activating the same UI elements as during recording\nsession, like menu items, various hover elements etc.\n\n*/\n\nRole('Siesta.Recorder.Role.CanRecordPointOfInterest', {\n  does: Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,\n  has: {\n    /**\n     * @cfg {Array[String]} moveCursorToSelectors An array of strings with CSS selectors. If the mouse is\n     * moved upon a target, matching any of these selectors, a `moveCursorTo` will be recorded.\n     *\n     * Used with {@link #recordPointsOfInterest} option.\n     */\n    moveCursorToSelectors: Joose.I.Array,\n    pointOfInterestSelector: null,\n\n    /**\n     * @cfg {Boolean} recordPointsOfInterest Set this option to `true` to enable recording of \"points of interest\",\n     * specified with the {@link #moveCursorToSelectors} CSS selectors\n     *\n     * This is useful in lots of scenarios, for example when triggering a menu item to show. You cannot click the menu item right away,\n     * since it's hidden until you move the cursor over the top-level menu header.\n     *\n     * So if you will add the CSS selector for the top-level menu header in this config, recorder will insert `moveCursorTo` actions\n     * every time mouse hovers it. This makes recording complex scenarios more robust.\n     */\n    recordPointsOfInterest: true,\n    lastPointOfInterestEl: null\n  },\n  override: {\n    initialize: function initialize(cfg) {\n      // will be merged from all the base classes, and also prepended with the possible config value, passed by the user\n      this.moveCursorToSelectors = this.mergeArrayAttributeFromClassHierarchy('moveCursorToSelectors', cfg);\n      this.pointOfInterestSelector = this.recordPointsOfInterest ? this.moveCursorToSelectors.join(',') : null;\n      if (this.pointOfInterestSelector) this.recordMouseMove = true;\n      this.SUPERARG(arguments);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n\n      if (this.pointOfInterestSelector) {\n        this.lastPointOfInterestEl = null;\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n\n      if (this.pointOfInterestSelector) {\n        this.lastPointOfInterestEl = null;\n      }\n    },\n    processBodyMouseOver: function processBodyMouseOver(e) {\n      this.SUPERARG(arguments);\n      var pointOfInterestSelector = this.pointOfInterestSelector;\n      if (!pointOfInterestSelector) return;\n      var pointOfInterestEl = e.target;\n\n      if (this.matches(pointOfInterestEl, pointOfInterestSelector) || (pointOfInterestEl = this.closest(e.target, pointOfInterestSelector, 10))) {\n        if (pointOfInterestEl !== this.lastPointOfInterestEl) {\n          this.lastPointOfInterestEl = pointOfInterestEl; // note, that `moveCursorTo` action is still recorded with real target of the event,\n          // which may be different from the `pointOfInterestEl`\n\n          this.addMoveCursorAction(e);\n        }\n      }\n    },\n    processBodyMouseOut: function processBodyMouseOut(e) {\n      this.SUPERARG(arguments);\n      if (!this.pointOfInterestSelector || !this.lastPointOfInterestEl) return;\n\n      if (!this.contains(this.lastPointOfInterestEl, e.target)) {\n        this.lastPointOfInterestEl = null;\n      }\n    }\n  } // eof methods\n\n});\n;\n/**\n@class Siesta.Recorder.Role.CanRecordWindowResize\n\nA mixin with providing recording for window resize events.\n\n*/\n\nRole('Siesta.Recorder.Role.CanRecordWindowResize', {\n  requires: ['getWindowSize'],\n  does: [Siesta.Recorder.Role.CanSwallowException],\n  has: {\n    /**\n     * @cfg {Boolean} recordWindowResize Set this option to `true` to enable recording of window resize events\n     */\n    recordWindowResize: true,\n\n    /**\n     * @cfg {Boolean} recordInitialWindowSize Set this option to `true` to record the single `setWindowSize` action\n     * at first launch of the recorder.\n     */\n    recordInitialWindowSize: false\n  },\n  override: {\n    initialize: function initialize() {\n      this.SUPERARG(arguments);\n      this.onWindowResize = this.safeBind(this.onWindowResize);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      if (this.recordWindowResize) win.addEventListener('resize', this.onWindowResize);\n\n      if (this.recordInitialWindowSize) {\n        // don't record the size on following start/stop\n        this.recordInitialWindowSize = false;\n        var size = this.getWindowSize(this.window);\n        this.addAction({\n          action: 'setWindowSize',\n          value: [size.width, size.height]\n        });\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      if (this.recordWindowResize) win.removeEventListener('resize', this.onWindowResize);\n    }\n  },\n  methods: {\n    onWindowResize: function onWindowResize(nativeEvent) {\n      var size = this.getWindowSize(this.window);\n      var lastAction = this.getLastAction(); // note that \"target\" here is unchanged and can be a document\n\n      if (lastAction && lastAction.action == 'setWindowSize') {\n        lastAction.value = [size.width, size.height];\n        this.fireEvent('actionupdate', lastAction);\n      } else {\n        this.addAction({\n          action: 'setWindowSize',\n          value: [size.width, size.height],\n          sourceEvent: Siesta.Recorder.Event.fromDomEvent(nativeEvent)\n        });\n      }\n    }\n  } // eof methods\n\n});\n;\n/**\n@class Siesta.Recorder.Role.CanRecordMouseMovePath\n\nA mixin, providing the recording of mouse move path. This feature solves the problem of interacting\nwith various elements on the page, which appears only after the cursor hovers some other elements.\nTypical example is the resize handler. It normally appears only after the cursor goes over the\nborder element of some UI component. So, to target the resize handler element in some action, we need\nfirst to move cursor to the border element, otherwise resize handler remains invisible.\n\nThis recorder feature will make sure cursor goes through the same path as during user interaction,\ntriggering the same hover elements.\n\nMouse move path is collected in the form, recognized by the {@link Siesta.Test.Browser#moveCursorAlongPath} \nmethod and the `moveCursorAlongPath` action is created.\n\nThis feature can be enabled/disabled with the {@link #recordMouseMovePath} config option. It will disable\nthe {@link Siesta.Recorder.Recorder#recordPointsOfInterest recordPointsOfInterest} and \n{@link Siesta.Recorder.Recorder#recordMouseMoveOnIdle recordMouseMoveOnIdle} \noptions, as it solves the same problem in more general way.\n\n*/\n\nRole('Siesta.Recorder.Role.CanRecordMouseMovePath', {\n  has: {\n    /**\n     * @cfg {Boolean/String} recordMouseMovePath Set this option to `true` to enable recording of path, the user was \n     * moving the mouse. Be prepared, that this option will generate a lot of data in the playback script.\n     * \n     * This option can be a `Boolean` value or a `String`. A string can be one of `coordinate` or `query`.\n     * The `coordinate` will use page coordinates for mouse move path, the `query` - normal Siesta queries\n     * (composite, component and CSS) plus offset. The boolean value `true` corresponds to string `coordinate`.\n     * \n     * Enabling this option will disable the {@link Siesta.Recorder.Recorder#recordPointsOfInterest recordPointsOfInterest} \n     * and {@link Siesta.Recorder.Recorder#recordMouseMoveOnIdle recordMouseMoveOnIdle} options.\n     */\n    recordMouseMovePath: false,\n    lastMouseOutTarget: null\n  },\n  after: {\n    onStart: function onStart() {\n      this.lastMouseOutTarget = null;\n    },\n    onStop: function onStop() {\n      this.lastMouseOutTarget = null;\n    }\n  },\n  override: {\n    initialize: function initialize() {\n      if (this.recordMouseMovePath) {\n        this.recordPointsOfInterest = false;\n        this.recordMouseMoveOnIdle = false;\n      }\n\n      this.SUPERARG(arguments);\n      if (this.recordMouseMovePath === true) this.recordMouseMovePath = 'coordinate';\n    },\n    processBodyMouseOver: function processBodyMouseOver(e) {\n      this.SUPERARG(arguments); // both the `mouseout` and `mouseover` events are fired in pairs, for the same point on the screen\n      // but sometimes, only the `mouseover` can be fired (when mouse comes from the outside of the\n      // browser window)\n      // `mouseout` is fired first, so we don't need to record `mouseover` if we've already processed\n      // `mouseout`\n\n      if (this.recordMouseMovePath && e.target != this.lastMouseOutTarget) {\n        this.addMoveCursorAction(e, null, this.recordMouseMovePath == 'coordinate' || this.mouseState == 'down');\n      }\n\n      this.lastMouseOutTarget = null;\n    },\n    processBodyMouseOut: function processBodyMouseOut(e) {\n      this.SUPERARG(arguments);\n      this.lastMouseOutTarget = e.relatedTarget;\n      if (this.recordMouseMovePath) this.addMoveCursorAction(e, e.relatedTarget, this.recordMouseMovePath == 'coordinate' || this.mouseState == 'down');\n    }\n  } // eof `override`\n\n});\n;\nRole('Siesta.Recorder.Role.CanRecordMouseDownUp', {\n  has: {\n    mouseState: 'up',\n    eventNameMap: {\n      lazy: 'this.buildEventNameMap'\n    },\n    needToCaptureInitialMouseState: true\n  },\n  override: {\n    initialize: function initialize() {\n      this.SUPERARG(arguments);\n      this.onDocMouseDown = this.safeBind(this.onDocMouseDown);\n      this.onDocMouseUp = this.safeBind(this.onDocMouseUp);\n      this.onInitialMouseMove = this.safeBind(this.onInitialMouseMove);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var eventNameMap = this.getEventNameMap();\n      var win = this.window;\n      var doc = win.document;\n      doc.addEventListener(eventNameMap.mousedown, this.onDocMouseDown, true);\n      doc.addEventListener(eventNameMap.mouseup, this.onDocMouseUp, true);\n      doc.body.addEventListener('mousemove', this.onInitialMouseMove, true);\n      this.needToCaptureInitialMouseState = true;\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var eventNameMap = this.getEventNameMap();\n      var win = this.window;\n      var doc = win.document;\n      doc.removeEventListener(eventNameMap.mousedown, this.onDocMouseDown, true);\n      doc.removeEventListener(eventNameMap.mouseup, this.onDocMouseUp, true);\n      if (this.needToCaptureInitialMouseState) this.onInitialStateCaptured();\n    }\n  },\n  methods: {\n    onInitialMouseMove: function onInitialMouseMove(e) {\n      if (e.buttons != null && e.buttons & 1) this.mouseState = 'down';\n      this.onInitialStateCaptured();\n    },\n    onInitialStateCaptured: function onInitialStateCaptured() {\n      this.window.document.body.removeEventListener('mousemove', this.onInitialMouseMove, true);\n      this.needToCaptureInitialMouseState = false;\n    },\n    onDocMouseDown: function onDocMouseDown(e) {\n      // Skip test playback events and mouse moves in frames\n      if (this.ignoreSynthetic && e.synthetic || e.target.ownerDocument !== this.window.document) return;\n      if (this.needToCaptureInitialMouseState) this.onInitialStateCaptured();\n      this.processDocMouseDown(e);\n    },\n    processDocMouseDown: function processDocMouseDown(e) {\n      this.mouseState = 'down';\n    },\n    onDocMouseUp: function onDocMouseUp(e) {\n      // Skip test playback events and mouse moves in frames\n      if (this.ignoreSynthetic && e.synthetic || e.target.ownerDocument !== this.window.document) return;\n      if (this.needToCaptureInitialMouseState) this.onInitialStateCaptured();\n      this.processDocMouseUp(e);\n    },\n    processDocMouseUp: function processDocMouseUp(e) {\n      this.mouseState = 'up';\n    },\n    isPointerDownEvent: function isPointerDownEvent(event) {\n      return /(ms)?(pointer|mouse)down/i.test(event.type);\n    },\n    isPointerUpEvent: function isPointerUpEvent(event) {\n      return /(ms)?(pointer|mouse)up/i.test(event.type);\n    },\n    buildEventNameMap: function buildEventNameMap() {\n      var events = {};\n\n      if (window.PointerEvent) {\n        events.mousedown = 'pointerdown';\n        events.mouseup = 'pointerup';\n      } else if (window.MSPointerEvent) {\n        events.mousedown = 'MSPointerDown';\n        events.mouseup = 'MSPointerUp';\n      } else {\n        events.mousedown = 'mousedown';\n        events.mouseup = 'mouseup';\n      }\n\n      return events;\n    }\n  } // eof `override`\n\n});\n;\n/**\n @class Siesta.Recorder.Role.CanRecordScroll\n\n A mixin, providing the feature of recording the \"scroll\" event.\n\n */\n\nRole('Siesta.Recorder.Role.CanRecordScroll', {\n  has: {\n    /**\n     * @cfg {Boolean} recordScroll Set this option to `true` to enable recording of `scroll` events.\n     * This even occurs, when some element on the page, or the page itself, is scrolled by user.\n     * Several consequent `scroll` events on the same element will be merged into one `scrollTo` action.\n     *\n     * Note, that when replaying scripts, recorded with this option enabled, you might want to disable\n     * the {@link Siesta.Project.Browser#autoScrollElementsIntoView autoScrollElementsIntoView} option,\n     * as it will be interfering with the recorded actions.\n     */\n    recordScroll: false\n  },\n  override: {\n    initialize: function initialize() {\n      var me = this;\n      me.SUPERARG(arguments);\n      me.onScrollEvent = me.onScrollEvent.bind(me);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document; // Observe scroll events\n\n      if (this.recordScroll) {\n        doc.addEventListener('scroll', this.onScrollEvent, true);\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n\n      if (this.recordScroll) {\n        doc.removeEventListener('scroll', this.onScrollEvent, true);\n      }\n    },\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n    sign: Math.sign || function (x) {\n      // If x is NaN, the result is NaN.\n      // If x is -0, the result is -0.\n      // If x is +0, the result is +0.\n      // If x is negative and not -0, the result is -1.\n      // If x is positive and not +0, the result is +1.\n      return (x > 0) - (x < 0) || +x;\n    },\n    isSameScrollDirection: function isSameScrollDirection(scrollEvent) {\n      var me = this;\n      var lastAction = this.getLastAction();\n      var win = me.window;\n      var doc = win.document;\n      var target = scrollEvent.target;\n      if (target === doc) target = this.getElForPageScroll(win);\n      var xSign = this.sign(target.scrollLeft - lastAction.value[0]);\n      var ySign = this.sign(target.scrollTop - lastAction.value[1]);\n      return lastAction.xSign === this.sign(target.scrollLeft - lastAction.value[0]) && lastAction.ySign === this.sign(target.scrollTop - lastAction.value[1]);\n    },\n    onScrollEvent: function onScrollEvent(scrollEvent) {\n      var me = this;\n      var target = scrollEvent.target;\n      var win = me.window;\n      var doc = win.document;\n      var lastAction = this.getLastAction(); // note that \"target\" here is unchanged and can be a document\n\n      if (lastAction && lastAction.action === 'scrollTo' && target === lastAction.sourceEvent.target && (typeof lastAction.xSign !== 'number' || this.isSameScrollDirection(scrollEvent))) {\n        // repeated scroll on the same target\n        if (target === doc) target = this.getElForPageScroll(win);\n        lastAction.xSign = this.sign(target.scrollLeft - lastAction.value[0]);\n        lastAction.ySign = this.sign(target.scrollTop - lastAction.value[1]);\n        lastAction.value[0] = target.scrollLeft;\n        lastAction.value[1] = target.scrollTop;\n        this.fireEvent('actionupdate', lastAction);\n      } else {\n        var isPageScroll; // scroll on the new target\n        // page scroll events are fired with document as target, switch it to use body element\n\n        if (target === doc) {\n          isPageScroll = true;\n          target = this.getElForPageScroll(win);\n        }\n\n        var cursorPosition = this.cursorPosition; // For page scroll we have no way of knowing if it was triggered by direct scrolling or side effect\n        // So always record it\n\n        if (cursorPosition.length === 2 && !isPageScroll) {\n          var viewportX = this.pageXtoViewportX(cursorPosition[0], win);\n          var viewportY = this.pageYtoViewportY(cursorPosition[1], win); // Ignore scroll if cursor is outside of scroll target\n          // we consider such scrolls as happened because of side-effect of some other user action\n\n          if (!this.isPointWithinElement(viewportX, viewportY, target)) return;\n        }\n\n        this.addAction({\n          action: 'scrollTo',\n          target: this.getPossibleTargets(scrollEvent, false, target),\n          value: [target.scrollLeft, target.scrollTop],\n          sourceEvent: Siesta.Recorder.Event.fromDomEvent(scrollEvent)\n        });\n      }\n    }\n  }\n});\n;\n/**\n @class Siesta.Recorder.Role.CanRecordWheel\n\n A mixin, providing the feature of recording the \"wheel\" event.\n\n */\n\nRole('Siesta.Recorder.Role.CanRecordWheel', {\n  has: {\n    /**\n     * @cfg {Boolean} recordWheel Set this option to `true` to enable recording of `wheel` events.\n     * Several consequent `wheel` events on the same element will be merged into one `wheel` action.\n     */\n    recordWheel: true,\n\n    /**\n     * @cfg {Number} wheelEventBuffer If similar wheel events are fired on same target during this time (ms),\n     * (and in same direction / axis) merge the events\n     */\n    wheelEventBuffer: 200,\n    skipIfNoModifierKeysPressed: false\n  },\n  override: {\n    initialize: function initialize() {\n      var me = this;\n      me.SUPERARG(arguments);\n      me.onWheelEvent = me.onWheelEvent.bind(me);\n    },\n    onStart: function onStart() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document; // Observe wheel events\n\n      if (this.recordWheel) {\n        doc.addEventListener('wheel', this.onWheelEvent, true);\n      }\n    },\n    onStop: function onStop() {\n      this.SUPERARG(arguments);\n      var win = this.window;\n      var doc = win.document;\n\n      if (this.recordWheel) {\n        doc.removeEventListener('wheel', this.onWheelEvent, true);\n      }\n    },\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n    sign: Math.sign || function (x) {\n      // If x is NaN, the result is NaN.\n      // If x is -0, the result is -0.\n      // If x is +0, the result is +0.\n      // If x is negative and not -0, the result is -1.\n      // If x is positive and not +0, the result is +1.\n      return (x > 0) - (x < 0) || +x;\n    },\n    isSameWheelAxisAndDirection: function isSameWheelAxisAndDirection(event1, event2) {\n      return this.sign(event1.deltaX) === this.sign(event2.deltaX) && this.sign(event1.deltaY) === this.sign(event2.deltaY) && this.sign(event1.deltaZ) === this.sign(event2.deltaZ);\n    },\n    onWheelEvent: function onWheelEvent(wheelEvent) {\n      var me = this;\n      var lastAction = this.getLastAction();\n\n      if (me.skipIfNoModifierKeysPressed && !wheelEvent.ctrlKey && !wheelEvent.altKey && !wheelEvent.metaKey && !wheelEvent.shiftKey) {\n        return;\n      } // Merge subsequent wheel events (they occur at very high rates on a touch pad) which go in the same axis/direction\n\n\n      if (lastAction && lastAction.action === 'wheel' && wheelEvent.target === lastAction.sourceEvent.target) {\n        var lastEvent = lastAction.sourceEvent;\n\n        if (me.isSameWheelAxisAndDirection(wheelEvent, lastEvent.rawEvent) && Date.now() - lastAction.timestamp < me.wheelEventBuffer) {\n          lastAction.options.deltaX += wheelEvent.deltaX;\n          lastAction.options.deltaY += wheelEvent.deltaY;\n          lastAction.options.deltaZ += wheelEvent.deltaZ;\n          lastAction.timestamp = Date.now();\n          this.fireEvent('actionupdate', lastAction);\n          return;\n        }\n      }\n\n      me.onDomEvent(wheelEvent);\n    }\n  }\n});\n;\n/**\n@class Siesta.Recorder.Recorder\n@mixin Siesta.Recorder.Role.CanRecordScroll\n@mixin Siesta.Recorder.Role.CanRecordWindowResize\n@mixin Siesta.Recorder.Role.CanRecordPointOfInterest\n@mixin Siesta.Recorder.Role.CanRecordMouseMovePath\n@mixin Siesta.Recorder.Role.CanRecordMouseMoveOnIdle\n\nThis class implements a recorder for user actions. It records the events of the window it's attached to.\nIt has a number of options, defining what should be recorder. Since it's JS based, we cannot record\nnative dialog interactions, such as alert, print or confirm etc.\n\n*/\n\nClass('Siesta.Recorder.Recorder', {\n  does: [// \"utility\" roles\n  JooseX.Observable, Siesta.Util.Role.Dom, Siesta.Util.Role.CanParseOs, Siesta.Util.Role.CanGetType, Siesta.Recorder.Role.CanSwallowException, // \"feature\" roles\n  Siesta.Recorder.Role.CanRecordMouseDownUp, Siesta.Recorder.Role.CanRecordMouseMove, Siesta.Recorder.Role.CanRecordMouseMoveOnIdle, Siesta.Recorder.Role.CanRecordPointOfInterest, Siesta.Recorder.Role.CanRecordWindowResize, Siesta.Recorder.Role.CanRecordScroll, Siesta.Recorder.Role.CanRecordWheel, // this has to go last (override will be executed first),\n  // to be able to disable the previous roles\n  Siesta.Recorder.Role.CanRecordMouseMovePath],\n  has: {\n    active: null,\n    extractor: null,\n    extractorClass: Siesta.Recorder.TargetExtractor,\n    extractorConfig: null,\n\n    /**\n     * @cfg {Array[String]/String} uniqueComponentProperty A string or an array of strings, containing attribute names\n     * that the Recorder will use to identify Ext JS components.\n     */\n    uniqueComponentProperty: null,\n\n    /**\n     * @cfg {String} uniqueDomNodeProperty A property that will be used to uniquely identify DOM nodes. By default the `id`\n     * property is used.\n     */\n    uniqueDomNodeProperty: 'id',\n\n    /**\n     * @cfg {Function} shouldIgnoreDomElementId If provided, this function will be called to determine if DOM element's\n     * id can be used as part of the queries, created by recorder. Its quite common for various frameworks, to assign\n     * auto-generated ids to DOM elements. Such ids usually changes very often and should not be used in the queries.\n     *\n     * The function should return `true` if element's id should not be used and will be called with the following arguments:\n     *\n     * @cfg {String} shouldIgnoreDomElementId.id The id of the DOM element to check\n     * @cfg {HTMLElement} shouldIgnoreDomElementId.el The DOM element itself\n     */\n    shouldIgnoreDomElementId: null,\n\n    /**\n     * @cfg {Array} ignoreCssClasses An array of CSS class strings, which should be ignored by the recorder as it builds CSS selector locators. Use\n     * this to avoid certain CSS selectors which don't provide any useful distinction about a DOM node\n     */\n    ignoreCssClasses: Joose.I.Array,\n    // logic for offset:\n    // we always record it, except for the \"click\" where element has not changed during the click,\n    // and it was available at center point during \"mousedown\" - such clicks  are considered \"simple\" and don't require offset\n    // in the opposite, individually recorded \"mousedown\" or \"mouseup\" events are usually part of the drag operation\n    // and for \"drag\" we want to be precise\n\n    /**\n     * @cfg {Boolean} recordOffsets Set to `true` to record the offset to each targeted DOM element for recorded\n     * actions, to make sure the recorded action can be played back with exact precision.\n     * Normally Siesta removes the offset of some actions, if target element is reachable at the center point.\n     */\n    recordOffsets: false,\n    // ignore events generated by Siesta (bypass in normal use, but for testing recorder we need it)\n    ignoreSynthetic: true,\n    // The window this recorder is observing for events\n    window: null,\n    // merge `mousedown+mouseup+click` to just `click` only if timespan between `mousedown` and `mouseup`\n    // is less than this value (ms)\n    clickMergeThreshold: 200,\n    // console.logs all DOM events detected\n    debugMode: false,\n    eventsToRecord: {\n      lazy: 'this.buildEventsToRecord'\n    },\n    // \"raw\" log of all dom events\n    events: Joose.I.Array,\n    // Strictly for debugging purposes\n    processingEvent: null,\n    actions: Joose.I.Array,\n    actionsByEventId: Joose.I.Object,\n    dragPixelThreshold: 3,\n    // If mousedown/mouseup position differs by less, we consider it a click\n    actionClass: Siesta.Recorder.Action,\n    lastActionPosition: Joose.I.Array,\n    warnAboutIframeMissingId: true\n  },\n  methods: {\n    buildEventsToRecord: function buildEventsToRecord() {\n      var events = [\"keydown\", \"keypress\", \"keyup\", \"click\", \"dblclick\", \"contextmenu\"];\n      if (window.PointerEvent) events.push('pointerdown', 'pointerup');else if (window.MSPointerEvent) events.push('MSPointerDown', 'MSPointerUp');else events.push('mousedown', 'mouseup');\n      return events;\n    },\n    initialize: function initialize() {\n      this.onUnload = this.onUnload.bind(this);\n      this.onFrameLoad = this.onFrameLoad.bind(this);\n      this.onDomEvent = this.safeBind(this.onDomEvent);\n      var extractorConfig = this.extractorConfig || {}; // used as bubble target for `exception` event\n\n      extractorConfig.recorder = this;\n      extractorConfig.uniqueComponentProperty = extractorConfig.uniqueComponentProperty || this.uniqueComponentProperty;\n      extractorConfig.uniqueDomNodeProperty = extractorConfig.uniqueDomNodeProperty || this.uniqueDomNodeProperty;\n      extractorConfig.swallowExceptions = this.swallowExceptions;\n      extractorConfig.shouldIgnoreDomElementId = this.shouldIgnoreDomElementId;\n      extractorConfig.ignoreCssClasses = this.ignoreCssClasses;\n      this.extractor = new this.extractorClass(extractorConfig);\n    },\n    isSamePoint: function isSamePoint(event1, event2) {\n      return Math.abs(Math.round(event1.x) - Math.round(event2.x)) <= this.dragPixelThreshold && Math.abs(Math.round(event1.y) - Math.round(event2.y)) <= this.dragPixelThreshold;\n    },\n    isSameTarget: function isSameTarget(event1, event2) {\n      return event1.target == event2.target || this.contains(event1.target, event2.target) || this.contains(event2.target, event1.target);\n    },\n    clear: function clear() {\n      var me = this;\n      me.events = [];\n      me.actions = [];\n      me.actionsByEventId = {};\n      me.fireEvent('clear', me);\n    },\n    // We monitor page loads so the recorder can add a waitForPageLoad action\n    onUnload: function onUnload() {\n      var actions = this.actions,\n          last = actions.length && actions[actions.length - 1];\n\n      if (last && last.target) {\n        last.waitForPageLoad = true;\n      }\n\n      this.stop(true);\n    },\n    // After frame has loaded, stop listening to old window and restart on new frame window\n    onFrameLoad: function onFrameLoad(event) {\n      // Frame could be violating same-origin policy at this point\n      try {\n        var win = event.target.contentWindow; // will throw if different origin\n\n        var a = win.location.href;\n      } catch (e) {\n        win = null;\n      }\n\n      if (win) {\n        this.attach(win);\n        this.start();\n      }\n    },\n\n    /*\n     * Attaches the recorder to a Window object\n     * @param {Window} window The window to attach to.\n     **/\n    attach: function attach(window) {\n      if (this.window !== window) {\n        this.stop();\n      } // clear only events, keep the actions\n\n\n      this.events = [];\n      this.window = window;\n    },\n\n    /*\n     * Starts recording events of the current Window object\n     **/\n    start: function start() {\n      if (this.active) return;\n      if (!this.ignoreSynthetic && !this.hasOwnProperty('clickMergeThreshold')) this.clickMergeThreshold = Infinity;\n      this.stop();\n      this.active = Date.now();\n      this.onStart();\n      this.fireEvent('start', this);\n    },\n\n    /*\n     * Stops the recording of events\n     **/\n    stop: function stop(keepOnLoadListenerOnIframe) {\n      if (this.active) {\n        this.active = null;\n        this.onStop(keepOnLoadListenerOnIframe);\n        this.fireEvent('stop', this);\n      }\n    },\n    getRecordedEvents: function getRecordedEvents() {\n      return this.events;\n    },\n    getRecordedActions: function getRecordedActions() {\n      return this.actions;\n    },\n    getRecordedActionsAsSteps: function getRecordedActionsAsSteps() {\n      return Joose.A.map(this.actions, function (action) {\n        return action.asStep();\n      });\n    },\n    // main listener\n    onDomEvent: function onDomEvent(e) {\n      var target = e.target;\n      this.processingEvent = e;\n\n      if (this.debugMode && this.window.console && typeof this.window.console.log === 'function') {\n        console.log('[EVENT] : ', e.type, target, e.keyIdentifier || e.key);\n      } // Never trust IE - target may be absent\n      // Ignore events from played back test (if user plays test and records before it's stopped)\n\n\n      if (!target || this.ignoreSynthetic && (e.synthetic || !e.isTrusted)) return;\n      var event = Siesta.Recorder.Event.fromDomEvent(e);\n      this.convertToAction(event);\n      this.events.push(event); // do not store more than 10 events\n\n      if (this.events.length > 10) this.events.shift();\n      this.fireEvent('domevent', event);\n    },\n    eventToAction: function eventToAction(event, onlyXY) {\n      var type = event.type;\n      var options = event.options;\n      var actionName;\n\n      if (type === 'wheel') {\n        var rawEvent = event.rawEvent;\n        actionName = 'wheel';\n        options = Joose.O.extend({\n          deltaX: rawEvent.deltaX || 0,\n          deltaY: rawEvent.deltaY || 0,\n          deltaZ: rawEvent.deltaZ || 0,\n          deltaMode: rawEvent.deltaMode || 0\n        }, options);\n      } else if (type.match(/^key/)) // convert all key events to type for now\n        actionName = 'type';else if (this.isPointerDownEvent(event)) actionName = 'mousedown';else if (this.isPointerUpEvent(event)) actionName = 'mouseup';else actionName = type;\n\n      var config = {\n        action: actionName,\n        target: this.getPossibleTargets(event, type !== 'wheel', null, onlyXY),\n        options: options,\n        sourceEvent: event,\n        sourceEventTargetReachableAtCenter: this.isElementReachableAtCenter(event.target, false)\n      }; // `window` object to which the event target belongs\n\n      var win = event.target.ownerDocument.defaultView; // Case of nested iframe\n\n      if (win !== this.window && !onlyXY) {\n        if (!win.frameElement.id && this.warnAboutIframeMissingId) {\n          throw new Error('To record events in a nested iframe, please set an \"id\" property on your frames');\n        } // Prepend the frame id to each suggested target\n\n\n        config.target = config.target.filter(function (actionTarget) {\n          if (typeof actionTarget.target === 'string') {\n            actionTarget.target = '#' + win.frameElement.id + ' -> ' + actionTarget.target;\n            return true;\n          } // Skip array coordinates for nested iframes, make little sense\n\n\n          return false;\n        });\n      }\n\n      return new this.actionClass(config);\n    },\n    recordAsAction: function recordAsAction(event, omitTarget) {\n      var action = this.eventToAction(event, omitTarget);\n\n      if (action) {\n        this.addAction(action);\n        return action;\n      }\n    },\n    addAction: function addAction(action) {\n      if (!(action instanceof this.actionClass)) {\n        action = new this.actionClass(action);\n      }\n\n      this.beforeAddAction(action);\n      this.actions.push(action);\n\n      if (action.sourceEvent) {\n        this.actionsByEventId[action.sourceEvent.id] = action;\n\n        if (typeof action.sourceEvent.x === 'number') {\n          this.lastActionPosition[0] = action.sourceEvent.rawEvent.clientX;\n          this.lastActionPosition[1] = action.sourceEvent.rawEvent.clientY;\n        }\n      }\n\n      if (this.debugMode && this.window.console && typeof this.window.console.log === 'function') {\n        console.log('[ACTION] : ' + action.action, action.getTarget() && action.asStep().target || '', action);\n      }\n\n      this.fireEvent('actionadd', action);\n    },\n    removeAction: function removeAction(actionToRemove) {\n      var actions = this.actions;\n\n      for (var i = 0; i < actions.length; i++) {\n        var action = actions[i];\n\n        if (action == actionToRemove) {\n          actions.splice(i, 1);\n          if (action.sourceEvent) delete this.actionsByEventId[action.sourceEvent.id];\n          this.fireEvent('actionremove', actionToRemove);\n          break;\n        }\n      }\n    },\n    removeActionByEventId: function removeActionByEventId(eventId) {\n      this.removeAction(this.getActionByEventId(eventId));\n    },\n    removeActionByEvent: function removeActionByEvent(event) {\n      this.removeAction(this.getActionByEventId(event.id));\n    },\n    getActionByEvent: function getActionByEvent(event) {\n      return this.actionsByEventId[event.id];\n    },\n    getActionByEventId: function getActionByEventId(eventId) {\n      return this.actionsByEventId[eventId];\n    },\n    getLastAction: function getLastAction() {\n      return this.actions[this.actions.length - 1];\n    },\n    getLastEvent: function getLastEvent() {\n      return this.events[this.events.length - 1];\n    },\n    canCombineTypeActions: function canCombineTypeActions(prevOptions, curOptions) {\n      return prevOptions.ctrlKey == curOptions.ctrlKey && prevOptions.metaKey == curOptions.metaKey && prevOptions.shiftKey == curOptions.shiftKey && prevOptions.altKey == curOptions.altKey;\n    },\n    finalizeDragAction: function finalizeDragAction(mouseUpEvent, mouseDownEvent) {\n      // omit the target queries finding for `mouseup` event, since we'll add coordinate target\n      // manually anyway\n      var action = this.eventToAction(mouseUpEvent, true); // For drag drop operations, we use a simple coordinate for mouseup always\n\n      action.target = new Siesta.Recorder.Target({\n        targets: [{\n          target: [mouseUpEvent.x, mouseUpEvent.y],\n          type: 'xy'\n        }]\n      });\n      this.addAction(action);\n    },\n    // Method which tries to identify \"composite\" DOM interactions such as 'click/contextmenu' (3 events), double click\n    // but also complex scenarios such as 'drag'\n    convertToAction: function convertToAction(event) {\n      var type = event.type;\n      var events = this.getRecordedEvents(),\n          length = events.length,\n          tail = this.getLastEvent();\n      var tailPrev = length >= 2 ? events[length - 2] : null;\n\n      if (this.shouldIgnoreEvent(event, tail, tailPrev)) {\n        return;\n      }\n\n      if (type === 'wheel') {\n        this.recordAsAction(event);\n        return;\n      }\n\n      if (type === 'keypress' || type === 'keyup' || type === 'keydown') {\n        this.convertKeyEventToAction(event);\n        return;\n      } // if there's no already recorded events - there's nothing to coalesce\n\n\n      if (!length) {\n        this.recordAsAction(event);\n        return;\n      }\n\n      if (type === 'dblclick') {\n        // On Android Mobile Safari it seems 'dblclick' can be fired without 2 preceding clicks somehow\n        if (this.getRecordedActions().length > 1) {\n          // removing the last `click` action - one click event will still remain\n          this.removeAction(this.getLastAction());\n        }\n\n        this.getLastAction().action = 'dblclick';\n        this.fireEvent('actionupdate', this.getLastAction());\n        return;\n      } // // if mousedown/up happened in a row in different points - this is considered to be a drag operation\n\n\n      if (this.isPointerDownEvent(tail) && this.isPointerUpEvent(event) && event.button === tail.button && !this.isSamePoint(event, tail)) {\n        this.finalizeDragAction(event, tail);\n        return;\n      }\n\n      if (tail && this.isPointerUpEvent(event) && this.isPointerDownEvent(tail) && event.button === tail.button && this.isSamePoint(event, tail) // FF57 does not fire `click` when target changes in mousedown, so we need the `mouseup` target and can not\n      // optimize\n      // possibly will be fixed in later FF releases since it contradicts what Chrome does\n      && !bowser.gecko) {\n        // record `mouseup` which happened in the same point as `mousedown`\n        // w/o target - since it will be removed by the \"click\" processing anyway\n        // this is to save some CPU cycles (which can be up to ~200-300ms in heavy DOM)\n        this.recordAsAction(event, true);\n        return;\n      }\n\n      var isFF57BrokenOnWindows = bowser.gecko && bowser.windows; // Merge events to click action\n\n      if (tailPrev && type === 'click') {\n        if ( // Verify tail\n        this.isPointerUpEvent(tail) && event.button === tail.button && event.button === tailPrev.button && this.isSamePoint(event, tail) && // Verify previous tail\n        this.isPointerDownEvent(tailPrev) && this.isSameTarget(event, tail) && this.isSameTarget(event, tailPrev) && this.isSamePoint(event, tailPrev)) {\n          // Convert mousedown action to a click action, and use all context recorded at mousedown since DOM may have changed\n          // at the time 'click' was observed\n          var mouseDownAction = this.getActionByEvent(tailPrev); // Don't merge to 'click' if there is a noticable delay between mousedown/mouseup timestamp\n          // Application could have logic implemented for longpress etc\n\n          if (Date.now() - mouseDownAction.getTimestamp() > this.clickMergeThreshold) {} else {\n            this.removeActionByEvent(tail);\n\n            if (event.target == tail.target && tail.target == tailPrev.target && !this.recordOffsets && mouseDownAction.sourceEventTargetReachableAtCenter) {\n              // do not completely remove the offset for FF57 on Windows but save it,\n              // since it may be needed for \"contextmenu\" action, see below\n              mouseDownAction.clearTargetOffset(isFF57BrokenOnWindows);\n            }\n\n            mouseDownAction.action = 'click';\n            this.fireEvent('actionupdate', mouseDownAction);\n          }\n\n          return;\n        } else {\n          // click event is fired after a drag, which should not be recorded as a separate click\n          return;\n        }\n      } else if (type === 'contextmenu') {\n        var lastAction = this.getLastAction(); // FF 57 on Windows fires mousedown/up/click/contextmenu for right click (crazy)\n\n        if (isFF57BrokenOnWindows && tail.type === 'click' && lastAction.action === 'click') {\n          lastAction.action = 'contextmenu';\n          lastAction.restoreTargetOffset();\n          this.fireEvent('actionupdate', lastAction);\n          return;\n        } // Verify tail (Mac OSX doesn't fire mouse up)\n\n\n        if ((this.isPointerUpEvent(tail) || this.isPointerDownEvent(tail)) && event.button === tail.button && this.isSamePoint(event, tail)) {\n          // If on windows, first get rid of pointerup action\n          if (this.isPointerUpEvent(tail)) {\n            this.removeActionByEvent(tail);\n          } // Convert last pointerdown action to contextmenu to maintain original target\n\n\n          var lastAction = this.getLastAction();\n          lastAction.action = 'contextmenu';\n          this.fireEvent('actionupdate', lastAction);\n          return;\n        } // Verify previous tail\n\n\n        if (this.isPointerUpEvent(tail) && this.isPointerDownEvent(tailPrev) && this.isSameTarget(event, tail) && this.isSameTarget(event, tailPrev) && this.isSamePoint(event, tailPrev)) {\n          this.removeActionByEvent(tailPrev);\n        }\n      }\n\n      this.recordAsAction(event);\n    },\n    shouldIgnoreEvent: function shouldIgnoreEvent(event, tail, tailPrev) {\n      // In some situations the mouseup event may remove/overwrite the current element and no click will be triggered\n      // so we need to catch drag operation on mouseup (see above) and ignore following \"click\" event\n      // TODO NEEDED?\n      // if (event.type === 'click' && this.getLastAction() && this.getLastAction().action === 'drag') {\n      //     return true\n      // }\n      var eventType = event.type;\n      var isKeyEvent = eventType.match(/^key/);\n      var keyCode = event.keyCode;\n      var keys = Siesta.Test.UserAgent.KeyCodes().keys; // Ignore modifier keys which are used only in combination with other keys\n\n      if (isKeyEvent && (keyCode === keys.SHIFT || keyCode === keys.CTRL || keyCode === keys.ALT || keyCode === keys.CMD)) return true; // On Mac ignore mouseup happening after contextmenu\n\n      if (this.isPointerUpEvent(event) && tail && tail.type === 'contextmenu') {\n        return true;\n      } // ignore keypress for CTRL+KEY\n\n\n      if (event.type == 'keypress' && tail && tail.type == 'keydown' && tailPrev && tailPrev.type == 'keydown' && event.rawEvent.key == tail.rawEvent.key && tailPrev.rawEvent.key == 'Control' && event.rawEvent.timeStamp - tail.rawEvent.timeStamp < 3) {\n        return true;\n      } // Clicks on a <label> with produces 2 \"click\" events, just ignore the 2nd event and do not record it as an action\n      // in FF, the 2nd \"click\" will have 0, 0 coordinates, so we have to disable `isSamePoint` extra sanity check\n\n\n      if (event.type == 'click' && tail && tail.type == 'click' && tail.target.nodeName.toLowerCase() === 'label') {\n        return true;\n      }\n    },\n    convertKeyEventToAction: function convertKeyEventToAction(event) {\n      var type = event.type;\n      var tail = this.getLastEvent();\n      var KC = Siesta.Test.UserAgent.KeyCodes();\n      var isSpecial = type == 'keydown' && (KC.isSpecial(event.keyCode) || KC.isNav(event.keyCode));\n      var isModifier = KC.isModifier(event.keyCode);\n      var options = event.options;\n      var prevType = tail && tail.type;\n      var prevSpecial = type == 'keypress' && prevType == 'keydown' && (KC.isSpecial(tail.keyCode) || KC.isNav(tail.keyCode));\n      var isWindows = this.parseOS(navigator.platform) === 'Windows';\n      var isMac = this.parseOS(navigator.platform) === 'MacOS'; // On Windows and Linux, no keypress is triggered if CTRL key is pressed along with a regular char (e.g Ctrl-C).\n      // On Mac, no keypress is triggered if CMD key is pressed along with a regular char (e.g Cmd-C).\n\n      if (type === 'keypress' && !isSpecial && !prevSpecial || type === 'keydown' && (isSpecial || isModifier || !isMac && options.ctrlKey || isMac && options.metaKey)) {\n        var lastAction = this.getLastAction();\n        var text = event.rawEvent.key ? event.rawEvent.key : isSpecial ? KC.fromCharCode(event.charCode, true) : String.fromCharCode(event.charCode);\n        text = isSpecial ? '[' + text.toUpperCase() + ']' : text; // Crude check to make sure we don't merge a CTRL-C with the next \"normal\" keystroke\n\n        if (lastAction && lastAction.action === 'type' && this.canCombineTypeActions(lastAction.options, event.options)) {\n          if (!KC.isModifier(event.keyCode)) {\n            lastAction.value += text;\n            this.fireEvent('actionupdate', lastAction);\n          }\n        } else {\n          this.addAction({\n            action: 'type',\n            target: this.getPossibleTargets(event),\n            value: text,\n            sourceEvent: event,\n            options: event.options\n          });\n        }\n\n        return;\n      } // ignore 'keydown' events\n\n    },\n    onStart: function onStart() {\n      var me = this,\n          window = me.window,\n          doc = window.document,\n          body = doc.body,\n          resizeTimeout = null,\n          frameWindows = this.getNestedFrames().map(function (frame) {\n        return frame.contentWindow;\n      }); // Listen to test window and any frames nested in it\n\n      [window].concat(frameWindows).forEach(function (win) {\n        me.registerWindowListeners(win);\n      });\n      window.frameElement && window.frameElement.addEventListener('load', this.onFrameLoad);\n      window.addEventListener('unload', this.onUnload); // To make sure we can record key events immediately\n\n      window.focus();\n    },\n    onStop: function onStop(keepOnLoadListenerOnIframe) {\n      var me = this,\n          window = me.window,\n          doc = window.document,\n          body = doc.body,\n          frameWindows = this.getNestedFrames().map(function (frame) {\n        return frame.contentWindow;\n      }); // Unlisten to test window and any frames nested in it\n\n      [window].concat(frameWindows).forEach(function (win) {\n        me.deregisterWindowListeners(win);\n      }); // if recorder is attached to a iframed window, in the \"unload\" event, we want to cleanup the listeners\n      // but keep the 'load' listener for the <iframe> element itself, to re-attach recorder to newly loaded page\n\n      if (!keepOnLoadListenerOnIframe) {\n        window.frameElement && window.frameElement.removeEventListener('load', me.onFrameLoad);\n      }\n\n      window.removeEventListener('unload', this.onUnload);\n    },\n    registerWindowListeners: function registerWindowListeners(win) {\n      if (this.isCrossOriginWindow(win)) return;\n      var me = this;\n      me.getEventsToRecord().forEach(function (name) {\n        win.document.addEventListener(name, me.onDomEvent, true);\n      });\n    },\n    deregisterWindowListeners: function deregisterWindowListeners(win) {\n      if (this.isCrossOriginWindow(win)) return;\n      var me = this;\n      me.getEventsToRecord().forEach(function (name) {\n        win.document.removeEventListener(name, me.onDomEvent, true);\n      });\n    },\n    // Returns only frames on the same domain\n    getNestedFrames: function getNestedFrames() {\n      var me = this;\n      return Array.prototype.slice.apply(this.window.document.getElementsByTagName('iframe')).filter(function (frame) {\n        return !me.isCrossOriginWindow(frame.contentWindow);\n      });\n    },\n    // Hook called before adding actions to inject 'helping' actions\n    beforeAddAction: function beforeAddAction(action) {},\n    getPossibleTargets: function getPossibleTargets(event, recordOffsets, targetOverride, onlyXY) {\n      if (this.typeOf(event.target) == 'HTMLDocument') event.target = event.target.body;\n      return this.extractor.getTargets(event, recordOffsets, targetOverride, onlyXY);\n    }\n  } // eof methods\n\n});\n;\n;"},function(e,n){Class("RC.recorder.DomRecorder",{isa:Siesta.Recorder.Recorder,has:{},does:[RC.recorder.BaseRecorderRole]})},function(e,n,t){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var t=i.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(0!==t)throw new Error(l[t]);if(n.header&&i.deflateSetHeader(this.strm,n.header),n.dictionary){var o;if(o="string"==typeof n.dictionary?a.string2buf(n.dictionary):"[object ArrayBuffer]"===u.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,0!==(t=i.deflateSetDictionary(this.strm,o)))throw new Error(l[t]);this._dict_set=!0}}function o(e,n){var t=new r(n);if(t.push(e,!0),t.err)throw t.msg||l[t.err];return t.result}var i=t(102),s=t(15),a=t(87),l=t(51),c=t(88),u=Object.prototype.toString;r.prototype.push=function(e,n){var t,r,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;r=n===~~n?n:!0===n?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(l),o.next_out=0,o.avail_out=l),1!==(t=i.deflate(o,r))&&0!==t)return this.onEnd(t),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(a.buf2binstring(s.shrinkBuf(o.output,o.next_out))):this.onData(s.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==t);return 4===r?(t=i.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,0===t):2!==r||(this.onEnd(0),o.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=o,n.deflateRaw=function(e,n){return(n=n||{}).raw=!0,o(e,n)},n.gzip=function(e,n){return(n=n||{}).gzip=!0,o(e,n)}},function(e,n,t){"use strict";function r(e,n){return e.msg=S[n],n}function o(e){return(e<<1)-(e>4?9:0)}function i(e){for(var n=e.length;--n>=0;)e[n]=0}function s(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(w.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function a(e,n){x._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,s(e.strm)}function l(e,n){e.pending_buf[e.pending++]=n}function c(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function u(e,n){var t,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,p=c[i+s-1],f=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(t=n)+s]===f&&c[t+s-1]===p&&c[t]===c[i]&&c[++t]===c[i+1]){i+=2,t++;do{}while(c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&i<h);if(r=258-(h-i),i=h-258,r>s){if(e.match_start=n,s=r,r>=a)break;p=c[i+s-1],f=c[i+s]}}}while((n=d[n&u])>l&&0!=--o);return s<=e.lookahead?s:e.lookahead}function d(e){var n,t,r,o,i,s,a,l,c,u,d=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-262)){w.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,n=t=e.hash_size;do{r=e.head[--n],e.head[n]=r>=d?r-d:0}while(--t);n=t=d;do{r=e.prev[--n],e.prev[n]=r>=d?r-d:0}while(--t);o+=d}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,l=e.strstart+e.lookahead,c=o,u=void 0,(u=s.avail_in)>c&&(u=c),t=0===u?0:(s.avail_in-=u,w.arraySet(a,s.input,s.next_in,u,l),1===s.state.wrap?s.adler=E(s.adler,a,u,l):2===s.state.wrap&&(s.adler=C(s.adler,a,u,l)),s.next_in+=u,s.total_in+=u,u),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+3-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function h(e,n){for(var t,r;;){if(e.lookahead<262){if(d(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-262&&(e.match_length=u(e,t)),e.match_length>=3)if(r=x._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===n?(a(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?1:2}function p(e,n){for(var t,r,o;;){if(e.lookahead<262){if(d(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-262&&(e.match_length=u(e,t),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=x._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=x._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=x._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===n?(a(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?1:2}function f(e,n,t,r,o){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=o}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(1146),this.dyn_dtree=new w.Buf16(122),this.bl_tree=new w.Buf16(78),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(16),this.heap=new w.Buf16(573),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(573),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function g(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:113,e.adler=2===n.wrap?0:1,n.last_flush=0,x._tr_init(n),0):r(e,-2)}function v(e){var n,t=g(e);return 0===t&&((n=e.state).window_size=2*n.w_size,i(n.head),n.max_lazy_match=b[n.level].max_lazy,n.good_match=b[n.level].good_length,n.nice_match=b[n.level].nice_length,n.max_chain_length=b[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t}function y(e,n,t,o,i,s){if(!e)return-2;var a=1;if(-1===n&&(n=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),i<1||i>9||8!==t||o<8||o>15||n<0||n>9||s<0||s>4)return r(e,-2);8===o&&(o=9);var l=new m;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new w.Buf8(2*l.w_size),l.head=new w.Buf16(l.hash_size),l.prev=new w.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new w.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=s,l.method=t,v(e)}var b,w=t(15),x=t(103),E=t(85),C=t(86),S=t(51);b=[new f(0,0,0,0,function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&0===n)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(a(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(a(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),1)}),new f(4,4,8,4,h),new f(4,5,16,8,h),new f(4,6,32,32,h),new f(4,4,16,16,p),new f(8,16,32,32,p),new f(8,16,128,128,p),new f(8,32,128,256,p),new f(32,128,258,1024,p),new f(32,258,258,4096,p)],n.deflateInit=function(e,n){return y(e,n,8,15,8,0)},n.deflateInit2=y,n.deflateReset=v,n.deflateResetKeep=g,n.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=n,0):-2},n.deflate=function(e,n){var t,u,h,p;if(!e||!e.state||n>5||n<0)return e?r(e,-2):-2;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||666===u.status&&4!==n)return r(e,0===e.avail_out?-5:-2);if(u.strm=e,t=u.last_flush,u.last_flush=n,42===u.status)if(2===u.wrap)e.adler=0,l(u,31),l(u,139),l(u,8),u.gzhead?(l(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),l(u,255&u.gzhead.time),l(u,u.gzhead.time>>8&255),l(u,u.gzhead.time>>16&255),l(u,u.gzhead.time>>24&255),l(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),l(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(l(u,255&u.gzhead.extra.length),l(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=C(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(l(u,0),l(u,0),l(u,0),l(u,0),l(u,0),l(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),l(u,3),u.status=113);else{var f=8+(u.w_bits-8<<4)<<8;f|=(u.strategy>=2||u.level<2?0:u.level<6?1:6===u.level?2:3)<<6,0!==u.strstart&&(f|=32),f+=31-f%31,u.status=113,c(u,f),0!==u.strstart&&(c(u,e.adler>>>16),c(u,65535&e.adler)),e.adler=1}if(69===u.status)if(u.gzhead.extra){for(h=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),s(e),h=u.pending,u.pending!==u.pending_buf_size));)l(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(73===u.status)if(u.gzhead.name){h=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),s(e),h=u.pending,u.pending===u.pending_buf_size)){p=1;break}p=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,l(u,p)}while(0!==p);u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),0===p&&(u.gzindex=0,u.status=91)}else u.status=91;if(91===u.status)if(u.gzhead.comment){h=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),s(e),h=u.pending,u.pending===u.pending_buf_size)){p=1;break}p=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,l(u,p)}while(0!==p);u.gzhead.hcrc&&u.pending>h&&(e.adler=C(e.adler,u.pending_buf,u.pending-h,h)),0===p&&(u.status=103)}else u.status=103;if(103===u.status&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&s(e),u.pending+2<=u.pending_buf_size&&(l(u,255&e.adler),l(u,e.adler>>8&255),e.adler=0,u.status=113)):u.status=113),0!==u.pending){if(s(e),0===e.avail_out)return u.last_flush=-1,0}else if(0===e.avail_in&&o(n)<=o(t)&&4!==n)return r(e,-5);if(666===u.status&&0!==e.avail_in)return r(e,-5);if(0!==e.avail_in||0!==u.lookahead||0!==n&&666!==u.status){var m=2===u.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(0===n)return 1;break}if(e.match_length=0,t=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(a(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(a(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?1:2}(u,n):3===u.strategy?function(e,n){for(var t,r,o,i,s=e.window;;){if(e.lookahead<=258){if(d(e),e.lookahead<=258&&0===n)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){i=e.strstart+258;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i);e.match_length=258-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(t=x._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=x._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(a(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(a(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?1:2}(u,n):b[u.level].func(u,n);if(3!==m&&4!==m||(u.status=666),1===m||3===m)return 0===e.avail_out&&(u.last_flush=-1),0;if(2===m&&(1===n?x._tr_align(u):5!==n&&(x._tr_stored_block(u,0,0,!1),3===n&&(i(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),s(e),0===e.avail_out))return u.last_flush=-1,0}return 4!==n?0:u.wrap<=0?1:(2===u.wrap?(l(u,255&e.adler),l(u,e.adler>>8&255),l(u,e.adler>>16&255),l(u,e.adler>>24&255),l(u,255&e.total_in),l(u,e.total_in>>8&255),l(u,e.total_in>>16&255),l(u,e.total_in>>24&255)):(c(u,e.adler>>>16),c(u,65535&e.adler)),s(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?0:1)},n.deflateEnd=function(e){var n;return e&&e.state?42!==(n=e.state.status)&&69!==n&&73!==n&&91!==n&&103!==n&&113!==n&&666!==n?r(e,-2):(e.state=null,113===n?r(e,-3):0):-2},n.deflateSetDictionary=function(e,n){var t,r,o,s,a,l,c,u,h=n.length;if(!e||!e.state)return-2;if(2===(s=(t=e.state).wrap)||1===s&&42!==t.status||t.lookahead)return-2;for(1===s&&(e.adler=E(e.adler,n,h,0)),t.wrap=0,h>=t.w_size&&(0===s&&(i(t.head),t.strstart=0,t.block_start=0,t.insert=0),u=new w.Buf8(t.w_size),w.arraySet(u,n,h-t.w_size,t.w_size,0),n=u,h=t.w_size),a=e.avail_in,l=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=n,d(t);t.lookahead>=3;){r=t.strstart,o=t.lookahead-2;do{t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+3-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++}while(--o);t.strstart=r,t.lookahead=2,d(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=2,t.match_available=0,e.next_in=l,e.input=c,e.avail_in=a,t.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},function(e,n,t){"use strict";function r(e){for(var n=e.length;--n>=0;)e[n]=0}function o(e,n,t,r,o){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function i(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function s(e){return e<256?P[e]:P[256+(e>>>7)]}function a(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function l(e,n,t){e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function c(e,n,t){l(e,t[2*n],t[2*n+1])}function u(e,n){var t=0;do{t|=1&e,e>>>=1,t<<=1}while(--n>0);return t>>>1}function d(e,n,t){var r,o,i=new Array(16),s=0;for(r=1;r<=15;r++)i[r]=s=s+t[r-1]<<1;for(o=0;o<=n;o++){var a=e[2*o+1];0!==a&&(e[2*o]=u(i[a]++,a))}}function h(e){var n;for(n=0;n<286;n++)e.dyn_ltree[2*n]=0;for(n=0;n<30;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,n,t,r){var o=2*n,i=2*t;return e[o]<e[i]||e[o]===e[i]&&r[n]<=r[t]}function m(e,n,t){for(var r=e.heap[t],o=t<<1;o<=e.heap_len&&(o<e.heap_len&&f(n,e.heap[o+1],e.heap[o],e.depth)&&o++,!f(n,r,e.heap[o],e.depth));)e.heap[t]=e.heap[o],t=o,o<<=1;e.heap[t]=r}function g(e,n,t){var r,o,i,a,u=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],o=e.pending_buf[e.l_buf+u],u++,0===r?c(e,o,n):(c(e,(i=A[o])+256+1,n),0!==(a=E[i])&&l(e,o-=O[i],a),c(e,i=s(--r),t),0!==(a=C[i])&&l(e,r-=I[i],a))}while(u<e.last_lit);c(e,256,n)}function v(e,n){var t,r,o,i=n.dyn_tree,s=n.stat_desc.static_tree,a=n.stat_desc.has_stree,l=n.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,t=0;t<l;t++)0!==i[2*t]?(e.heap[++e.heap_len]=c=t,e.depth[t]=0):i[2*t+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(n.max_code=c,t=e.heap_len>>1;t>=1;t--)m(e,i,t);o=l;do{t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,i[2*o]=i[2*t]+i[2*r],e.depth[o]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,i[2*t+1]=i[2*r+1]=o,e.heap[1]=o++,m(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,o,i,s,a,l=n.dyn_tree,c=n.max_code,u=n.stat_desc.static_tree,d=n.stat_desc.has_stree,h=n.stat_desc.extra_bits,p=n.stat_desc.extra_base,f=n.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<573;t++)(i=l[2*l[2*(r=e.heap[t])+1]+1]+1)>f&&(i=f,m++),l[2*r+1]=i,r>c||(e.bl_count[i]++,s=0,r>=p&&(s=h[r-p]),a=l[2*r],e.opt_len+=a*(i+s),d&&(e.static_len+=a*(u[2*r+1]+s)));if(0!==m){do{for(i=f-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(i=f;0!==i;i--)for(r=e.bl_count[i];0!==r;)(o=e.heap[--t])>c||(l[2*o+1]!==i&&(e.opt_len+=(i-l[2*o+1])*l[2*o],l[2*o+1]=i),r--)}}(e,n),d(i,c,e.bl_count)}function y(e,n,t){var r,o,i=-1,s=n[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)o=s,s=n[2*(r+1)+1],++a<l&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function b(e,n,t){var r,o,i=-1,s=n[1],a=0,u=7,d=4;for(0===s&&(u=138,d=3),r=0;r<=t;r++)if(o=s,s=n[2*(r+1)+1],!(++a<u&&o===s)){if(a<d)do{c(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(c(e,o,e.bl_tree),a--),c(e,16,e.bl_tree),l(e,a-3,2)):a<=10?(c(e,17,e.bl_tree),l(e,a-3,3)):(c(e,18,e.bl_tree),l(e,a-11,7));a=0,i=o,0===s?(u=138,d=3):o===s?(u=6,d=3):(u=7,d=4)}}function w(e,n,t,r){l(e,0+(r?1:0),3),function(e,n,t,r){p(e),a(e,t),a(e,~t),x.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}(e,n,t)}var x=t(15),E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(576);r(M);var T=new Array(60);r(T);var P=new Array(512);r(P);var A=new Array(256);r(A);var O=new Array(29);r(O);var R,_,N,I=new Array(30);r(I);var D=!1;n._tr_init=function(e){D||(function(){var e,n,t,r,i,s=new Array(16);for(t=0,r=0;r<28;r++)for(O[r]=t,e=0;e<1<<E[r];e++)A[t++]=r;for(A[t-1]=r,i=0,r=0;r<16;r++)for(I[r]=i,e=0;e<1<<C[r];e++)P[i++]=r;for(i>>=7;r<30;r++)for(I[r]=i<<7,e=0;e<1<<C[r]-7;e++)P[256+i++]=r;for(n=0;n<=15;n++)s[n]=0;for(e=0;e<=143;)M[2*e+1]=8,e++,s[8]++;for(;e<=255;)M[2*e+1]=9,e++,s[9]++;for(;e<=279;)M[2*e+1]=7,e++,s[7]++;for(;e<=287;)M[2*e+1]=8,e++,s[8]++;for(d(M,287,s),e=0;e<30;e++)T[2*e+1]=5,T[2*e]=u(e,5);R=new o(M,E,257,286,15),_=new o(T,C,0,30,15),N=new o(new Array(0),S,0,19,7)}(),D=!0),e.l_desc=new i(e.dyn_ltree,R),e.d_desc=new i(e.dyn_dtree,_),e.bl_desc=new i(e.bl_tree,N),e.bi_buf=0,e.bi_valid=0,h(e)},n._tr_stored_block=w,n._tr_flush_block=function(e,n,t,r){var o,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),v(e,e.l_desc),v(e,e.d_desc),s=function(e){var n;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),v(e,e.bl_desc),n=18;n>=3&&0===e.bl_tree[2*k[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=t+5,t+4<=o&&-1!==n?w(e,n,t,r):4===e.strategy||i===o?(l(e,2+(r?1:0),3),g(e,M,T)):(l(e,4+(r?1:0),3),function(e,n,t,r){var o;for(l(e,n-257,5),l(e,t-1,5),l(e,r-4,4),o=0;o<r;o++)l(e,e.bl_tree[2*k[o]+1],3);b(e,e.dyn_ltree,n-1),b(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),g(e,e.dyn_ltree,e.dyn_dtree)),h(e),r&&p(e)},n._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(A[t]+256+1)]++,e.dyn_dtree[2*s(n)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){l(e,2,3),c(e,256,M),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,n,t){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var t=i.inflateInit2(this.strm,n.windowBits);if(t!==l.Z_OK)throw new Error(c[t]);if(this.header=new d,i.inflateGetHeader(this.strm,this.header),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=a.string2buf(n.dictionary):"[object ArrayBuffer]"===h.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=i.inflateSetDictionary(this.strm,n.dictionary))!==l.Z_OK))throw new Error(c[t])}function o(e,n){var t=new r(n);if(t.push(e,!0),t.err)throw t.msg||c[t.err];return t.result}var i=t(105),s=t(15),a=t(87),l=t(89),c=t(51),u=t(88),d=t(108),h=Object.prototype.toString;r.prototype.push=function(e,n){var t,r,o,c,u,d=this.strm,p=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;r=n===~~n?n:!0===n?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),(t=i.inflate(d,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&f&&(t=i.inflateSetDictionary(this.strm,f)),t===l.Z_BUF_ERROR&&!0===m&&(t=l.Z_OK,m=!1),t!==l.Z_STREAM_END&&t!==l.Z_OK)return this.onEnd(t),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&t!==l.Z_STREAM_END&&(0!==d.avail_in||r!==l.Z_FINISH&&r!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(o=a.utf8border(d.output,d.next_out),c=d.next_out-o,u=a.buf2string(d.output,o),d.next_out=c,d.avail_out=p-c,c&&s.arraySet(d.output,d.output,o,c,0),this.onData(u)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&t!==l.Z_STREAM_END);return t===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(t=i.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===l.Z_OK):r!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=r,n.inflate=o,n.inflateRaw=function(e,n){return(n=n||{}).raw=!0,o(e,n)},n.ungzip=o},function(e,n,t){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=1,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new p.Buf32(852),n.distcode=n.distdyn=new p.Buf32(592),n.sane=1,n.back=-1,0):-2}function s(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,i(e)):-2}function a(e,n){var t,r;return e&&e.state?(r=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?-2:(null!==r.window&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,s(e))):-2}function l(e,n){var t,r;return e?(r=new o,e.state=r,r.window=null,0!==(t=a(e,n))&&(e.state=null),t):-2}function c(e){if(y){var n;for(d=new p.Buf32(512),h=new p.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(v(1,e.lens,0,288,d,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;v(2,e.lens,0,32,h,0,e.work,{bits:5}),y=!1}e.lencode=d,e.lenbits=9,e.distcode=h,e.distbits=5}function u(e,n,t,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new p.Buf8(i.wsize)),r>=i.wsize?(p.arraySet(i.window,n,t-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>r&&(o=r),p.arraySet(i.window,n,t-r,o,i.wnext),(r-=o)?(p.arraySet(i.window,n,t-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}var d,h,p=t(15),f=t(85),m=t(86),g=t(106),v=t(107),y=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=i,n.inflateInit=function(e){return l(e,15)},n.inflateInit2=l,n.inflate=function(e,n){var t,o,i,s,a,l,d,h,y,b,w,x,E,C,S,k,M,T,P,A,O,R,_,N,I=0,D=new p.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(t=e.state).mode&&(t.mode=13),a=e.next_out,i=e.output,d=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,h=t.hold,y=t.bits,b=l,w=d,R=0;e:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;y<16;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(2&t.wrap&&35615===h){t.check=0,D[0]=255&h,D[1]=h>>>8&255,t.check=m(t.check,D,2,0),h=0,y=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",t.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",t.mode=30;break}if(y-=4,O=8+(15&(h>>>=4)),0===t.wbits)t.wbits=O;else if(O>t.wbits){e.msg="invalid window size",t.mode=30;break}t.dmax=1<<O,e.adler=t.check=1,t.mode=512&h?10:12,h=0,y=0;break;case 2:for(;y<16;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(t.flags=h,8!=(255&t.flags)){e.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=h>>8&1),512&t.flags&&(D[0]=255&h,D[1]=h>>>8&255,t.check=m(t.check,D,2,0)),h=0,y=0,t.mode=3;case 3:for(;y<32;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.head&&(t.head.time=h),512&t.flags&&(D[0]=255&h,D[1]=h>>>8&255,D[2]=h>>>16&255,D[3]=h>>>24&255,t.check=m(t.check,D,4,0)),h=0,y=0,t.mode=4;case 4:for(;y<16;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.head&&(t.head.xflags=255&h,t.head.os=h>>8),512&t.flags&&(D[0]=255&h,D[1]=h>>>8&255,t.check=m(t.check,D,2,0)),h=0,y=0,t.mode=5;case 5:if(1024&t.flags){for(;y<16;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.length=h,t.head&&(t.head.extra_len=h),512&t.flags&&(D[0]=255&h,D[1]=h>>>8&255,t.check=m(t.check,D,2,0)),h=0,y=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((x=t.length)>l&&(x=l),x&&(t.head&&(O=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),p.arraySet(t.head.extra,o,s,x,O)),512&t.flags&&(t.check=m(t.check,o,x,s)),l-=x,s+=x,t.length-=x),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===l)break e;x=0;do{O=o[s+x++],t.head&&O&&t.length<65536&&(t.head.name+=String.fromCharCode(O))}while(O&&x<l);if(512&t.flags&&(t.check=m(t.check,o,x,s)),l-=x,s+=x,O)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===l)break e;x=0;do{O=o[s+x++],t.head&&O&&t.length<65536&&(t.head.comment+=String.fromCharCode(O))}while(O&&x<l);if(512&t.flags&&(t.check=m(t.check,o,x,s)),l-=x,s+=x,O)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;y<16;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(h!==(65535&t.check)){e.msg="header crc mismatch",t.mode=30;break}h=0,y=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=12;break;case 10:for(;y<32;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}e.adler=t.check=r(h),h=0,y=0,t.mode=11;case 11:if(0===t.havedict)return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=h,t.bits=y,2;e.adler=t.check=1,t.mode=12;case 12:if(5===n||6===n)break e;case 13:if(t.last){h>>>=7&y,y-=7&y,t.mode=27;break}for(;y<3;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}switch(t.last=1&h,y-=1,3&(h>>>=1)){case 0:t.mode=14;break;case 1:if(c(t),t.mode=20,6===n){h>>>=2,y-=2;break e}break;case 2:t.mode=17;break;case 3:e.msg="invalid block type",t.mode=30}h>>>=2,y-=2;break;case 14:for(h>>>=7&y,y-=7&y;y<32;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&h,h=0,y=0,t.mode=15,6===n)break e;case 15:t.mode=16;case 16:if(x=t.length){if(x>l&&(x=l),x>d&&(x=d),0===x)break e;p.arraySet(i,o,s,x,a),l-=x,s+=x,d-=x,a+=x,t.length-=x;break}t.mode=12;break;case 17:for(;y<14;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(t.nlen=257+(31&h),h>>>=5,y-=5,t.ndist=1+(31&h),h>>>=5,y-=5,t.ncode=4+(15&h),h>>>=4,y-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;y<3;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.lens[F[t.have++]]=7&h,h>>>=3,y-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,_={bits:t.lenbits},R=v(0,t.lens,0,19,t.lencode,0,t.work,_),t.lenbits=_.bits,R){e.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;k=(I=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,M=65535&I,!((S=I>>>24)<=y);){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(M<16)h>>>=S,y-=S,t.lens[t.have++]=M;else{if(16===M){for(N=S+2;y<N;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(h>>>=S,y-=S,0===t.have){e.msg="invalid bit length repeat",t.mode=30;break}O=t.lens[t.have-1],x=3+(3&h),h>>>=2,y-=2}else if(17===M){for(N=S+3;y<N;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}y-=S,O=0,x=3+(7&(h>>>=S)),h>>>=3,y-=3}else{for(N=S+7;y<N;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}y-=S,O=0,x=11+(127&(h>>>=S)),h>>>=7,y-=7}if(t.have+x>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=30;break}for(;x--;)t.lens[t.have++]=O}}if(30===t.mode)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,_={bits:t.lenbits},R=v(1,t.lens,0,t.nlen,t.lencode,0,t.work,_),t.lenbits=_.bits,R){e.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,_={bits:t.distbits},R=v(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,_),t.distbits=_.bits,R){e.msg="invalid distances set",t.mode=30;break}if(t.mode=20,6===n)break e;case 20:t.mode=21;case 21:if(l>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=h,t.bits=y,g(e,w),a=e.next_out,i=e.output,d=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,h=t.hold,y=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;k=(I=t.lencode[h&(1<<t.lenbits)-1])>>>16&255,M=65535&I,!((S=I>>>24)<=y);){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(k&&0==(240&k)){for(T=S,P=k,A=M;k=(I=t.lencode[A+((h&(1<<T+P)-1)>>T)])>>>16&255,M=65535&I,!(T+(S=I>>>24)<=y);){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}h>>>=T,y-=T,t.back+=T}if(h>>>=S,y-=S,t.back+=S,t.length=M,0===k){t.mode=26;break}if(32&k){t.back=-1,t.mode=12;break}if(64&k){e.msg="invalid literal/length code",t.mode=30;break}t.extra=15&k,t.mode=22;case 22:if(t.extra){for(N=t.extra;y<N;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,y-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;k=(I=t.distcode[h&(1<<t.distbits)-1])>>>16&255,M=65535&I,!((S=I>>>24)<=y);){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(0==(240&k)){for(T=S,P=k,A=M;k=(I=t.distcode[A+((h&(1<<T+P)-1)>>T)])>>>16&255,M=65535&I,!(T+(S=I>>>24)<=y);){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}h>>>=T,y-=T,t.back+=T}if(h>>>=S,y-=S,t.back+=S,64&k){e.msg="invalid distance code",t.mode=30;break}t.offset=M,t.extra=15&k,t.mode=24;case 24:if(t.extra){for(N=t.extra;y<N;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,y-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===d)break e;if(x=w-d,t.offset>x){if((x=t.offset-x)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=30;break}x>t.wnext?(x-=t.wnext,E=t.wsize-x):E=t.wnext-x,x>t.length&&(x=t.length),C=t.window}else C=i,E=a-t.offset,x=t.length;x>d&&(x=d),d-=x,t.length-=x;do{i[a++]=C[E++]}while(--x);0===t.length&&(t.mode=21);break;case 26:if(0===d)break e;i[a++]=t.length,d--,t.mode=21;break;case 27:if(t.wrap){for(;y<32;){if(0===l)break e;l--,h|=o[s++]<<y,y+=8}if(w-=d,e.total_out+=w,t.total+=w,w&&(e.adler=t.check=t.flags?m(t.check,i,w,a-w):f(t.check,i,w,a-w)),w=d,(t.flags?h:r(h))!==t.check){e.msg="incorrect data check",t.mode=30;break}h=0,y=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;y<32;){if(0===l)break e;l--,h+=o[s++]<<y,y+=8}if(h!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=30;break}h=0,y=0}t.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=h,t.bits=y,(t.wsize||w!==e.avail_out&&t.mode<30&&(t.mode<27||4!==n))&&u(e,e.output,e.next_out,w-e.avail_out)?(t.mode=31,-4):(b-=e.avail_in,w-=e.avail_out,e.total_in+=b,e.total_out+=w,t.total+=w,t.wrap&&w&&(e.adler=t.check=t.flags?m(t.check,i,w,e.next_out-w):f(t.check,i,w,e.next_out-w)),e.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===b&&0===w||4===n)&&0===R&&(R=-5),R)},n.inflateEnd=function(e){if(!e||!e.state)return-2;var n=e.state;return n.window&&(n.window=null),e.state=null,0},n.inflateGetHeader=function(e,n){var t;return e&&e.state?0==(2&(t=e.state).wrap)?-2:(t.head=n,n.done=!1,0):-2},n.inflateSetDictionary=function(e,n){var t,r=n.length;return e&&e.state?0!==(t=e.state).wrap&&11!==t.mode?-2:11===t.mode&&f(1,n,r,0)!==t.check?-3:u(e,n,r,r)?(t.mode=31,-4):(t.havedict=1,0):-2},n.inflateInfo="pako inflate (from Nodeca project)"},function(e,n,t){"use strict";e.exports=function(e,n){var t,r,o,i,s,a,l,c,u,d,h,p,f,m,g,v,y,b,w,x,E,C,S,k,M;t=e.state,r=e.next_in,k=e.input,o=r+(e.avail_in-5),i=e.next_out,M=e.output,s=i-(n-e.avail_out),a=i+(e.avail_out-257),l=t.dmax,c=t.wsize,u=t.whave,d=t.wnext,h=t.window,p=t.hold,f=t.bits,m=t.lencode,g=t.distcode,v=(1<<t.lenbits)-1,y=(1<<t.distbits)-1;e:do{f<15&&(p+=k[r++]<<f,f+=8,p+=k[r++]<<f,f+=8),b=m[p&v];n:for(;;){if(p>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))M[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue n}if(32&w){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}x=65535&b,(w&=15)&&(f<w&&(p+=k[r++]<<f,f+=8),x+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=k[r++]<<f,f+=8,p+=k[r++]<<f,f+=8),b=g[p&y];t:for(;;){if(p>>>=w=b>>>24,f-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue t}e.msg="invalid distance code",t.mode=30;break e}if(E=65535&b,f<(w&=15)&&(p+=k[r++]<<f,(f+=8)<w&&(p+=k[r++]<<f,f+=8)),(E+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",t.mode=30;break e}if(p>>>=w,f-=w,E>(w=i-s)){if((w=E-w)>u&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(C=0,S=h,0===d){if(C+=c-w,w<x){x-=w;do{M[i++]=h[C++]}while(--w);C=i-E,S=M}}else if(d<w){if(C+=c+d-w,(w-=d)<x){x-=w;do{M[i++]=h[C++]}while(--w);if(C=0,d<x){x-=w=d;do{M[i++]=h[C++]}while(--w);C=i-E,S=M}}}else if(C+=d-w,w<x){x-=w;do{M[i++]=h[C++]}while(--w);C=i-E,S=M}for(;x>2;)M[i++]=S[C++],M[i++]=S[C++],M[i++]=S[C++],x-=3;x&&(M[i++]=S[C++],x>1&&(M[i++]=S[C++]))}else{C=i-E;do{M[i++]=M[C++],M[i++]=M[C++],M[i++]=M[C++],x-=3}while(x>2);x&&(M[i++]=M[C++],x>1&&(M[i++]=M[C++]))}break}}break}}while(r<o&&i<a);r-=x=f>>3,p&=(1<<(f-=x<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<a?a-i+257:257-(i-a),t.hold=p,t.bits=f}},function(e,n,t){"use strict";var r=t(15),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,n,t,l,c,u,d,h){var p,f,m,g,v,y,b,w,x,E=h.bits,C=0,S=0,k=0,M=0,T=0,P=0,A=0,O=0,R=0,_=0,N=null,I=0,D=new r.Buf16(16),F=new r.Buf16(16),L=null,z=0;for(C=0;C<=15;C++)D[C]=0;for(S=0;S<l;S++)D[n[t+S]]++;for(T=E,M=15;M>=1&&0===D[M];M--);if(T>M&&(T=M),0===M)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(k=1;k<M&&0===D[k];k++);for(T<k&&(T=k),O=1,C=1;C<=15;C++)if(O<<=1,(O-=D[C])<0)return-1;if(O>0&&(0===e||1!==M))return-1;for(F[1]=0,C=1;C<15;C++)F[C+1]=F[C]+D[C];for(S=0;S<l;S++)0!==n[t+S]&&(d[F[n[t+S]]++]=S);if(0===e?(N=L=d,y=19):1===e?(N=o,I-=257,L=i,z-=257,y=256):(N=s,L=a,y=-1),_=0,S=0,C=k,v=u,P=T,A=0,m=-1,g=(R=1<<T)-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){b=C-A,d[S]<y?(w=0,x=d[S]):d[S]>y?(w=L[z+d[S]],x=N[I+d[S]]):(w=96,x=0),p=1<<C-A,k=f=1<<P;do{c[v+(_>>A)+(f-=p)]=b<<24|w<<16|x|0}while(0!==f);for(p=1<<C-1;_&p;)p>>=1;if(0!==p?(_&=p-1,_+=p):_=0,S++,0==--D[C]){if(C===M)break;C=n[t+d[S]]}if(C>T&&(_&g)!==m){for(0===A&&(A=T),v+=k,O=1<<(P=C-A);P+A<M&&!((O-=D[P+A])<=0);)P++,O<<=1;if(R+=1<<P,1===e&&R>852||2===e&&R>592)return 1;c[m=_&g]=T<<24|P<<16|v-u|0}}return 0!==_&&(c[v+_]=C-A<<24|64<<16|0),h.bits=T,0}},function(e,n,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,n,t){"use strict";(function(e){var n=t(95),r=t(50),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in o?o.Promise.prototype.finally||(o.Promise.prototype.finally=r.a):o.Promise=n.a}).call(this,t(14))},function(e,n,t){(function(e){function r(e,n){this._id=e,this._clearFn=n}var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;n.setTimeout=function(){return new r(i.call(setTimeout,o,arguments),clearTimeout)},n.setInterval=function(){return new r(i.call(setInterval,o,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},n.enroll=function(e,n){clearTimeout(e._idleTimeoutId),e._idleTimeout=n},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var n=e._idleTimeout;n>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},n))},t(111),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,t(14))},function(e,n,t){(function(e,n){!function(e,t){"use strict";function r(e){delete d[e]}function o(e){if(h)setTimeout(o,0,e);else{var n=d[e];if(n){h=!0;try{!function(e){var n=e.callback,t=e.args;switch(t.length){case 0:n();break;case 1:n(t[0]);break;case 2:n(t[0],t[1]);break;case 3:n(t[0],t[1],t[2]);break;default:n.apply(void 0,t)}}(n)}finally{r(e),h=!1}}}}if(!e.setImmediate){var i,s,a,l,c,u=1,d={},h=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?i=function(e){n.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var n=!0,t=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=t,n}}()?(l="setImmediate$"+Math.random()+"$",c=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(l)&&o(+n.data.slice(l.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),i=function(n){e.postMessage(l+n,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){o(e.data)},i=function(e){a.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(s=p.documentElement,i=function(e){var n=p.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,s.removeChild(n),n=null},s.appendChild(n)}):i=function(e){setTimeout(o,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),t=0;t<n.length;t++)n[t]=arguments[t+1];var r={callback:e,args:n};return d[u]=r,i(u),u++},f.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,t(14),t(112))},function(e,n){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(n){try{return c.call(null,e,0)}catch(n){return c.call(this,e,0)}}}function i(){f&&h&&(f=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!f){var e=o(i);f=!0;for(var n=p.length;n;){for(h=p,p=[];++m<n;)h&&h[m].run();m=-1,n=p.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(n){try{return u.call(null,e)}catch(n){return u.call(this,e)}}}(e)}}function a(e,n){this.fun=e,this.array=n}function l(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:t}catch(e){c=t}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var h,p=[],f=!1,m=-1;d.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];p.push(new a(e,n)),1!==p.length||f||o(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},,function(e,n,t){"use strict";t.r(n),t(97);var r=t(16),o=t(4),i=t(90),s=t(91),a=t(93),l=t(96),c=t(52);t(84),r.a.mixin(o.a.prototype,i.a),r.a.mixin(o.a.prototype,s.a),r.a.mixin(o.a.prototype,a.a),r.a.mixin(o.a.prototype,l.a),r.a.mixin(o.a.prototype,c.a)}]);